{
    "docs": [
        {
            "location": "/",
            "text": "\u6b22\u8fce\u6765\u5230\u5b85\u5fc5\u5907\n\n\n \n\u8be5\u7f51\u7ad9\u4e3a\u6211\u7684\u4e2a\u4eba\u516c\u4f17\u53f7\u7684\u535a\u5ba2\u5730\u5740\uff0c\u6700\u65b0\u6700\u5feb\u8d44\u6599\u8bf7\u5173\u6ce8\u516c\u4f17\u53f7\n\n\n \n\n\n\u8be5\u9875\u9762\u4e3a\n\u6253\u9020\u5c5e\u4e8e\u81ea\u5df1\u7684\u76d1\u63a7\u7cfb\u7edf\n\u4e3b\u9875\u9762\n\n\n\u66f4\u591a\u5185\u5bb9\u8bf7\u70b9\u51fb\n\u8fd4\u56de\u9996\u9875\n\n\n \n\n \n\n \n\n \n\n\n\u6b22\u8fce\u626b\u63cf\u5173\u6ce8\u4e2a\u4eba\u516c\u4f17\u53f7\n\u5b85\u5fc5\u5907",
            "title": "\u9996\u9875"
        },
        {
            "location": "/#_1",
            "text": "\u8be5\u7f51\u7ad9\u4e3a\u6211\u7684\u4e2a\u4eba\u516c\u4f17\u53f7\u7684\u535a\u5ba2\u5730\u5740\uff0c\u6700\u65b0\u6700\u5feb\u8d44\u6599\u8bf7\u5173\u6ce8\u516c\u4f17\u53f7     \u8be5\u9875\u9762\u4e3a \u6253\u9020\u5c5e\u4e8e\u81ea\u5df1\u7684\u76d1\u63a7\u7cfb\u7edf \u4e3b\u9875\u9762  \u66f4\u591a\u5185\u5bb9\u8bf7\u70b9\u51fb \u8fd4\u56de\u9996\u9875           \u6b22\u8fce\u626b\u63cf\u5173\u6ce8\u4e2a\u4eba\u516c\u4f17\u53f7 \u5b85\u5fc5\u5907",
            "title": "\u6b22\u8fce\u6765\u5230\u5b85\u5fc5\u5907"
        },
        {
            "location": "/1.1/",
            "text": "Django\u6846\u67b6\u4ecb\u7ecd\n\n\n\u524d\u4e0d\u4e45\u6211\u4eec\u4ecb\u7ecd\u4e86\u4f7f\u7528Python\u8fdb\u884c\u65e5\u5e38\u7684\u8fd0\u7ef4\uff0c\u5305\u62ec\u76d1\u63a7Oracle,Linux\u7b49\u7cfb\u7edf\uff0c\u5e76\u628a\u83b7\u5f97\u7684\u7ed3\u679c\u5b58\u5165MySQL\u6570\u636e\u5e93\n\n\n\u5177\u4f53\u8bf7\u770b\u5982\u4e0b\u94fe\u63a5:\n\n\nPython\u81ea\u52a8\u5316\u8fd0\u7ef4\n\n\n\u5982\u679c\u5927\u5bb6\u90fd\u6709\u638c\u63e1\u8fd9\u90e8\u5206\u5185\u5bb9\uff0c\u5c31\u53ef\u4ee5\u8fdb\u9636\u4e00\u6b65\uff0c\u6253\u9020\u5c5e\u4e8e\u81ea\u5df1\u7684\u4e00\u4e2a\u76d1\u63a7\u7cfb\u7edf\n\n\n\u6211\u4eec\u77e5\u9053\u5e02\u9762\u4e0a\u6709\u5f88\u591a\u5f00\u6e90\u7684\u76d1\u63a7\u7cfb\u7edf\uff0c\u5982zabbix\uff0cnagios\u7b49\u5f3a\u5927\u7684\u5de5\u5177\n\n\n\u8fd9\u4e9b\u5de5\u5177\u7684\u5f3a\u5927\u4e4b\u5904\u4e0d\u8a00\u800c\u55bb\uff0c\u4e0d\u8fc7\u8d8a\u5f3a\u5927\u610f\u5473\u8005\u6211\u4eec\u53ef\u80fd\u4f7f\u7528\u4e0d\u5230\u90a3\u4e48\u591a\u529f\u80fd\uff0c\u800c\u4e14\u867d\u7136\u662f\u5f00\u6e90\uff0c\u4e0d\u8fc7\u5bf9\u5927\u591a\u6570\u4eba\u6765\u8bf4\u9605\u8bfb\u6e90\u7801\u4e5f\u6709\u4e00\u5b9a\u7684\u96be\u5ea6\n\n\n\u6240\u4ee5\u4f55\u4e0d\u81ea\u5df1\u5f00\u53d1\u4e00\u5957\u7cfb\u7edf\uff0c\u6309\u7167\u81ea\u5df1\u7684\u8981\u6c42\u548c\u9700\u6c42\u6765\u5b9a\u5236\u5462\n\n\n\u7531\u4e8e\u6211\u4e0d\u662f\u5f00\u53d1\u51fa\u8eab\uff0c\u662f\u81ea\u5b66\u7684Python\uff0c\u53ef\u80fd\u5728\u8bed\u6cd5\uff0c\u6027\u80fd\u4e0a\u6709\u6240\u6b20\u7f3a\uff0c\u7279\u522b\u662f\u60e8\u4e0d\u5fcd\u7779\u7684Web\u754c\u9762\uff0c\u8fd8\u8bf7\u8c05\u89e3\uff0c\u8be5\u4e13\u9898\u4e3b\u8981\u662f\u63d0\u4f9b\u601d\u8def\uff0c\u5982\u6709\u4e0d\u59a5\u4e4b\u5904\u8fd8\u8bf7\u63d0\u51fa\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5(\u6700\u65b0\u4e3a1.11.3) \n\n\n\u5b58\u50a8\u6570\u636e\u5e93:MySQL\u4ee5\u53caredis \n\n\n\u6570\u636e\u5206\u6790:pandas \n\n\n\u56fe\u8868\u63d2\u4ef6:highchart\n\n\nDjango\u4ecb\u7ecd\n\n\n\u719f\u6089Python\u7684\u4eba\u5bf9\u4e8ePython\u7684\u4e3b\u6d41Web\u6846\u67b6\u80af\u5b9a\u6709\u6240\u4e86\u89e3\uff0c\u5404\u6709\u5404\u7684\u597d\u5904\uff0cDjango\u53ef\u4ee5\u8bf4\u662f\u5176\u4e2d\u6700\u4e3a\u5f3a\u5927\u548c\u6d41\u884c\u7684\u4e00\u4e2a\uff0c\u5176\u5b98\u65b9\u6587\u6863\u975e\u5e38\u8be6\u7ec6\uff0c\u7f51\u4e0a\u4e5f\u6709\u4e0d\u5c11\u4e2d\u6587\u7684\u6587\u6863\uff0c\u5927\u5bb6\u53ef\u73b0\u884c\u4e86\u89e3\n\n\n\u5b98\u65b9\u7f51\u7ad9:\n\n\nhttps://www.djangoproject.com/\n\n\nORM\u6846\u67b6\n\n\nDjango\u91c7\u7528ORM\u6a21\u578b\u5904\u7406\u6570\u636e\u5e93\u5173\u7cfb\n\n\n\u5bf9\u8c61-\u5173\u7cfb\u6620\u5c04\uff08Object-Relational Mapping\uff0c\u7b80\u79f0ORM\uff09\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u901a\u8fc7\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u6cd5\u6765\u6620\u5c04\u540e\u7aef\u6570\u636e\u5e93\n\n\n\u5728\u540e\u9762\u7684\u5b9e\u4f8b\u4e2d\u4f1a\u6709\u4ecb\u7ecd\uff0c\u5b83\u901a\u8fc7 \u7c7b(class)\u7684\u65b9\u5f0f\u5b9a\u4e49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8868\u7ed3\u6784\n\n\nDjango\u7279\u6027\n\n\nDjango \u4f5c\u4e3aWeb\u6846\u67b6\u63d0\u4f9b\u4e86\u4e00\u4e9b\u975e\u5e38\u6709\u7528\u7684\u80fd\u591f\u63d0\u5347\u5f00\u53d1\u6548\u7387\u7684\u7279\u6027\n\n\n\n\n\n\nORM\u6a21\u578b\u7b80\u5316\u548c\u6570\u636e\u5e93\u5c42\u9762\u7684\u6c9f\u901a\uff0c\u5982\u8868\u7684\u5efa\u7acb\u53ca\u4fee\u6539\n\n\n\n\n\n\n\u5f3a\u5927\u7684\u6a21\u677f(template)\u529f\u80fd\uff0c\u7b80\u5316\u524d\u7aef\u5f00\u53d1\u96be\u5ea6\n\n\n\n\n\n\nform\u8868\u5355\u7ba1\u7406\u7b80\u5316\u8868\u5355\u64cd\u4f5c\n\n\n\n\n\n\n\u96c6\u6210\u4e86\u53ef\u89c6\u5316\u7ba1\u7406\u6570\u636e\u5e93\u5de5\u5177(admin)\uff0c\u514d\u53bb\u4e86\u5b89\u88c5\u63d2\u4ef6\u7b49\u52a8\u4f5c\n\n\n\n\n\n\nDjango Web\u8bf7\u6c42\u8fc7\u7a0b\n\n\n\u63a5\u4e0b\u6765\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0bDjango\u5982\u4f55\u5904\u7406\u7528\u6237\u7684Web\u8bf7\u6c42\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5e38\u7528\u7684\u6587\u4ef6\u7684\u8bf4\u660e\n\n\n\n\n\n\n\n\u9996\u5148\u7528\u6237\u8f93\u5165url\u540e,django\u4f1a\u67e5\u627eurls.py\u6587\u4ef6\uff0c\u627e\u5230\u4e0e\u4e4b\u5bf9\u5e94\u7684\u51fd\u6570\n\n\n\n\n\n\nurls.py\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u4f1a\u6709\u660e\u786e\u7684\u5b9a\u4e49\uff0cviews\u76f8\u5f53\u4e8e\u540e\u7aef\n\n\n\n\n\n\nviews.py\u53ef\u80fd\u4f1a\u8c03\u7528template(\u6a21\u677f)\u6587\u4ef6\uff0c\u7528\u6237\u5728\u524d\u7aef\u663e\u793a\n\n\n\n\n\n\nmodel.py\u5373\u524d\u9762\u6240\u8bf4\u7684ORM\u6a21\u578b\uff0c\u5c06\u6570\u636e\u5e93\u8868\u5b9a\u4e49\u5199\u5728\u8be5\u6587\u4ef6\u4e2d\n\n\n\n\n\n\nform.py\u4e3a\u8868\u5355\u6587\u4ef6\uff0cDjango\u540c\u6837\u63d0\u4f9b\u4e86\u4e00\u5957\u7ba1\u7406\u8868\u5355\u7684\u65b9\u6cd5\n\n\n\n\n\n\nsettings.py\u4e3a\u914d\u7f6e\u6587\u4ef6\uff0c\u91cc\u9762\u5305\u542bIP\u8bbf\u95ee\u63a7\u5236\uff0c\u63d2\u4ef6\u914d\u7f6e\u4ee5\u53ca\u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\u7b49\u4fe1\u606f\n\n\n\n\n\n\n\u4eca\u5929\u4ecb\u7ecd\u4e86\u4f7f\u7528Django\u5efa\u7acb\u7f51\u7ad9\u524d\u7684\u4e00\u4e9b\u6982\u5ff5\uff0c\u4e0b\u8282\u5c06\u4ecb\u7ecd\u5982\u4f55\u642d\u5efa\u7f51\u7ad9",
            "title": "1.Django\u6846\u67b6\u4ecb\u7ecd"
        },
        {
            "location": "/1.1/#django",
            "text": "\u524d\u4e0d\u4e45\u6211\u4eec\u4ecb\u7ecd\u4e86\u4f7f\u7528Python\u8fdb\u884c\u65e5\u5e38\u7684\u8fd0\u7ef4\uff0c\u5305\u62ec\u76d1\u63a7Oracle,Linux\u7b49\u7cfb\u7edf\uff0c\u5e76\u628a\u83b7\u5f97\u7684\u7ed3\u679c\u5b58\u5165MySQL\u6570\u636e\u5e93  \u5177\u4f53\u8bf7\u770b\u5982\u4e0b\u94fe\u63a5:  Python\u81ea\u52a8\u5316\u8fd0\u7ef4  \u5982\u679c\u5927\u5bb6\u90fd\u6709\u638c\u63e1\u8fd9\u90e8\u5206\u5185\u5bb9\uff0c\u5c31\u53ef\u4ee5\u8fdb\u9636\u4e00\u6b65\uff0c\u6253\u9020\u5c5e\u4e8e\u81ea\u5df1\u7684\u4e00\u4e2a\u76d1\u63a7\u7cfb\u7edf  \u6211\u4eec\u77e5\u9053\u5e02\u9762\u4e0a\u6709\u5f88\u591a\u5f00\u6e90\u7684\u76d1\u63a7\u7cfb\u7edf\uff0c\u5982zabbix\uff0cnagios\u7b49\u5f3a\u5927\u7684\u5de5\u5177  \u8fd9\u4e9b\u5de5\u5177\u7684\u5f3a\u5927\u4e4b\u5904\u4e0d\u8a00\u800c\u55bb\uff0c\u4e0d\u8fc7\u8d8a\u5f3a\u5927\u610f\u5473\u8005\u6211\u4eec\u53ef\u80fd\u4f7f\u7528\u4e0d\u5230\u90a3\u4e48\u591a\u529f\u80fd\uff0c\u800c\u4e14\u867d\u7136\u662f\u5f00\u6e90\uff0c\u4e0d\u8fc7\u5bf9\u5927\u591a\u6570\u4eba\u6765\u8bf4\u9605\u8bfb\u6e90\u7801\u4e5f\u6709\u4e00\u5b9a\u7684\u96be\u5ea6  \u6240\u4ee5\u4f55\u4e0d\u81ea\u5df1\u5f00\u53d1\u4e00\u5957\u7cfb\u7edf\uff0c\u6309\u7167\u81ea\u5df1\u7684\u8981\u6c42\u548c\u9700\u6c42\u6765\u5b9a\u5236\u5462  \u7531\u4e8e\u6211\u4e0d\u662f\u5f00\u53d1\u51fa\u8eab\uff0c\u662f\u81ea\u5b66\u7684Python\uff0c\u53ef\u80fd\u5728\u8bed\u6cd5\uff0c\u6027\u80fd\u4e0a\u6709\u6240\u6b20\u7f3a\uff0c\u7279\u522b\u662f\u60e8\u4e0d\u5fcd\u7779\u7684Web\u754c\u9762\uff0c\u8fd8\u8bf7\u8c05\u89e3\uff0c\u8be5\u4e13\u9898\u4e3b\u8981\u662f\u63d0\u4f9b\u601d\u8def\uff0c\u5982\u6709\u4e0d\u59a5\u4e4b\u5904\u8fd8\u8bf7\u63d0\u51fa  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5(\u6700\u65b0\u4e3a1.11.3)   \u5b58\u50a8\u6570\u636e\u5e93:MySQL\u4ee5\u53caredis   \u6570\u636e\u5206\u6790:pandas   \u56fe\u8868\u63d2\u4ef6:highchart",
            "title": "Django\u6846\u67b6\u4ecb\u7ecd"
        },
        {
            "location": "/1.1/#django_1",
            "text": "\u719f\u6089Python\u7684\u4eba\u5bf9\u4e8ePython\u7684\u4e3b\u6d41Web\u6846\u67b6\u80af\u5b9a\u6709\u6240\u4e86\u89e3\uff0c\u5404\u6709\u5404\u7684\u597d\u5904\uff0cDjango\u53ef\u4ee5\u8bf4\u662f\u5176\u4e2d\u6700\u4e3a\u5f3a\u5927\u548c\u6d41\u884c\u7684\u4e00\u4e2a\uff0c\u5176\u5b98\u65b9\u6587\u6863\u975e\u5e38\u8be6\u7ec6\uff0c\u7f51\u4e0a\u4e5f\u6709\u4e0d\u5c11\u4e2d\u6587\u7684\u6587\u6863\uff0c\u5927\u5bb6\u53ef\u73b0\u884c\u4e86\u89e3  \u5b98\u65b9\u7f51\u7ad9:  https://www.djangoproject.com/",
            "title": "Django\u4ecb\u7ecd"
        },
        {
            "location": "/1.1/#orm",
            "text": "Django\u91c7\u7528ORM\u6a21\u578b\u5904\u7406\u6570\u636e\u5e93\u5173\u7cfb  \u5bf9\u8c61-\u5173\u7cfb\u6620\u5c04\uff08Object-Relational Mapping\uff0c\u7b80\u79f0ORM\uff09\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u901a\u8fc7\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u6cd5\u6765\u6620\u5c04\u540e\u7aef\u6570\u636e\u5e93  \u5728\u540e\u9762\u7684\u5b9e\u4f8b\u4e2d\u4f1a\u6709\u4ecb\u7ecd\uff0c\u5b83\u901a\u8fc7 \u7c7b(class)\u7684\u65b9\u5f0f\u5b9a\u4e49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8868\u7ed3\u6784",
            "title": "ORM\u6846\u67b6"
        },
        {
            "location": "/1.1/#django_2",
            "text": "Django \u4f5c\u4e3aWeb\u6846\u67b6\u63d0\u4f9b\u4e86\u4e00\u4e9b\u975e\u5e38\u6709\u7528\u7684\u80fd\u591f\u63d0\u5347\u5f00\u53d1\u6548\u7387\u7684\u7279\u6027    ORM\u6a21\u578b\u7b80\u5316\u548c\u6570\u636e\u5e93\u5c42\u9762\u7684\u6c9f\u901a\uff0c\u5982\u8868\u7684\u5efa\u7acb\u53ca\u4fee\u6539    \u5f3a\u5927\u7684\u6a21\u677f(template)\u529f\u80fd\uff0c\u7b80\u5316\u524d\u7aef\u5f00\u53d1\u96be\u5ea6    form\u8868\u5355\u7ba1\u7406\u7b80\u5316\u8868\u5355\u64cd\u4f5c    \u96c6\u6210\u4e86\u53ef\u89c6\u5316\u7ba1\u7406\u6570\u636e\u5e93\u5de5\u5177(admin)\uff0c\u514d\u53bb\u4e86\u5b89\u88c5\u63d2\u4ef6\u7b49\u52a8\u4f5c",
            "title": "Django\u7279\u6027"
        },
        {
            "location": "/1.1/#django-web",
            "text": "\u63a5\u4e0b\u6765\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0bDjango\u5982\u4f55\u5904\u7406\u7528\u6237\u7684Web\u8bf7\u6c42\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5e38\u7528\u7684\u6587\u4ef6\u7684\u8bf4\u660e    \u9996\u5148\u7528\u6237\u8f93\u5165url\u540e,django\u4f1a\u67e5\u627eurls.py\u6587\u4ef6\uff0c\u627e\u5230\u4e0e\u4e4b\u5bf9\u5e94\u7684\u51fd\u6570    urls.py\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u4f1a\u6709\u660e\u786e\u7684\u5b9a\u4e49\uff0cviews\u76f8\u5f53\u4e8e\u540e\u7aef    views.py\u53ef\u80fd\u4f1a\u8c03\u7528template(\u6a21\u677f)\u6587\u4ef6\uff0c\u7528\u6237\u5728\u524d\u7aef\u663e\u793a    model.py\u5373\u524d\u9762\u6240\u8bf4\u7684ORM\u6a21\u578b\uff0c\u5c06\u6570\u636e\u5e93\u8868\u5b9a\u4e49\u5199\u5728\u8be5\u6587\u4ef6\u4e2d    form.py\u4e3a\u8868\u5355\u6587\u4ef6\uff0cDjango\u540c\u6837\u63d0\u4f9b\u4e86\u4e00\u5957\u7ba1\u7406\u8868\u5355\u7684\u65b9\u6cd5    settings.py\u4e3a\u914d\u7f6e\u6587\u4ef6\uff0c\u91cc\u9762\u5305\u542bIP\u8bbf\u95ee\u63a7\u5236\uff0c\u63d2\u4ef6\u914d\u7f6e\u4ee5\u53ca\u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\u7b49\u4fe1\u606f    \u4eca\u5929\u4ecb\u7ecd\u4e86\u4f7f\u7528Django\u5efa\u7acb\u7f51\u7ad9\u524d\u7684\u4e00\u4e9b\u6982\u5ff5\uff0c\u4e0b\u8282\u5c06\u4ecb\u7ecd\u5982\u4f55\u642d\u5efa\u7f51\u7ad9",
            "title": "Django Web\u8bf7\u6c42\u8fc7\u7a0b"
        },
        {
            "location": "/1.2/",
            "text": "\u6570\u636e\u5e93,\u6a21\u5757\u7b49\u73af\u5883\u7684\u51c6\u5907\n\n\n\u4ece\u4eca\u5929\u5f00\u59cb\u8bb2\u89e3\u5982\u4f55\u5229\u7528Django\u6846\u67b6\n\n\n\u518d\u6b21\u63a8\u8350\u53ef\u5148\u884c\u7f51\u4e0a\u4e86\u89e3\u4e0b\uff0c\u53e6\u5916\u6211\u529b\u6c42\u628a\u6bcf\u671f\u5206\u5272\u7684\u5f88\u7ec6\uff0c\u8fd9\u6837\u597d\u5199\uff0c\u5e0c\u671b\u5927\u5bb6\u522b\u8bf4\u6211\u6c34~\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \nPython\u7248\u672c :2.7 \nDjango\u7248\u672c: 1.10.5(\u6700\u65b0\u4e3a1.11.3)\n\n\n\u540e\u7aef\u6570\u636e\u5e93\u5b58\u50a8\n\n\nDjango\u652f\u6301\u5f88\u591a\u6570\u636e\u5e93\u7c7b\u578b\n\n\n\u6211\u4eec\u8981\u642d\u5efa\u7684\u76d1\u63a7\u5e73\u53f0\u540e\u7aef\u6570\u636e\u5e93\u91c7\u7528MySQL\n\n\n\u5bf9\u4e8e\u5982\u4f55\u5b89\u88c5\u53c2\u8003\u4e0b\u9762\u8fde\u63a5\n\n\nMySQL\u5b89\u88c5\n\n\n\u5b89\u88c5Python\u6269\u5c55\n\n\nyum install MySQL-python\n\n\n\n\n\u521b\u5efa\u5b58\u653e\u76d1\u63a7\u6570\u636e\u7684\u6570\u636e\u5e93\n\n\n\u6570\u636e\u5e93\u53d6\u540d oracle \u63a8\u8350\u5927\u5bb6\u6309\u7167\u6211\u7684\u8bed\u6cd5\u6765\n\n\n\u5c24\u5176\u662fdefault collate \u884c\uff0c\u8fd9\u6837\u53ef\u907f\u514d\u4ee5\u540e\u5b58\u50a8\u4e2d\u6587\u65f6\u4e71\u7801\n\n\nmysql>CREATE DATABASE oracle\n     DEFAULT CHARACTER SET utf8\n    DEFAULT COLLATE utf8_general_ci;\n\n\n\n\n\u521b\u5efa\u666e\u901a\u8d26\u6237\u7528\u4e8e\u65e5\u5e38\u7684\u8fde\u63a5\n\n\nmysql> CREATE USER 'oracle'@'%' IDENTIFIED BY 'oracle';\nmysql> GRANT ALL PRIVILEGES ON *.* TO 'oracle'@'%'  WITH GRANT OPTION;\n\n\n\n\n\u5b89\u88c5cx_Oracle\n\n\n\u6211\u4eec\u7684\u76d1\u63a7\u5e73\u53f0\u9700\u8981\u83b7\u53d6oracle\u6570\u636e\u5e93\u7684\u8d44\u6599\uff0c\u9700\u8981\u5b89\u88c5 cx_Oracle\u6a21\u5757\n\n\ncx_Oracle\u6a21\u5757\u7684\u5b89\u88c5\n\n\n\u5b89\u88c5paramiko\n\n\n\u6211\u4eec\u7684\u76d1\u63a7\u5e73\u53f0\u9700\u8981\u83b7\u53d6linux/unix\u7cfb\u7edf\u7684\u8d44\u6599\uff0c\u9700\u8981\u5b89\u88c5paramiko\u6a21\u5757\n\n\n\u4e0b\u9762\u7684\u94fe\u63a5\u7528\u7684\u662fpython3\uff0c\u800c\u8fd9\u6b21\u6211\u4eec\u7528\u7684\u662fpython 2\n\n\n\u5b89\u88c5paramiko \u8bf7\u4f7f\u7528\n\n\npip install paramiko\n\n\n\n\nparamiko\u6a21\u5757\u7684\u5b89\u88c5\n\n\n\u5728\u8fd9\u4e2a\u4e13\u9898\u7684\u540e\u671f\u4f1a\u7528\u5230redis\u548cpandas\u8fd9\u4e2a\u540e\u9762\u5728\u8bf4\n\n\n\u4eca\u5929\u4ecb\u7ecd\u4e86\u5728\u6b63\u5f0f\u67b6\u8bbe\u7f51\u7ad9\u524d\u9700\u8981\u7528\u5230\u7684\u6a21\u5757\u4ee5\u53ca\u6570\u636e\u5e93\u914d\u7f6e\uff0c\n\n\n\u4e0b\u8282\u8bb2\u8ff0\u5982\u4f55\u5f00\u59cb\u81ea\u5df1\u7684\u7b2c\u4e00\u4e2a\u7f51\u7ad9",
            "title": "2.\u6570\u636e\u5e93,\u6a21\u5757\u7b49\u73af\u5883\u7684\u51c6\u5907"
        },
        {
            "location": "/1.2/#_1",
            "text": "\u4ece\u4eca\u5929\u5f00\u59cb\u8bb2\u89e3\u5982\u4f55\u5229\u7528Django\u6846\u67b6  \u518d\u6b21\u63a8\u8350\u53ef\u5148\u884c\u7f51\u4e0a\u4e86\u89e3\u4e0b\uff0c\u53e6\u5916\u6211\u529b\u6c42\u628a\u6bcf\u671f\u5206\u5272\u7684\u5f88\u7ec6\uff0c\u8fd9\u6837\u597d\u5199\uff0c\u5e0c\u671b\u5927\u5bb6\u522b\u8bf4\u6211\u6c34~  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \nPython\u7248\u672c :2.7 \nDjango\u7248\u672c: 1.10.5(\u6700\u65b0\u4e3a1.11.3)",
            "title": "\u6570\u636e\u5e93,\u6a21\u5757\u7b49\u73af\u5883\u7684\u51c6\u5907"
        },
        {
            "location": "/1.2/#_2",
            "text": "Django\u652f\u6301\u5f88\u591a\u6570\u636e\u5e93\u7c7b\u578b  \u6211\u4eec\u8981\u642d\u5efa\u7684\u76d1\u63a7\u5e73\u53f0\u540e\u7aef\u6570\u636e\u5e93\u91c7\u7528MySQL  \u5bf9\u4e8e\u5982\u4f55\u5b89\u88c5\u53c2\u8003\u4e0b\u9762\u8fde\u63a5  MySQL\u5b89\u88c5",
            "title": "\u540e\u7aef\u6570\u636e\u5e93\u5b58\u50a8"
        },
        {
            "location": "/1.2/#python",
            "text": "yum install MySQL-python",
            "title": "\u5b89\u88c5Python\u6269\u5c55"
        },
        {
            "location": "/1.2/#_3",
            "text": "\u6570\u636e\u5e93\u53d6\u540d oracle \u63a8\u8350\u5927\u5bb6\u6309\u7167\u6211\u7684\u8bed\u6cd5\u6765  \u5c24\u5176\u662fdefault collate \u884c\uff0c\u8fd9\u6837\u53ef\u907f\u514d\u4ee5\u540e\u5b58\u50a8\u4e2d\u6587\u65f6\u4e71\u7801  mysql>CREATE DATABASE oracle\n     DEFAULT CHARACTER SET utf8\n    DEFAULT COLLATE utf8_general_ci;",
            "title": "\u521b\u5efa\u5b58\u653e\u76d1\u63a7\u6570\u636e\u7684\u6570\u636e\u5e93"
        },
        {
            "location": "/1.2/#_4",
            "text": "mysql> CREATE USER 'oracle'@'%' IDENTIFIED BY 'oracle';\nmysql> GRANT ALL PRIVILEGES ON *.* TO 'oracle'@'%'  WITH GRANT OPTION;",
            "title": "\u521b\u5efa\u666e\u901a\u8d26\u6237\u7528\u4e8e\u65e5\u5e38\u7684\u8fde\u63a5"
        },
        {
            "location": "/1.2/#cx_oracle",
            "text": "\u6211\u4eec\u7684\u76d1\u63a7\u5e73\u53f0\u9700\u8981\u83b7\u53d6oracle\u6570\u636e\u5e93\u7684\u8d44\u6599\uff0c\u9700\u8981\u5b89\u88c5 cx_Oracle\u6a21\u5757  cx_Oracle\u6a21\u5757\u7684\u5b89\u88c5",
            "title": "\u5b89\u88c5cx_Oracle"
        },
        {
            "location": "/1.2/#paramiko",
            "text": "\u6211\u4eec\u7684\u76d1\u63a7\u5e73\u53f0\u9700\u8981\u83b7\u53d6linux/unix\u7cfb\u7edf\u7684\u8d44\u6599\uff0c\u9700\u8981\u5b89\u88c5paramiko\u6a21\u5757  \u4e0b\u9762\u7684\u94fe\u63a5\u7528\u7684\u662fpython3\uff0c\u800c\u8fd9\u6b21\u6211\u4eec\u7528\u7684\u662fpython 2  \u5b89\u88c5paramiko \u8bf7\u4f7f\u7528  pip install paramiko  paramiko\u6a21\u5757\u7684\u5b89\u88c5  \u5728\u8fd9\u4e2a\u4e13\u9898\u7684\u540e\u671f\u4f1a\u7528\u5230redis\u548cpandas\u8fd9\u4e2a\u540e\u9762\u5728\u8bf4  \u4eca\u5929\u4ecb\u7ecd\u4e86\u5728\u6b63\u5f0f\u67b6\u8bbe\u7f51\u7ad9\u524d\u9700\u8981\u7528\u5230\u7684\u6a21\u5757\u4ee5\u53ca\u6570\u636e\u5e93\u914d\u7f6e\uff0c  \u4e0b\u8282\u8bb2\u8ff0\u5982\u4f55\u5f00\u59cb\u81ea\u5df1\u7684\u7b2c\u4e00\u4e2a\u7f51\u7ad9",
            "title": "\u5b89\u88c5paramiko"
        },
        {
            "location": "/1.3/",
            "text": "\u4f7f\u7528Django\u521b\u5efa\u7f51\u7ad9\n\n\n\u4ece\u4eca\u5929\u5f00\u59cb\u8bb2\u89e3\u5982\u4f55\u5229\u7528Django\u6846\u67b6\u642d\u5efa\u76d1\u63a7\u7cfb\u7edf\n\n\n\u518d\u6b21\u63a8\u8350\u53ef\u5148\u884c\u7f51\u4e0a\u4e86\u89e3\u4e0b\uff0c\u53e6\u5916\u6211\u529b\u6c42\u628a\u6bcf\u671f\u5206\u5272\u7684\u5f88\u7ec6+\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5b89\u88c5Django\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528pip\u5b89\u88c5\n\n\n\u8fd9\u6837\u5b89\u88c5\u7684\u662f\u6700\u65b0\u7248\u672c1.11.3\n\n\npip install Django \n\n\n\n\n\u9a8c\u8bc1\u5b89\u88c5\n\n\n>>> import django\n>>> print(django.get_version())\n1.11\n\n\n\n\n\n\n\u7531\u4e8e\u6211\u8f83\u65e9\u65f6\u95f4\u5199\u7684\u7f51\u7ad9\uff0c\u7248\u672c\u4e3a1.10.5\uff0c\u4e0d\u5f71\u54cd\u5b9e\u9645\u4f7f\u7528\uff0c\u5927\u5bb6\u53ef\u5b89\u88c5\u6700\u65b0\u7248\u672c\n\n\n\u521b\u5efaoracle\u7528\u6237\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle\u7528\u6237\u6765\u521b\u5efa\u548c\u7ef4\u62a4\u6211\u4eec\u7684\u76d1\u63a7\u7cfb\u7edf,\u8be5\u7528\u6237\u8bf7\u4e8b\u5148\u521b\u5efa\n\n\n[root@asensvr-oms ~]# useadd oracle\n[root@asensvr-oms ~]# passwd oracle\n\n\n\n\n\u5efa\u7acbproject\n\n\nDjango\u5efa\u7acb\u7f51\u7ad9\u9700\u8981\u9996\u5148\u521b\u5efa\u4e00\u4e2aproject\uff0c\u7136\u540e\u5efa\u7acb\u4e00\u4e2aapp(\u5373\u7f51\u7ad9)\n\n\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle\u5bb6\u76ee\u5f55\u5b58\u653e\u4f7f\u7528\u5230\u7684\u6587\u4ef6\n\n\n[oracle@asensvr-oms ~]$ cd ~\n[oracle@asensvr-oms ~]$ django-admin startproject mysite\n\n\n\n\n\u521b\u5efa\u5b8cproject\u540e\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\n\n\nmysite/\n    manage.py\n    mysite/\n        __init__.py\n        settings.py\n        urls.py\n        wsgi.py\n\n\n\n\n\n\nmanage.py\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u5de5\u5177\u7528\u6237\u548cdjango\u8fdb\u884c\u4ea4\u4e92\uff0c\u540e\u7eed\u521b\u5efaapp\uff0c\u540c\u6b65\u6570\u636e\u5e93\u7b49\u4f1a\u7528\u5230 \n\n\nmysite/\ninit\n.py \u662f\u4e00\u4e2a\u7a7a\u767d\u6587\u4ef6\uff0c\u73b0\u9636\u6bb5\u6211\u4eec\u65e0\u9700\u7406\u4f1a\uff0c\u4fdd\u7559\u5373\u53ef \n\n\nmysite/settings.py:\u662fdjango\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u975e\u5e38\u91cd\u8981\uff0c\u540e\u9762\u4f1a\u4e13\u95e8\u4ecb\u7ecd \n\n\nmysite/urls.py:\u4e3aurl\u6587\u4ef6 \n\n\nmysite/wsgi.py \u5728\u6211\u4eec\u90e8\u7f72web\u670d\u52a1\u5668\u7684\u65f6\u5019\u7528\u5230\n\n\n\n\n\u521b\u5efaapp\n\n\n\u8fdb\u5165 manage.py\u7684\u76ee\u5f55\u6267\u884c\n\n\ncd  ~/mysite\npython manage.py startapp monitor\n\n\n\n\n\u521b\u5efa\u5b8capp\u540e\u4f1a\u5728mysite\u76ee\u5f55\u65b0\u5efa\u4e2amonitor\u76ee\u5f55\uff0c\u7ed3\u6784\u5982\u4e0b\n\n\nmonitor/\n    __init__.py\n    admin.py\n    apps.py\n    migrations/\n        __init__.py\n    models.py\n    tests.py\n    views.py\n    urls.py (\u73b0\u5728\u6ca1\u6709\uff0c\u540e\u7eed\u6dfb\u52a0\u7684)\n\n\n\n\n\n\nadmin.py\u91cc\u9762\u4fdd\u5b58\u7684\u662f\u9700\u8981\u540e\u53f0\u7ba1\u7406\u7684\u8868\uff0c\u540e\u9762\u4f1a\u6709\u4ecb\u7ecd \n\n\napps.py\u4fdd\u5b58app\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u6682\u65f6\u7528\u4e0d\u5230 \n\n\nmodels.py\u91cc\u9762\u4fdd\u5b58\u7684\u662f\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8868\u7684\u5b9a\u4e49 \n\n\ntests.py\u91cc\u9762\u5199\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u76ee\u524d\u6211\u6ca1\u7528\u5230\u8fc7 \n\n\nviews.py\u5b9a\u4e49\u7684\u662f\u540e\u7aef\u5904\u7406\u7a0b\u5e8f\uff0c\u540e\u9762\u4f1a\u4ecb\u7ecd \n\n\nurls.py:\u4e3aurl\u6587\u4ef6 \n\n\nmigrations\u6587\u4ef6\u5939\u4e3a\u540c\u6b65\u6570\u636e\u8868\u4e13\u7528\u6587\u4ef6\u5939\uff0c\u975e\u5e38\u91cd\u8981\uff0c\u540e\u9762\u4f1a\u8bf4\n\n\n\n\n\u914d\u7f6e\u6587\u4ef6\u8bbe\u5b9a\n\n\n\u6211\u4eec\u9700\u8981\u7f16\u8f91 ~/mysite/mysite/settings.py\u6587\u4ef6\n\n\n\u8bbe\u5b9a\u5141\u8bb8\u8bbf\u95ee\u7684\u4e3b\u673a\n\n\n\u5982\u6709\u5176\u4ed6\u4e3b\u673a\u9700\u8981\u8bbf\u95ee\uff0c\u9700\u4e00\u4e2a\u4e2a\u6dfb\u52a0\n\n\nALLOWED_HOSTS = ['10.65.202.218','10.65.5.189']\n\n\n\n\n\u6dfb\u52a0monitor app\u5e94\u7528\n\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'monitor',\n]\n\n\n\n\n\u914d\u7f6e\u8fde\u63a5MySQL\u6570\u636e\u5e93\n\n\n\u5220\u9664\u539f\u6709\u7684sqlite\u6570\u636e\u5e93\u8fde\u63a5\n\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'oracle',\n        'USER': 'username',\n        'PASSWORD': 'password',\n        'HOST': 'localhost',\n        'PORT': '',\n        'OPTIONS': {\n            'read_default_file': '/etc/my.cnf',\n        },\n    }\n}\n\n\n\n\n\u66f4\u6539\u65f6\u533a\n\n\nTIME_ZONE = 'Asia/Shanghai'\n\n\n\n\n\u8bbe\u7f6e\u9759\u6001\u6587\u4ef6\u4f4d\u7f6e\n\n\n\u8fd9\u91cc\u653e\u7f6e\u9759\u6001\u6587\u4ef6\uff0c\u5982\u56fe\u7247,css\u6587\u4ef6\u7b49\n\n\n\u76ee\u5f55\u9700\u63d0\u524d\u5efa\u7acb\n\n\nSTATIC_ROOT='/home/mysite/mysite/monitor/static/'\n\n\n\n\n\u540c\u6b65\u6570\u636e\n\n\n\u901a\u8fc7\u4e0a\u9762\u7684\u914d\u7f6e\u63a5\u4e0b\u6765\u6211\u4eec\u540c\u6b65\u6570\u636e\uff0c\u8ba9django\u7684\u4e00\u4e9b\u6570\u636e\u653e\u5230\u6211\u4eec\u7684MySQL\u6570\u636e\u5e93\u4e2d\n\n\npython manage.py migrate\n\n\n\n\n\n\n\u521b\u5efaadmin\u8d85\u7ea7\u7528\u6237\n\n\n\u8be5\u7528\u6237\u4e3a\u540e\u53f0\u7ba1\u7406\u7684\u7528\u6237\n\n\npython manage.py createsuperuser\n\n\n\n\n\n\n\u53ef\u4ee5\u770b\u5230\u5bc6\u7801\u6709\u590d\u6742\u5ea6\u9700\u6c42\n\n\n\u5f00\u542f\u5f00\u53d1\u73af\u5883\n\n\n\u8fd9\u65f6\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528django\u81ea\u5e26\u7684web\u670d\u52a1\u5668\u6765\u8fd0\u884c\n\n\n\u8be5\u7a97\u53e3\u4e0d\u53ef\u5173\u95ed\uff0c\u6b63\u5f0f\u73af\u5883\u90e8\u7f72\u540e\u7eed\u8bf4\u660e\n\n\n\u6ce8\u610f\u5982\u679c\u662f\u975eroot\u7528\u6237\u65e0\u6cd5\u4f7f\u752880\u7aef\u53e3\n\n\ncd ~/mysite\npython manage.py runserver 0.0.0.0:8081\n\n\n\n\n\n\n\u4e4b\u540e\u8fdb\u5165\u7f51\u7ad9\n\n\nhttp://10.65.202.218:8081/\n\n\n\n\n\u5f53\u770b\u5230\u4e0b\u56fe\u65f6\u5c31\u8bf4\u660e\u5df2\u7ecf\u914d\u7f6e\u5e76\u542f\u52a8\u6210\u529f\n\n\n\u5982\u679c\u6709\u9519\uff0c\u8bf7\u6839\u636e\u63d0\u793a\u89e3\u51b3\uff0c\u4e5f\u53ef\u7559\u8a00\u6216\u5728\u540e\u53f0\u8be2\u95ee\n\n\n\u6253\u5f00admin\u540e\u53f0\n\n\n\u6211\u4eec\u65e5\u5e38\u7ba1\u7406MySQL\u8868\u9700\u8981\u8fdb\u5165admin\u9875\u9762\u7ba1\u7406\n\n\nhttp://10.65.202.218:8081/admin\n\n\n\n\u4f7f\u7528\u4e0a\u9762\u4f7f\u7528 createsuperuser \u547d\u4ee4\u521b\u5efa\u7684\u7528\u6237\u540d\u5bc6\u7801\u767b\u9646\n\n\n\u8fdb\u5165\u4e4b\u540e\u53ef\u4f7f\u7528\u8be5\u56fe\u5f62\u5316\u7ba1\u7406\u6570\u636e\u5e93\u8868\n\n\n\n\n\u540e\u7eed\u5728model.py\u6587\u4ef6\u91cc\u5b9a\u4e49\u7684\u8868\u4f1a\u5728\u8fd9\u91cc\u663e\u793a\n\n\n\u4eca\u5929\u4ecb\u7ecd\u4e86\u4ecb\u7ecd\u4e86\u5982\u4f55\u5b89\u88c5\u914d\u7f6e\u5e76\u521b\u5efa\u7f51\u7ad9\uff0c\u5185\u5bb9\u6709\u70b9\u591a\uff0c\u5927\u5bb6\u53ef\u6309\u7167\u6b65\u9aa4\u4e00\u6b65\u6b65\u6765\uff0c\u6211\u4e5f\u662f\u91cd\u65b0\u642d\u7684\u73af\u5883\u4e00\u6b65\u6b65\u6765\u7684\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5229\u7528Django\u521b\u5efaMySQL\u6570\u636e\u5e93\u8868",
            "title": "3.\u4f7f\u7528Django\u521b\u5efa\u7f51\u7ad9"
        },
        {
            "location": "/1.3/#django",
            "text": "\u4ece\u4eca\u5929\u5f00\u59cb\u8bb2\u89e3\u5982\u4f55\u5229\u7528Django\u6846\u67b6\u642d\u5efa\u76d1\u63a7\u7cfb\u7edf  \u518d\u6b21\u63a8\u8350\u53ef\u5148\u884c\u7f51\u4e0a\u4e86\u89e3\u4e0b\uff0c\u53e6\u5916\u6211\u529b\u6c42\u628a\u6bcf\u671f\u5206\u5272\u7684\u5f88\u7ec6+  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle",
            "title": "\u4f7f\u7528Django\u521b\u5efa\u7f51\u7ad9"
        },
        {
            "location": "/1.3/#django_1",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528pip\u5b89\u88c5  \u8fd9\u6837\u5b89\u88c5\u7684\u662f\u6700\u65b0\u7248\u672c1.11.3  pip install Django",
            "title": "\u5b89\u88c5Django"
        },
        {
            "location": "/1.3/#_1",
            "text": ">>> import django\n>>> print(django.get_version())\n1.11   \u7531\u4e8e\u6211\u8f83\u65e9\u65f6\u95f4\u5199\u7684\u7f51\u7ad9\uff0c\u7248\u672c\u4e3a1.10.5\uff0c\u4e0d\u5f71\u54cd\u5b9e\u9645\u4f7f\u7528\uff0c\u5927\u5bb6\u53ef\u5b89\u88c5\u6700\u65b0\u7248\u672c",
            "title": "\u9a8c\u8bc1\u5b89\u88c5"
        },
        {
            "location": "/1.3/#oracle",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle\u7528\u6237\u6765\u521b\u5efa\u548c\u7ef4\u62a4\u6211\u4eec\u7684\u76d1\u63a7\u7cfb\u7edf,\u8be5\u7528\u6237\u8bf7\u4e8b\u5148\u521b\u5efa  [root@asensvr-oms ~]# useadd oracle\n[root@asensvr-oms ~]# passwd oracle",
            "title": "\u521b\u5efaoracle\u7528\u6237"
        },
        {
            "location": "/1.3/#project",
            "text": "Django\u5efa\u7acb\u7f51\u7ad9\u9700\u8981\u9996\u5148\u521b\u5efa\u4e00\u4e2aproject\uff0c\u7136\u540e\u5efa\u7acb\u4e00\u4e2aapp(\u5373\u7f51\u7ad9)   \u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle\u5bb6\u76ee\u5f55\u5b58\u653e\u4f7f\u7528\u5230\u7684\u6587\u4ef6  [oracle@asensvr-oms ~]$ cd ~\n[oracle@asensvr-oms ~]$ django-admin startproject mysite  \u521b\u5efa\u5b8cproject\u540e\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b  mysite/\n    manage.py\n    mysite/\n        __init__.py\n        settings.py\n        urls.py\n        wsgi.py   manage.py\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u5de5\u5177\u7528\u6237\u548cdjango\u8fdb\u884c\u4ea4\u4e92\uff0c\u540e\u7eed\u521b\u5efaapp\uff0c\u540c\u6b65\u6570\u636e\u5e93\u7b49\u4f1a\u7528\u5230   mysite/ init .py \u662f\u4e00\u4e2a\u7a7a\u767d\u6587\u4ef6\uff0c\u73b0\u9636\u6bb5\u6211\u4eec\u65e0\u9700\u7406\u4f1a\uff0c\u4fdd\u7559\u5373\u53ef   mysite/settings.py:\u662fdjango\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u975e\u5e38\u91cd\u8981\uff0c\u540e\u9762\u4f1a\u4e13\u95e8\u4ecb\u7ecd   mysite/urls.py:\u4e3aurl\u6587\u4ef6   mysite/wsgi.py \u5728\u6211\u4eec\u90e8\u7f72web\u670d\u52a1\u5668\u7684\u65f6\u5019\u7528\u5230",
            "title": "\u5efa\u7acbproject"
        },
        {
            "location": "/1.3/#app",
            "text": "\u8fdb\u5165 manage.py\u7684\u76ee\u5f55\u6267\u884c  cd  ~/mysite\npython manage.py startapp monitor  \u521b\u5efa\u5b8capp\u540e\u4f1a\u5728mysite\u76ee\u5f55\u65b0\u5efa\u4e2amonitor\u76ee\u5f55\uff0c\u7ed3\u6784\u5982\u4e0b  monitor/\n    __init__.py\n    admin.py\n    apps.py\n    migrations/\n        __init__.py\n    models.py\n    tests.py\n    views.py\n    urls.py (\u73b0\u5728\u6ca1\u6709\uff0c\u540e\u7eed\u6dfb\u52a0\u7684)   admin.py\u91cc\u9762\u4fdd\u5b58\u7684\u662f\u9700\u8981\u540e\u53f0\u7ba1\u7406\u7684\u8868\uff0c\u540e\u9762\u4f1a\u6709\u4ecb\u7ecd   apps.py\u4fdd\u5b58app\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u6682\u65f6\u7528\u4e0d\u5230   models.py\u91cc\u9762\u4fdd\u5b58\u7684\u662f\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8868\u7684\u5b9a\u4e49   tests.py\u91cc\u9762\u5199\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u76ee\u524d\u6211\u6ca1\u7528\u5230\u8fc7   views.py\u5b9a\u4e49\u7684\u662f\u540e\u7aef\u5904\u7406\u7a0b\u5e8f\uff0c\u540e\u9762\u4f1a\u4ecb\u7ecd   urls.py:\u4e3aurl\u6587\u4ef6   migrations\u6587\u4ef6\u5939\u4e3a\u540c\u6b65\u6570\u636e\u8868\u4e13\u7528\u6587\u4ef6\u5939\uff0c\u975e\u5e38\u91cd\u8981\uff0c\u540e\u9762\u4f1a\u8bf4",
            "title": "\u521b\u5efaapp"
        },
        {
            "location": "/1.3/#_2",
            "text": "\u6211\u4eec\u9700\u8981\u7f16\u8f91 ~/mysite/mysite/settings.py\u6587\u4ef6  \u8bbe\u5b9a\u5141\u8bb8\u8bbf\u95ee\u7684\u4e3b\u673a  \u5982\u6709\u5176\u4ed6\u4e3b\u673a\u9700\u8981\u8bbf\u95ee\uff0c\u9700\u4e00\u4e2a\u4e2a\u6dfb\u52a0  ALLOWED_HOSTS = ['10.65.202.218','10.65.5.189']  \u6dfb\u52a0monitor app\u5e94\u7528  INSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'monitor',\n]  \u914d\u7f6e\u8fde\u63a5MySQL\u6570\u636e\u5e93  \u5220\u9664\u539f\u6709\u7684sqlite\u6570\u636e\u5e93\u8fde\u63a5  DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'oracle',\n        'USER': 'username',\n        'PASSWORD': 'password',\n        'HOST': 'localhost',\n        'PORT': '',\n        'OPTIONS': {\n            'read_default_file': '/etc/my.cnf',\n        },\n    }\n}  \u66f4\u6539\u65f6\u533a  TIME_ZONE = 'Asia/Shanghai'  \u8bbe\u7f6e\u9759\u6001\u6587\u4ef6\u4f4d\u7f6e  \u8fd9\u91cc\u653e\u7f6e\u9759\u6001\u6587\u4ef6\uff0c\u5982\u56fe\u7247,css\u6587\u4ef6\u7b49  \u76ee\u5f55\u9700\u63d0\u524d\u5efa\u7acb  STATIC_ROOT='/home/mysite/mysite/monitor/static/'",
            "title": "\u914d\u7f6e\u6587\u4ef6\u8bbe\u5b9a"
        },
        {
            "location": "/1.3/#_3",
            "text": "\u901a\u8fc7\u4e0a\u9762\u7684\u914d\u7f6e\u63a5\u4e0b\u6765\u6211\u4eec\u540c\u6b65\u6570\u636e\uff0c\u8ba9django\u7684\u4e00\u4e9b\u6570\u636e\u653e\u5230\u6211\u4eec\u7684MySQL\u6570\u636e\u5e93\u4e2d  python manage.py migrate",
            "title": "\u540c\u6b65\u6570\u636e"
        },
        {
            "location": "/1.3/#admin",
            "text": "\u8be5\u7528\u6237\u4e3a\u540e\u53f0\u7ba1\u7406\u7684\u7528\u6237  python manage.py createsuperuser   \u53ef\u4ee5\u770b\u5230\u5bc6\u7801\u6709\u590d\u6742\u5ea6\u9700\u6c42",
            "title": "\u521b\u5efaadmin\u8d85\u7ea7\u7528\u6237"
        },
        {
            "location": "/1.3/#_4",
            "text": "\u8fd9\u65f6\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528django\u81ea\u5e26\u7684web\u670d\u52a1\u5668\u6765\u8fd0\u884c  \u8be5\u7a97\u53e3\u4e0d\u53ef\u5173\u95ed\uff0c\u6b63\u5f0f\u73af\u5883\u90e8\u7f72\u540e\u7eed\u8bf4\u660e  \u6ce8\u610f\u5982\u679c\u662f\u975eroot\u7528\u6237\u65e0\u6cd5\u4f7f\u752880\u7aef\u53e3  cd ~/mysite\npython manage.py runserver 0.0.0.0:8081   \u4e4b\u540e\u8fdb\u5165\u7f51\u7ad9  http://10.65.202.218:8081/   \u5f53\u770b\u5230\u4e0b\u56fe\u65f6\u5c31\u8bf4\u660e\u5df2\u7ecf\u914d\u7f6e\u5e76\u542f\u52a8\u6210\u529f  \u5982\u679c\u6709\u9519\uff0c\u8bf7\u6839\u636e\u63d0\u793a\u89e3\u51b3\uff0c\u4e5f\u53ef\u7559\u8a00\u6216\u5728\u540e\u53f0\u8be2\u95ee",
            "title": "\u5f00\u542f\u5f00\u53d1\u73af\u5883"
        },
        {
            "location": "/1.3/#admin_1",
            "text": "\u6211\u4eec\u65e5\u5e38\u7ba1\u7406MySQL\u8868\u9700\u8981\u8fdb\u5165admin\u9875\u9762\u7ba1\u7406  http://10.65.202.218:8081/admin  \n\u4f7f\u7528\u4e0a\u9762\u4f7f\u7528 createsuperuser \u547d\u4ee4\u521b\u5efa\u7684\u7528\u6237\u540d\u5bc6\u7801\u767b\u9646  \u8fdb\u5165\u4e4b\u540e\u53ef\u4f7f\u7528\u8be5\u56fe\u5f62\u5316\u7ba1\u7406\u6570\u636e\u5e93\u8868   \u540e\u7eed\u5728model.py\u6587\u4ef6\u91cc\u5b9a\u4e49\u7684\u8868\u4f1a\u5728\u8fd9\u91cc\u663e\u793a  \u4eca\u5929\u4ecb\u7ecd\u4e86\u4ecb\u7ecd\u4e86\u5982\u4f55\u5b89\u88c5\u914d\u7f6e\u5e76\u521b\u5efa\u7f51\u7ad9\uff0c\u5185\u5bb9\u6709\u70b9\u591a\uff0c\u5927\u5bb6\u53ef\u6309\u7167\u6b65\u9aa4\u4e00\u6b65\u6b65\u6765\uff0c\u6211\u4e5f\u662f\u91cd\u65b0\u642d\u7684\u73af\u5883\u4e00\u6b65\u6b65\u6765\u7684  \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5229\u7528Django\u521b\u5efaMySQL\u6570\u636e\u5e93\u8868",
            "title": "\u6253\u5f00admin\u540e\u53f0"
        },
        {
            "location": "/1.4/",
            "text": "\u4f7f\u7528Django\u7ba1\u7406\u6570\u636e\u5e93\u8868\n\n\n\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Django\u5efa\u7acb\u81ea\u5df1\u7684\u7b2c\u4e00\u4e2a\u7f51\u7ad9\n\n\n\u8fd9\u8282\u8bb2\u5982\u4f55\u5229\u7528Django\u5b9a\u4e49\u4e00\u4e2a\u6570\u636e\u5e93\u7684\u8868\u5e76\u540c\u6b65\u5230MySQL\u4e2d\n\n\n\u6700\u540e\u8bb2\u8ff0\u5982\u4f55\u4fee\u6539\u8868\u7ed3\u6784\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\nORM\u6846\u67b6\n\n\nDjango\u91c7\u7528ORM\u6a21\u578b\u5904\u7406\u6570\u636e\u5e93\u5173\u7cfb\n\n\n\u5bf9\u8c61-\u5173\u7cfb\u6620\u5c04\uff08Object-Relational Mapping\uff0c\u7b80\u79f0ORM\uff09\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u901a\u8fc7\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u6cd5\u6765\u6620\u5c04\u540e\u7aef\u6570\u636e\u5e93\n\n\n\u5728\u540e\u9762\u7684\u5b9e\u4f8b\u4e2d\u4f1a\u6709\u4ecb\u7ecd\uff0c\u5b83\u901a\u8fc7 \u7c7b(class)\u7684\u65b9\u5f0f\u5b9a\u4e49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8868\u7ed3\u6784\n\n\n\u9996\u5148\u770b\u4e0b\u6574\u4f53\u7684\u6d41\u7a0b\n\n\n\n\n\u7f16\u8f91models.py\u6587\u4ef6\n\n\nvim  monitor/models.py\n\n\n\n\n\u6dfb\u52a0oraclelist\u7c7b\n\n\nclass oraclelist(models.Model):\n    ipaddress=models.GenericIPAddressField()\n    username=models.CharField(max_length=100)\n    password=models.CharField(max_length=100)\n    port=models.CharField(max_length=50)\n    tnsname=models.CharField(max_length=100)\n    version=models.CharField(max_length=100)\n    charset=models.CharField(max_length=100)\n    ncharset=models.CharField(max_length=100)\n    hostname=models.CharField(max_length=100)\n    alertpath=models.CharField(max_length=300)\n    content=models.CharField(max_length=300)\n    monitor_type=models.IntegerField(default=1)\n    performance_type=models.IntegerField(default=0)\n    hit_type=models.IntegerField(default=1)\n    def __unicode__(self):\n        return self.tnsname\n    class Meta:\n        app_label='monitor'\n\n\n\n\n\n\nalertpath\u586b\u5199alert\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\n\n\ncontent \u586b\u5199\u8be5\u6570\u636e\u5e93\u7528\u9014\n\n\nmonitor_type,performance_type,hit_type \u6682\u65f6\u4e0d\u4ecb\u7ecd\uff0c\u5927\u5bb6\u7167\u5199\u5c31\u884c\n\n\nunicode\u51fd\u6570\u4e2dtnsname\u8868\u793a\u540e\u53f0\u663e\u793a\u7684\u65f6\u5019\u9ed8\u8ba4\u663e\u793atnsname,Python3\u7528str\u5173\u952e\u5b57\n\n\nmeta \u7c7b\u586b\u5199monitor app\u540d\u79f0\n\n\n\n\nDjango\u680f\u4f4d(Field)\u548c\u539f\u6570\u636e\u5e93\u7684\u5bf9\u7528\u8bf7\u53c2\u8003\u5982\u4e0b\u8fde\u63a5\n\n\nhttps://docs.djangoproject.com/en/1.11/ref/models/fields/\n\n\nhttp://python.usyiyi.cn/translate/django_182/ref/models/fields.html\n\n\n\u540c\u6b65\u6570\u636e\u5e93\n\n\npython manage.py  makemigrations\npython manage.py  migrate\n\n\n\n\n\n\n\u6dfb\u52a0\u8be5\u8868\u81f3admin\u540e\u53f0\n\n\nvim monitor/admin.py\n\nfrom monitor.models import oraclelist\nadmin.site.register(oraclelist)\n\n\n\n\n\u67e5\u770badmin\u540e\u53f0\u662f\u5426\u663e\u793a\n\n\n\n\n\u586b\u5199\u9700\u8981\u8fd0\u7ef4\u7684Oracle\u6570\u636e\u5e93\u4fe1\u606f\n\n\n\n\n\u9a8c\u8bc1\u6dfb\u52a0\n\n\n\n\n\u6dfb\u52a0\u5b8c\u6210\u540e\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u6dfb\u52a0\u7684\u4fe1\u606f\n\n\n\u53ef\u4ee5\u770b\u5230\u663e\u793a\u7684mesarch\u4e3atnsname\uff0c\u4e3a\u5728models.py\u7684oracelist\u7c7b\u4e2dunicode\u5904\u5b9a\u4e49\uff0c\u5927\u5bb6\u53ef\u6839\u636e\u9700\u8981\u81ea\u5df1\u4fee\u6539\n\n\n\u4fee\u6539\u8868\u7ed3\u6784\n\n\n\u4eceDjango\u524d\u51e0\u4e2a\u7248\u672c\u5f00\u59cb\u652f\u6301\u81ea\u52a8\u5904\u7406\u8868\u7ed3\u6784\u7684\u66f4\u6539\uff0c\u5982\u6dfb\u52a0\u5b57\u6bb5\uff0c\u4fee\u6539\u5b57\u6bb5\u7c7b\u578b\u7b49\n\n\n\u6211\u4eec\u53ea\u9700\u5728models.py\u6587\u4ef6\u4e2d\u8fdb\u884c\u76f8\u5e94\u7684\u4fee\u6539\u5373\u53ef\n\n\n\n\n\u6211\u4eec\u8fd9\u91cc\u901a\u8fc7\u5220\u9664hit_type\u680f\u4f4d\u6765\u6a21\u62df\u4e0b\n\n\n\n\n\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u66f4\u6539\u5b8c\u6210\uff0c\u8bb0\u5f97\u8c03\u56de\u6765\n\n\n\u63d0\u793a\uff1a\u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\u66f4\u6539\u8bb0\u5f55\u662f\u8bb0\u5f55\u5728migrations\u76ee\u5f55\u4e0b\uff0c\u6bcf\u6b21\u53d8\u66f4\u90fd\u4f1a\u65b0\u5efa\u4e2a\u6587\u4ef6\u3002\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4eca\u5929\u4ecb\u7ecd\u4e86\u4ecb\u7ecd\u4e86\u5982\u4f55\u5229\u7528Djnago\u521b\u5efa\u4e00\u4e2aMySQL\u7684\u8868\u4ee5\u53ca\u5982\u4f55\u4fee\u6539\u5b83\u3002\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5229\u7528Django\u5efa\u7acb\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u9875\u9762",
            "title": "4.\u4f7f\u7528Django\u7ba1\u7406\u6570\u636e\u5e93\u8868"
        },
        {
            "location": "/1.4/#django",
            "text": "\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Django\u5efa\u7acb\u81ea\u5df1\u7684\u7b2c\u4e00\u4e2a\u7f51\u7ad9  \u8fd9\u8282\u8bb2\u5982\u4f55\u5229\u7528Django\u5b9a\u4e49\u4e00\u4e2a\u6570\u636e\u5e93\u7684\u8868\u5e76\u540c\u6b65\u5230MySQL\u4e2d  \u6700\u540e\u8bb2\u8ff0\u5982\u4f55\u4fee\u6539\u8868\u7ed3\u6784  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  ORM\u6846\u67b6  Django\u91c7\u7528ORM\u6a21\u578b\u5904\u7406\u6570\u636e\u5e93\u5173\u7cfb  \u5bf9\u8c61-\u5173\u7cfb\u6620\u5c04\uff08Object-Relational Mapping\uff0c\u7b80\u79f0ORM\uff09\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u901a\u8fc7\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u6cd5\u6765\u6620\u5c04\u540e\u7aef\u6570\u636e\u5e93  \u5728\u540e\u9762\u7684\u5b9e\u4f8b\u4e2d\u4f1a\u6709\u4ecb\u7ecd\uff0c\u5b83\u901a\u8fc7 \u7c7b(class)\u7684\u65b9\u5f0f\u5b9a\u4e49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8868\u7ed3\u6784  \u9996\u5148\u770b\u4e0b\u6574\u4f53\u7684\u6d41\u7a0b",
            "title": "\u4f7f\u7528Django\u7ba1\u7406\u6570\u636e\u5e93\u8868"
        },
        {
            "location": "/1.4/#modelspy",
            "text": "vim  monitor/models.py  \u6dfb\u52a0oraclelist\u7c7b  class oraclelist(models.Model):\n    ipaddress=models.GenericIPAddressField()\n    username=models.CharField(max_length=100)\n    password=models.CharField(max_length=100)\n    port=models.CharField(max_length=50)\n    tnsname=models.CharField(max_length=100)\n    version=models.CharField(max_length=100)\n    charset=models.CharField(max_length=100)\n    ncharset=models.CharField(max_length=100)\n    hostname=models.CharField(max_length=100)\n    alertpath=models.CharField(max_length=300)\n    content=models.CharField(max_length=300)\n    monitor_type=models.IntegerField(default=1)\n    performance_type=models.IntegerField(default=0)\n    hit_type=models.IntegerField(default=1)\n    def __unicode__(self):\n        return self.tnsname\n    class Meta:\n        app_label='monitor'   alertpath\u586b\u5199alert\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84  content \u586b\u5199\u8be5\u6570\u636e\u5e93\u7528\u9014  monitor_type,performance_type,hit_type \u6682\u65f6\u4e0d\u4ecb\u7ecd\uff0c\u5927\u5bb6\u7167\u5199\u5c31\u884c  unicode\u51fd\u6570\u4e2dtnsname\u8868\u793a\u540e\u53f0\u663e\u793a\u7684\u65f6\u5019\u9ed8\u8ba4\u663e\u793atnsname,Python3\u7528str\u5173\u952e\u5b57  meta \u7c7b\u586b\u5199monitor app\u540d\u79f0   Django\u680f\u4f4d(Field)\u548c\u539f\u6570\u636e\u5e93\u7684\u5bf9\u7528\u8bf7\u53c2\u8003\u5982\u4e0b\u8fde\u63a5  https://docs.djangoproject.com/en/1.11/ref/models/fields/  http://python.usyiyi.cn/translate/django_182/ref/models/fields.html",
            "title": "\u7f16\u8f91models.py\u6587\u4ef6"
        },
        {
            "location": "/1.4/#_1",
            "text": "python manage.py  makemigrations\npython manage.py  migrate",
            "title": "\u540c\u6b65\u6570\u636e\u5e93"
        },
        {
            "location": "/1.4/#admin",
            "text": "vim monitor/admin.py\n\nfrom monitor.models import oraclelist\nadmin.site.register(oraclelist)  \u67e5\u770badmin\u540e\u53f0\u662f\u5426\u663e\u793a",
            "title": "\u6dfb\u52a0\u8be5\u8868\u81f3admin\u540e\u53f0"
        },
        {
            "location": "/1.4/#oracle",
            "text": "\u9a8c\u8bc1\u6dfb\u52a0   \u6dfb\u52a0\u5b8c\u6210\u540e\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u6dfb\u52a0\u7684\u4fe1\u606f  \u53ef\u4ee5\u770b\u5230\u663e\u793a\u7684mesarch\u4e3atnsname\uff0c\u4e3a\u5728models.py\u7684oracelist\u7c7b\u4e2dunicode\u5904\u5b9a\u4e49\uff0c\u5927\u5bb6\u53ef\u6839\u636e\u9700\u8981\u81ea\u5df1\u4fee\u6539",
            "title": "\u586b\u5199\u9700\u8981\u8fd0\u7ef4\u7684Oracle\u6570\u636e\u5e93\u4fe1\u606f"
        },
        {
            "location": "/1.4/#_2",
            "text": "\u4eceDjango\u524d\u51e0\u4e2a\u7248\u672c\u5f00\u59cb\u652f\u6301\u81ea\u52a8\u5904\u7406\u8868\u7ed3\u6784\u7684\u66f4\u6539\uff0c\u5982\u6dfb\u52a0\u5b57\u6bb5\uff0c\u4fee\u6539\u5b57\u6bb5\u7c7b\u578b\u7b49  \u6211\u4eec\u53ea\u9700\u5728models.py\u6587\u4ef6\u4e2d\u8fdb\u884c\u76f8\u5e94\u7684\u4fee\u6539\u5373\u53ef   \u6211\u4eec\u8fd9\u91cc\u901a\u8fc7\u5220\u9664hit_type\u680f\u4f4d\u6765\u6a21\u62df\u4e0b   \u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u66f4\u6539\u5b8c\u6210\uff0c\u8bb0\u5f97\u8c03\u56de\u6765  \u63d0\u793a\uff1a\u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\u66f4\u6539\u8bb0\u5f55\u662f\u8bb0\u5f55\u5728migrations\u76ee\u5f55\u4e0b\uff0c\u6bcf\u6b21\u53d8\u66f4\u90fd\u4f1a\u65b0\u5efa\u4e2a\u6587\u4ef6\u3002  \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4eca\u5929\u4ecb\u7ecd\u4e86\u4ecb\u7ecd\u4e86\u5982\u4f55\u5229\u7528Djnago\u521b\u5efa\u4e00\u4e2aMySQL\u7684\u8868\u4ee5\u53ca\u5982\u4f55\u4fee\u6539\u5b83\u3002  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5229\u7528Django\u5efa\u7acb\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u9875\u9762",
            "title": "\u4fee\u6539\u8868\u7ed3\u6784"
        },
        {
            "location": "/1.5/",
            "text": "\u5f00\u59cb\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u7f51\u9875\n\n\n\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Django\u5efa\u7acb\u81ea\u5df1\u7684\u7b2c\u4e00\u4e2a\u7f51\u7ad9\u4ee5\u53ca\u64cd\u4f5cMySQL\u6570\u636e\u5e93\n\n\n\u8fd9\u8282\u8bb2\u5982\u4f55\u5229\u7528Django\u5efa\u7acb\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u754c\u9762\n\n\n\u9996\u5148\u770b\u4e0b\u5229\u7528Django \u65b0\u5efa\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3\n\n\nPython\u7248\u672c :2.7\n\n\nDjango\u7248\u672c: 1.10.5\n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\nurls.py\u8bbe\u7f6e\n\n\n\u4fee\u6539mysite/urls.py\u6587\u4ef6\n\n\nfrom django.conf.urls import include, url\nfrom django.contrib import admin\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^monitor/', include('monitor.urls')),\n    url(r'^', include('monitor.urls'))\n]\n\n\n\n\n\u8fd9\u91cc\u7684include\u8bbe\u5b9a\u6307\u7684\u662fmonitor \u5e94\u7528\u7684url\u8df3\u8f6c\u5230monitor\u6587\u4ef6\u5939\u4e0b\u9762\u7684urls\u6587\u4ef6\n\n\n\u65b0\u5efa monitor/urls.py\n\n\nfrom django.conf.urls import  url, include\nfrom monitor import views\n\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n]\n\n\n\n\n^\u4ee3\u8868\u4ee5\u540e\u9762\u7684\u5b57\u7b26\u5f00\u5934\n\n\n$\u4ee3\u8868\u4ee5\u524d\u9762\u7684\u5b57\u7b26\u7ed3\u5c3e\n\n\nviews.py\u8bbe\u5b9a\n\n\n\u8fd9\u91cc\u65b0\u5efaindex\u51fd\u6570\u5bf9\u5e94urls.py\u6587\u4ef6\u4e2d\u7684\u5b9a\u4e49\n\n\n\u8fd9\u91cc\u6458\u53d6\u4e00\u90e8\u5206\uff0c\u5176\u4ed6\u7684\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nfrom django.http import HttpRequest\nfrom django import template\nfrom monitor.models import *\n\ndef index(request):\n    result=oraclelist.objects.all().order_by('tnsname')\n    dic={'result':result}\n    return render_to_response('index.html',dic)\n\n\n\n\nDjango \u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u7684\u4fe1\u606f\uff0c\u5982\u4e0a\u9762\u7684objects.all\u65b9\u6cd5\u7528\u6765\u83b7\u53d6\u6240\u6709\u884c\uff0c\u5176\u7ed3\u679c\u4e3a\u5b57\u5178\uff0c\u4e4b\u540e\u5c06\u5176\u91cd\u5b9a\u5411\u5230index.html\u6587\u4ef6\n\n\n\u5176\u4ed6\u53ef\u53c2\u8003\u5982\u4e0b\u94fe\u63a5\n\n\nhttps://docs.djangoproject.com/en/1.11/topics/db/queries/\n\n\n\u5b89\u88c5bootstrap\n\n\n\u524d\u7aef\u7684\u754c\u9762\u6211\u4eec\u91c7\u7528bootstrap\uff0c\u6211\u4eec\u9700\u8981\u4e0b\u8f7dbootstrap\u6587\u4ef6\u653e\u5728static\u76ee\u5f55\u4e2d\n\n\n\u4e0b\u8f7d bootstrap 3\n\n\nhttp://getbootstrap.com/getting-started/#download\n\n\n\u5c06\u6240\u6709\u6587\u4ef6\u5939(css/fonts/js)\u653e\u5728 static\u76ee\u5f55\n\n\n\n\n\u6a21\u677f\u6587\u4ef6\n\n\n\u5728monitor/\u76ee\u5f55\u65b0\u5efa templates\u76ee\u5f55\u7528\u4e8e\u5b58\u653e\u6a21\u677f\u6587\u4ef6\n\n\n[oracle@asensvr-oms monitor]$ mkdir -p ~/mysite/monitor/templates\n\n\n\n\n\u65b0\u5efaindex html\u6587\u4ef6\n\n\nvim index.html\n\n\n    <h1 class='page-header'>\u6570\u636e\u5e93\u6982\u51b5</h1>\n<div class=\"table-responsive\">\n<table class=\"table\" id='table1' class=\"table table-striped\" width='1052'>\n  <thead>\n    <tr>\n      <th>\u6570\u636e\u5e93</th>\n      <th>IP\u5730\u5740</th>\n      <th>\u7aef\u53e3</th>\n      <th>\u4e3b\u673a\u540d</th>\n      <th>\u7248\u672c</th>\n      <th>\u5b57\u7b26\u96c6</th>\n      <th>\u56fd\u5bb6\u5b57\u7b26\u96c6</th>\n      <th>\u65e5\u5fd7\u4f4d\u7f6e</th>\n     <!--   <th>\u7528\u9014</th>    -->\n    </tr>\n  </thead>\n{% for i in result %}\n<tbody>\n            <tr>\n                <td>{{i.tnsname}}</td>\n                <td>{{i.ipaddress}}</td>\n                <td>{{i.port}}</td>\n                <td>{{i.hostname}}</td>\n                <td>{{i.version}}</td>\n                <td>{{i.charset}}</td>\n                <td>{{i.ncharset}}</td>\n                <td>{{i.alertpath}}</td>\n<!--                <td>{{i.content}}</td>   -->\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>\n</div>\n\n\n\n\n\u540c\u6837Django\u4e5f\u63d0\u4f9b\u4e86\u975e\u5e38\u5f3a\u5927\u7684\u6a21\u677f\u529f\u80fd\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c06\u53d8\u91cf\u4f20\u81f3html\u6587\u4ef6\n\n\n\u5927\u5bb6\u53ef\u5148\u7167\u7740\u6211\u7684\u5199\uff0c\u5176\u5b9e\u56fa\u5b9a\u5e38\u7528\u7684\u5c31\u90a3\u4e48\u51e0\u4e2a\uff0c\u53ef\u6839\u636e\u5355\u8bcd\u731c\u51fa\u610f\u601d\n\n\n\u5177\u4f53\u53ef\u53c2\u8003:\n\n\nhttps://docs.djangoproject.com/en/1.11/topics/templates/\n\n\nhttp://www.runoob.com/django/django-template.html\n\n\n\u67e5\u770b\u9875\u9762\n\n\n[oracle@oms mysite]$ python manage.py runserver 0.0.0.0:8081\n\n\n\n\n\n\n\u8fd9\u6837\u6211\u4eec\u5c31\u901a\u8fc7\u7f51\u9875\u7684\u5f62\u5f0f\u5c55\u793a\u4e86\u6570\u636e\u5e93\u7684\u57fa\u672c\u4fe1\u606f\n\u65b9\u4fbf\u6211\u4eec\u65e5\u5e38\u67e5\u770b\u6570\u636e\u5e93\u57fa\u672c\u4fe1\u606f\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4eca\u5929\u4ecb\u7ecd\u4e86\u4ecb\u7ecd\u4e86\u5982\u4f55\u5efa\u7acb\u7b2c\u4e00\u4e2a\u9875\u9762",
            "title": "5.\u5f00\u59cb\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u7f51\u9875"
        },
        {
            "location": "/1.5/#_1",
            "text": "\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Django\u5efa\u7acb\u81ea\u5df1\u7684\u7b2c\u4e00\u4e2a\u7f51\u7ad9\u4ee5\u53ca\u64cd\u4f5cMySQL\u6570\u636e\u5e93  \u8fd9\u8282\u8bb2\u5982\u4f55\u5229\u7528Django\u5efa\u7acb\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u754c\u9762  \u9996\u5148\u770b\u4e0b\u5229\u7528Django \u65b0\u5efa\u9875\u9762\u7684\u6b65\u9aa4   \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3  Python\u7248\u672c :2.7  Django\u7248\u672c: 1.10.5  \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle",
            "title": "\u5f00\u59cb\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u7f51\u9875"
        },
        {
            "location": "/1.5/#urlspy",
            "text": "\u4fee\u6539mysite/urls.py\u6587\u4ef6  from django.conf.urls import include, url\nfrom django.contrib import admin\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^monitor/', include('monitor.urls')),\n    url(r'^', include('monitor.urls'))\n]  \u8fd9\u91cc\u7684include\u8bbe\u5b9a\u6307\u7684\u662fmonitor \u5e94\u7528\u7684url\u8df3\u8f6c\u5230monitor\u6587\u4ef6\u5939\u4e0b\u9762\u7684urls\u6587\u4ef6  \u65b0\u5efa monitor/urls.py  from django.conf.urls import  url, include\nfrom monitor import views\n\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n]  ^\u4ee3\u8868\u4ee5\u540e\u9762\u7684\u5b57\u7b26\u5f00\u5934  $\u4ee3\u8868\u4ee5\u524d\u9762\u7684\u5b57\u7b26\u7ed3\u5c3e",
            "title": "urls.py\u8bbe\u7f6e"
        },
        {
            "location": "/1.5/#viewspy",
            "text": "\u8fd9\u91cc\u65b0\u5efaindex\u51fd\u6570\u5bf9\u5e94urls.py\u6587\u4ef6\u4e2d\u7684\u5b9a\u4e49  \u8fd9\u91cc\u6458\u53d6\u4e00\u90e8\u5206\uff0c\u5176\u4ed6\u7684\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  from django.http import HttpRequest\nfrom django import template\nfrom monitor.models import *\n\ndef index(request):\n    result=oraclelist.objects.all().order_by('tnsname')\n    dic={'result':result}\n    return render_to_response('index.html',dic)  Django \u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u7684\u4fe1\u606f\uff0c\u5982\u4e0a\u9762\u7684objects.all\u65b9\u6cd5\u7528\u6765\u83b7\u53d6\u6240\u6709\u884c\uff0c\u5176\u7ed3\u679c\u4e3a\u5b57\u5178\uff0c\u4e4b\u540e\u5c06\u5176\u91cd\u5b9a\u5411\u5230index.html\u6587\u4ef6  \u5176\u4ed6\u53ef\u53c2\u8003\u5982\u4e0b\u94fe\u63a5  https://docs.djangoproject.com/en/1.11/topics/db/queries/",
            "title": "views.py\u8bbe\u5b9a"
        },
        {
            "location": "/1.5/#bootstrap",
            "text": "\u524d\u7aef\u7684\u754c\u9762\u6211\u4eec\u91c7\u7528bootstrap\uff0c\u6211\u4eec\u9700\u8981\u4e0b\u8f7dbootstrap\u6587\u4ef6\u653e\u5728static\u76ee\u5f55\u4e2d  \u4e0b\u8f7d bootstrap 3  http://getbootstrap.com/getting-started/#download  \u5c06\u6240\u6709\u6587\u4ef6\u5939(css/fonts/js)\u653e\u5728 static\u76ee\u5f55",
            "title": "\u5b89\u88c5bootstrap"
        },
        {
            "location": "/1.5/#_2",
            "text": "\u5728monitor/\u76ee\u5f55\u65b0\u5efa templates\u76ee\u5f55\u7528\u4e8e\u5b58\u653e\u6a21\u677f\u6587\u4ef6  [oracle@asensvr-oms monitor]$ mkdir -p ~/mysite/monitor/templates  \u65b0\u5efaindex html\u6587\u4ef6  vim index.html      <h1 class='page-header'>\u6570\u636e\u5e93\u6982\u51b5</h1>\n<div class=\"table-responsive\">\n<table class=\"table\" id='table1' class=\"table table-striped\" width='1052'>\n  <thead>\n    <tr>\n      <th>\u6570\u636e\u5e93</th>\n      <th>IP\u5730\u5740</th>\n      <th>\u7aef\u53e3</th>\n      <th>\u4e3b\u673a\u540d</th>\n      <th>\u7248\u672c</th>\n      <th>\u5b57\u7b26\u96c6</th>\n      <th>\u56fd\u5bb6\u5b57\u7b26\u96c6</th>\n      <th>\u65e5\u5fd7\u4f4d\u7f6e</th>\n     <!--   <th>\u7528\u9014</th>    -->\n    </tr>\n  </thead>\n{% for i in result %}\n<tbody>\n            <tr>\n                <td>{{i.tnsname}}</td>\n                <td>{{i.ipaddress}}</td>\n                <td>{{i.port}}</td>\n                <td>{{i.hostname}}</td>\n                <td>{{i.version}}</td>\n                <td>{{i.charset}}</td>\n                <td>{{i.ncharset}}</td>\n                <td>{{i.alertpath}}</td>\n<!--                <td>{{i.content}}</td>   -->\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>\n</div>  \u540c\u6837Django\u4e5f\u63d0\u4f9b\u4e86\u975e\u5e38\u5f3a\u5927\u7684\u6a21\u677f\u529f\u80fd\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c06\u53d8\u91cf\u4f20\u81f3html\u6587\u4ef6  \u5927\u5bb6\u53ef\u5148\u7167\u7740\u6211\u7684\u5199\uff0c\u5176\u5b9e\u56fa\u5b9a\u5e38\u7528\u7684\u5c31\u90a3\u4e48\u51e0\u4e2a\uff0c\u53ef\u6839\u636e\u5355\u8bcd\u731c\u51fa\u610f\u601d  \u5177\u4f53\u53ef\u53c2\u8003:  https://docs.djangoproject.com/en/1.11/topics/templates/  http://www.runoob.com/django/django-template.html",
            "title": "\u6a21\u677f\u6587\u4ef6"
        },
        {
            "location": "/1.5/#_3",
            "text": "[oracle@oms mysite]$ python manage.py runserver 0.0.0.0:8081   \u8fd9\u6837\u6211\u4eec\u5c31\u901a\u8fc7\u7f51\u9875\u7684\u5f62\u5f0f\u5c55\u793a\u4e86\u6570\u636e\u5e93\u7684\u57fa\u672c\u4fe1\u606f\n\u65b9\u4fbf\u6211\u4eec\u65e5\u5e38\u67e5\u770b\u6570\u636e\u5e93\u57fa\u672c\u4fe1\u606f  \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4eca\u5929\u4ecb\u7ecd\u4e86\u4ecb\u7ecd\u4e86\u5982\u4f55\u5efa\u7acb\u7b2c\u4e00\u4e2a\u9875\u9762",
            "title": "\u67e5\u770b\u9875\u9762"
        },
        {
            "location": "/2.1/",
            "text": "\u6267\u884cOracle\u547d\u4ee4\u754c\u9762\u7684\u5efa\u7acb\n\n\n\u542c\u8fc7\u524d\u9762\u51e0\u671f\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u4ece\u5982\u4f55\u5b89\u88c5django\u5230\u8fde\u63a5\u6570\u636e\u5e93\u5e76\u5efa\u7acb\u7b2c\u4e00\u4e2a\u9875\u9762\n\n\n\u63a5\u4e0b\u6765\u7684\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u5c06\u65e5\u5e38\u8fd0\u7ef4\u9700\u8981\u7684\u547d\u4ee4\u653e\u5230\u6211\u4eec\u7684\u76d1\u63a7\u7cfb\u7edf\u4e2d\n\n\n\u5373\u5229\u7528Django\u6267\u884cOracle\u547d\u4ee4\u5e76\u5c06\u7ed3\u679c\u5728\u7f51\u7ad9\u4e0a\u663e\u793a\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u4e00\u4e9b\u5176\u4ed6\u6587\u4ef6\u652f\u6301\n\n\njquery\u6587\u4ef6\n\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u8fd8\u9700\u8981jquery\u7684\u4e00\u4e9b\u6a21\u5757,\u9700\u8981\u5c06js\u6587\u4ef6\u653e\u5230static\u76ee\u5f55\u4e0b\n\n\ndashboard.css\u6587\u4ef6\n\n\n\u5728\u540e\u9762\u7684\u6a21\u677f\u6587\u4ef6\u4e2d\u6211\u4eec\u9700\u8981\u7528\u5230dashboard.css\u6587\u4ef6\uff0c\u8fd9\u91cc\u5148\u628a\u5b83\u653e\u5230static/css\u76ee\u5f55\u4e0b\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u7f16\u8f91 monitor/urls.py\n\n\nurlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n]\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u4e0b\u9762\u4e3aoracle_command \u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\ndef oracle_command(request):\n   result=oraclelist.objects.all().order_by('tnsname')\n   dic={'result':result}\n   return render_to_response('oracle_command.html',dic)\n\n\n\n\n\n\n\n\u8be5\u51fd\u6570\u9996\u5148\u5c06oraclelist \u8868\u4e2d\u7684\u6240\u6709\u6570\u636e\u53d6\u51fa\u6765(\u6309tnsname\u6392\u5e8f)\uff0c\u5e76\u628a\u5b83\u4eec\u653e\u5230result\u53d8\u91cf\u4e2d \n\n\n\u7136\u540e\u518d\u5c06result \u548c\u2019result\u2019\u7ed1\u5b9a\u5e76\u8d4b\u503c\u7ed9dic \n\n\n\u6700\u540e\u5c06dic\u4f20\u5165\u5230template\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\ntemplate\u6587\u4ef6\n\n\nDjango\u6a21\u677f\u7cfb\u7edf\u53ef\u4ee5\u4f7f\u6211\u4eec\u7ee7\u627f\u5176\u4ed6\u7684\u6a21\u677f\u5185\u5bb9\uff0c\u8fd9\u6837\u53ef\u4ee5\u7b80\u5316\u6211\u4eec\u6a21\u677f\u6587\u4ef6\u7684\u5185\u5bb9\n\n\n\u9996\u5148\u6211\u4eec\u5efa\u7acbbase.html \u9875\u9762\u4f5c\u4e3a\u57fa\u7840\u6a21\u677f\n\n\n <nav class=\"navbar navbar-inverse navbar-fixed-top\" role=\"navigation\">\n      <div class=\"container-fluid\">\n        <div class=\"navbar-header\">\n          <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">\n            <span class=\"sr-only\">Toggle navigation</span>\n            <span class=\"icon-bar\"></span>\n            <span class=\"icon-bar\"></span>\n            <span class=\"icon-bar\"></span>\n          </button>\n          <a class=\"navbar-brand\" href=\"#\">Oracle\u76d1\u63a7\u7cfb\u7edf</a>\n        </div>\n        <div id=\"navbar\" class=\"navbar-collapse collapse\">\n          <ul class=\"nav navbar-nav navbar-right\">\n            <li><a href=\"#\">Dashboard</a></li>\n            <li><a _blank_=True href=\"/admin\">Settings</a></li>\n            <li><a href=\"#\">Profile</a></li>\n            <li><a href=\"#\">Help</a></li>\n          </ul>\n          <form class=\"navbar-form navbar-right\">\n            <input type=\"text\" class=\"form-control\" placeholder=\"Search...\">\n          </form>\n        </div>\n      </div>\n    </nav>\n\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-sm-3 col-md-2 sidebar\">\n          <ul class=\"nav nav-sidebar\">\n           {% block overview %} <li> <a href=\"/monitor/\">\u9996\u9875</a></li>{%endblock%}\n           {% block admin %} <li> <a target=_blank href=\"/admin\">\u540e\u53f0</a></li>{%endblock%}\n           {% block dbstatus%}<li><a href=\"/monitor/oracle_status\">\u6570\u636e\u5e93\u72b6\u6001</a></li>{%endblock%}\n           {% block command %} <li> <a href=\"/monitor/oracle_command\">Oracle\u547d\u4ee4</a></li> {%endblock%}\n          </ul>\n          <ul class=\"nav nav-sidebar\">\n            <li><a href=\"\">\u6570\u636e\u5e93\u7b49\u5f85\u4e8b\u4ef6</a></li>\n            {%block day%}<li><a href=\"/monitor/oracle_performance/\">\u6570\u636e\u5e93\u6027\u80fd(\u5929/\u5468)</a></li> {%endblock%}\n            <li><a href=\"\">\u6570\u636e\u5e93\u6027\u80fd(\u65f6)</a></li>\n            <li><a href=\"\">\u6570\u636e\u5e93TOPSQL</a></li>\n            <li><a href=\"\">\u6570\u636e\u5e93\u547d\u4e2d\u7387</a></li>\n            <li><a href=\"\">\u6570\u636e\u5e93\u6027\u80fd\u57fa\u7ebf</a></li>\n          </ul>\n          <ul class=\"nav nav-sidebar\">\n            <li><a href=\"\">\u670d\u52a1\u5668\u7a7a\u95f4</a></li>\n           {%block cpu %} <li><a href=\"\">\u670d\u52a1\u5668CPU\u5185\u5b58</a></li> {%endblock%}\n          </ul>\n        </div>\n\n{%block content %} Content{% endblock %}\n</body>\n</html>\n\n\n\n\n\u8fd9\u91cc\u6211\u4eec\u622a\u53d6\u4e00\u90e8\u5206\n\n\n{% block overview %} {%endblock%} \n\n\n\u8868\u793a\u7684\u662f\u5728\u540e\u9762\u7ee7\u627f\u7684\u65f6\u5019\u53ef\u66ff\u6362\u7684\u90e8\u5206\uff0c\u540e\u9762\u6709\u4f8b\u5b50\u4ecb\u7ecd\n\n\n\u8fd9\u4e2a\u9875\u9762\u76ee\u524d\u53ea\u6709Oracle\u547d\u4ee4\u8fd9\u5757\u6709\u5199\u4ee3\u7801\uff0c\u5176\u4ed6\u7684\u540e\u9762\u4f1a\u4ecb\u7ecd\u3002\n\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u4fee\u6539\u4e0a\u8282\u8bb2\u7684index \u9875\u9762\uff0c\u8ba9\u5b83\u4e5f\u7ee7\u627fbase.html\u6587\u4ef6\n\n\n\u5177\u4f53\u89c1\u6e90\u7801\n\n\n\u7136\u540e\u662foracle_command\u754c\u9762\n\n\n{% extends \"base.html\" %}\n\n{% block jscript%}\n<script>\n$(function() {\n    var a= $('#operate');\n    var b= $('#sqlarea');\n    var options= $('#operate option');\n    a.on('change',function() {\n        var result=$('#operate option').filter(':selected').val();\n        names=['check_analyzed_time','check_process_text' ,'check_session_process' ,'check_sqlplan' ,'check_unboundsql']\n        //alert(result)\n        if ($.inArray(result,names)>-1){\n            b.show();\n      } else\n            b.hide();\n       });\n\n})\n\n</script>\n\n\n\n\n{% extends \u201cbase.html\u201d %} \u8868\u793a\u7684\u662f\u7ee7\u627fbase.html\u6a21\u677f\n\n\n\u540e\u9762\u662fjavascript\u811a\u672c\n\n\n\u63a5\u4e0b\u6765\u662f\u4e2a\u8868\u5355(form)\n\n\n{% block content %}\n\n\n<div class=\"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main\" id='content'>\n    <h1 class='page-header'>Oracle\u547d\u4ee4</h1>\n<form  id='usubmit'action=\"/monitor/commandresult/\" method=\"get\">\n<div class=\"form-group\">\n    <label for=\"ipaddress\">\u8bf7\u9009\u62e9\u6570\u636e\u5e93</label>\n    <select class=\"form-control\"  id=\"ipaddress\" name=\"ipaddress\">\n  {% for x in result %}\n      <option value =\"{{ x.ipaddress}}-{{x.tnsname}}\">{{ x.tnsname }} {{x.ipaddress}}</option>\n  {% endfor %}\n     </select>\n</div>\n<div class=\"form-group\">\n    <label for=\"operate\">\u8bf7\u9009\u62e9\u547d\u4ee4</label>\n  <select  class=\"form-control\" id=\"operate\"  name=\"operate\">\n      <option value ='check_datafile_time' selected=\"selected\">\u68c0\u67e5\u6570\u636e\u6587\u4ef6\u521b\u5efa\u65f6\u95f4</option>\n      <option value ='check_analyzed_time'>\u68c0\u67e5\u8868\u7684\u5206\u6790\u65f6\u95f4</option>\n      <option value ='check_segments_size'>\u67e5\u770b\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f</option>\n      <option value ='check_process_text'>\u67e5\u770b\u8fdb\u7a0b\u5bf9\u5e94\u7684SQL\u8bed\u53e5</option>\n      <option value ='check_session_process'>\u67e5\u770b\u4f1a\u8bdd\u5bf9\u5e94\u7684\u8fdb\u7a0b\u53f7</option>\n      <option value ='check_temp_usage'>\u68c0\u67e5\u4e34\u65f6\u8868\u7a7a\u95f4\u4f7f\u7528\u7387</option>\n      <option value ='check_executions'>\u68c0\u67e5\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5</option>\n      <option value ='check_unboundsql'>\u68c0\u67e5\u672a\u7ed1\u5b9a\u8bed\u53e5</option>\n      <option value ='check_session_count'>\u68c0\u67e5Session\u6570\u91cf</option>\n     </select>\n</div>\n\n<div id='sqlarea'  class=\"form-group\" hidden>\n    <label for=\"sql22\">\u8bf7\u8f93\u5165\u76f8\u5173\u6587\u672c</label>\n    <textarea class=\"form-control\" name='sql' id='sql1' rows=1 ></textarea>\n</div>\n\n<button type=\"submit\"  class=\"btn btn-primary\" value=\"OK\">\u786e\u5b9a</button>\n</form>\n\n</div>\n\n\n\n{% endblock %}\n\n\n\n\n\u8be5\u8868\u5355\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206 \n\n\n\n\n\n\n\u8bf7\u9009\u62e9\u6570\u636e\u5e93:\u8fd9\u91cc\u5faa\u73af\u83b7\u53d6oraclelist\u8868\u4e2d\u5230\u7684\u6570\u636e\u7136\u540e\u5c06\u5176\u653e\u5230\u4e0b\u62c9\u83dc\u5355\u4e2d \n\n\n\n\n\n\n\u8bf7\u9009\u62e9\u547d\u4ee4:\u8fd9\u91cc\u6211\u4eec\u5c06\u65e5\u5e38\u9700\u8981\u7528\u5230\u7684\u4e00\u4e9b\u547d\u4ee4\u653e\u5230\u4e0b\u62c9\u83dc\u5355\u4e2d \n\n\n\n\n\n\n\u8bf7\u8f93\u5165\u76f8\u5173\u6587:\u8fd9\u91cc\u9700\u8981\u8f93\u5165\u4e00\u4e9b\u4e0a\u9762\u547d\u4ee4\u9700\u8981\u7528\u5230\u53c2\u6570\uff0c\u5728\u4e00\u4e9b\u4e0d\u9700\u8981\u7684\u547d\u4ee4\u4e2d\u662f\u9690\u85cf\u7684\uff0c\u901a\u8fc7\u4e0a\u9762\u7684js\u811a\u672c\u63a7\u5236\uff0c\u5927\u5bb6\u4e00\u770b\u5c31\u660e\u767d\u4e86\n\n\n\n\n\n\n\u6700\u7ec8\u6548\u679c\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\n\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u6267\u884c\u547d\u4ee4\u5e76\u5c06\u7ed3\u679c\u663e\u793a\u5728\u9875\u9762\u4e2d",
            "title": "1.\u6267\u884cOracle\u547d\u4ee4\u754c\u9762\u5efa\u7acb"
        },
        {
            "location": "/2.1/#oracle",
            "text": "\u542c\u8fc7\u524d\u9762\u51e0\u671f\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u4ece\u5982\u4f55\u5b89\u88c5django\u5230\u8fde\u63a5\u6570\u636e\u5e93\u5e76\u5efa\u7acb\u7b2c\u4e00\u4e2a\u9875\u9762  \u63a5\u4e0b\u6765\u7684\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u5c06\u65e5\u5e38\u8fd0\u7ef4\u9700\u8981\u7684\u547d\u4ee4\u653e\u5230\u6211\u4eec\u7684\u76d1\u63a7\u7cfb\u7edf\u4e2d  \u5373\u5229\u7528Django\u6267\u884cOracle\u547d\u4ee4\u5e76\u5c06\u7ed3\u679c\u5728\u7f51\u7ad9\u4e0a\u663e\u793a  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle",
            "title": "\u6267\u884cOracle\u547d\u4ee4\u754c\u9762\u7684\u5efa\u7acb"
        },
        {
            "location": "/2.1/#_1",
            "text": "jquery\u6587\u4ef6  \u63a5\u4e0b\u6765\u6211\u4eec\u8fd8\u9700\u8981jquery\u7684\u4e00\u4e9b\u6a21\u5757,\u9700\u8981\u5c06js\u6587\u4ef6\u653e\u5230static\u76ee\u5f55\u4e0b  dashboard.css\u6587\u4ef6  \u5728\u540e\u9762\u7684\u6a21\u677f\u6587\u4ef6\u4e2d\u6211\u4eec\u9700\u8981\u7528\u5230dashboard.css\u6587\u4ef6\uff0c\u8fd9\u91cc\u5148\u628a\u5b83\u653e\u5230static/css\u76ee\u5f55\u4e0b  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u4e00\u4e9b\u5176\u4ed6\u6587\u4ef6\u652f\u6301"
        },
        {
            "location": "/2.1/#urlspy",
            "text": "\u9996\u5148\u7f16\u8f91 monitor/urls.py  urlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.1/#viewspy",
            "text": "\u4e0b\u9762\u4e3aoracle_command \u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5  def oracle_command(request):\n   result=oraclelist.objects.all().order_by('tnsname')\n   dic={'result':result}\n   return render_to_response('oracle_command.html',dic)   \u8be5\u51fd\u6570\u9996\u5148\u5c06oraclelist \u8868\u4e2d\u7684\u6240\u6709\u6570\u636e\u53d6\u51fa\u6765(\u6309tnsname\u6392\u5e8f)\uff0c\u5e76\u628a\u5b83\u4eec\u653e\u5230result\u53d8\u91cf\u4e2d   \u7136\u540e\u518d\u5c06result \u548c\u2019result\u2019\u7ed1\u5b9a\u5e76\u8d4b\u503c\u7ed9dic   \u6700\u540e\u5c06dic\u4f20\u5165\u5230template\u6a21\u677f\u6587\u4ef6\u4e2d",
            "title": "views.py"
        },
        {
            "location": "/2.1/#template",
            "text": "Django\u6a21\u677f\u7cfb\u7edf\u53ef\u4ee5\u4f7f\u6211\u4eec\u7ee7\u627f\u5176\u4ed6\u7684\u6a21\u677f\u5185\u5bb9\uff0c\u8fd9\u6837\u53ef\u4ee5\u7b80\u5316\u6211\u4eec\u6a21\u677f\u6587\u4ef6\u7684\u5185\u5bb9  \u9996\u5148\u6211\u4eec\u5efa\u7acbbase.html \u9875\u9762\u4f5c\u4e3a\u57fa\u7840\u6a21\u677f   <nav class=\"navbar navbar-inverse navbar-fixed-top\" role=\"navigation\">\n      <div class=\"container-fluid\">\n        <div class=\"navbar-header\">\n          <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">\n            <span class=\"sr-only\">Toggle navigation</span>\n            <span class=\"icon-bar\"></span>\n            <span class=\"icon-bar\"></span>\n            <span class=\"icon-bar\"></span>\n          </button>\n          <a class=\"navbar-brand\" href=\"#\">Oracle\u76d1\u63a7\u7cfb\u7edf</a>\n        </div>\n        <div id=\"navbar\" class=\"navbar-collapse collapse\">\n          <ul class=\"nav navbar-nav navbar-right\">\n            <li><a href=\"#\">Dashboard</a></li>\n            <li><a _blank_=True href=\"/admin\">Settings</a></li>\n            <li><a href=\"#\">Profile</a></li>\n            <li><a href=\"#\">Help</a></li>\n          </ul>\n          <form class=\"navbar-form navbar-right\">\n            <input type=\"text\" class=\"form-control\" placeholder=\"Search...\">\n          </form>\n        </div>\n      </div>\n    </nav>\n\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-sm-3 col-md-2 sidebar\">\n          <ul class=\"nav nav-sidebar\">\n           {% block overview %} <li> <a href=\"/monitor/\">\u9996\u9875</a></li>{%endblock%}\n           {% block admin %} <li> <a target=_blank href=\"/admin\">\u540e\u53f0</a></li>{%endblock%}\n           {% block dbstatus%}<li><a href=\"/monitor/oracle_status\">\u6570\u636e\u5e93\u72b6\u6001</a></li>{%endblock%}\n           {% block command %} <li> <a href=\"/monitor/oracle_command\">Oracle\u547d\u4ee4</a></li> {%endblock%}\n          </ul>\n          <ul class=\"nav nav-sidebar\">\n            <li><a href=\"\">\u6570\u636e\u5e93\u7b49\u5f85\u4e8b\u4ef6</a></li>\n            {%block day%}<li><a href=\"/monitor/oracle_performance/\">\u6570\u636e\u5e93\u6027\u80fd(\u5929/\u5468)</a></li> {%endblock%}\n            <li><a href=\"\">\u6570\u636e\u5e93\u6027\u80fd(\u65f6)</a></li>\n            <li><a href=\"\">\u6570\u636e\u5e93TOPSQL</a></li>\n            <li><a href=\"\">\u6570\u636e\u5e93\u547d\u4e2d\u7387</a></li>\n            <li><a href=\"\">\u6570\u636e\u5e93\u6027\u80fd\u57fa\u7ebf</a></li>\n          </ul>\n          <ul class=\"nav nav-sidebar\">\n            <li><a href=\"\">\u670d\u52a1\u5668\u7a7a\u95f4</a></li>\n           {%block cpu %} <li><a href=\"\">\u670d\u52a1\u5668CPU\u5185\u5b58</a></li> {%endblock%}\n          </ul>\n        </div>\n\n{%block content %} Content{% endblock %}\n</body>\n</html>  \u8fd9\u91cc\u6211\u4eec\u622a\u53d6\u4e00\u90e8\u5206  {% block overview %} {%endblock%}   \u8868\u793a\u7684\u662f\u5728\u540e\u9762\u7ee7\u627f\u7684\u65f6\u5019\u53ef\u66ff\u6362\u7684\u90e8\u5206\uff0c\u540e\u9762\u6709\u4f8b\u5b50\u4ecb\u7ecd  \u8fd9\u4e2a\u9875\u9762\u76ee\u524d\u53ea\u6709Oracle\u547d\u4ee4\u8fd9\u5757\u6709\u5199\u4ee3\u7801\uff0c\u5176\u4ed6\u7684\u540e\u9762\u4f1a\u4ecb\u7ecd\u3002  \u63a5\u4e0b\u6765\u6211\u4eec\u4fee\u6539\u4e0a\u8282\u8bb2\u7684index \u9875\u9762\uff0c\u8ba9\u5b83\u4e5f\u7ee7\u627fbase.html\u6587\u4ef6  \u5177\u4f53\u89c1\u6e90\u7801  \u7136\u540e\u662foracle_command\u754c\u9762  {% extends \"base.html\" %}\n\n{% block jscript%}\n<script>\n$(function() {\n    var a= $('#operate');\n    var b= $('#sqlarea');\n    var options= $('#operate option');\n    a.on('change',function() {\n        var result=$('#operate option').filter(':selected').val();\n        names=['check_analyzed_time','check_process_text' ,'check_session_process' ,'check_sqlplan' ,'check_unboundsql']\n        //alert(result)\n        if ($.inArray(result,names)>-1){\n            b.show();\n      } else\n            b.hide();\n       });\n\n})\n\n</script>  {% extends \u201cbase.html\u201d %} \u8868\u793a\u7684\u662f\u7ee7\u627fbase.html\u6a21\u677f  \u540e\u9762\u662fjavascript\u811a\u672c  \u63a5\u4e0b\u6765\u662f\u4e2a\u8868\u5355(form)  {% block content %}\n\n\n<div class=\"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main\" id='content'>\n    <h1 class='page-header'>Oracle\u547d\u4ee4</h1>\n<form  id='usubmit'action=\"/monitor/commandresult/\" method=\"get\">\n<div class=\"form-group\">\n    <label for=\"ipaddress\">\u8bf7\u9009\u62e9\u6570\u636e\u5e93</label>\n    <select class=\"form-control\"  id=\"ipaddress\" name=\"ipaddress\">\n  {% for x in result %}\n      <option value =\"{{ x.ipaddress}}-{{x.tnsname}}\">{{ x.tnsname }} {{x.ipaddress}}</option>\n  {% endfor %}\n     </select>\n</div>\n<div class=\"form-group\">\n    <label for=\"operate\">\u8bf7\u9009\u62e9\u547d\u4ee4</label>\n  <select  class=\"form-control\" id=\"operate\"  name=\"operate\">\n      <option value ='check_datafile_time' selected=\"selected\">\u68c0\u67e5\u6570\u636e\u6587\u4ef6\u521b\u5efa\u65f6\u95f4</option>\n      <option value ='check_analyzed_time'>\u68c0\u67e5\u8868\u7684\u5206\u6790\u65f6\u95f4</option>\n      <option value ='check_segments_size'>\u67e5\u770b\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f</option>\n      <option value ='check_process_text'>\u67e5\u770b\u8fdb\u7a0b\u5bf9\u5e94\u7684SQL\u8bed\u53e5</option>\n      <option value ='check_session_process'>\u67e5\u770b\u4f1a\u8bdd\u5bf9\u5e94\u7684\u8fdb\u7a0b\u53f7</option>\n      <option value ='check_temp_usage'>\u68c0\u67e5\u4e34\u65f6\u8868\u7a7a\u95f4\u4f7f\u7528\u7387</option>\n      <option value ='check_executions'>\u68c0\u67e5\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5</option>\n      <option value ='check_unboundsql'>\u68c0\u67e5\u672a\u7ed1\u5b9a\u8bed\u53e5</option>\n      <option value ='check_session_count'>\u68c0\u67e5Session\u6570\u91cf</option>\n     </select>\n</div>\n\n<div id='sqlarea'  class=\"form-group\" hidden>\n    <label for=\"sql22\">\u8bf7\u8f93\u5165\u76f8\u5173\u6587\u672c</label>\n    <textarea class=\"form-control\" name='sql' id='sql1' rows=1 ></textarea>\n</div>\n\n<button type=\"submit\"  class=\"btn btn-primary\" value=\"OK\">\u786e\u5b9a</button>\n</form>\n\n</div>\n\n\n\n{% endblock %}  \u8be5\u8868\u5355\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206     \u8bf7\u9009\u62e9\u6570\u636e\u5e93:\u8fd9\u91cc\u5faa\u73af\u83b7\u53d6oraclelist\u8868\u4e2d\u5230\u7684\u6570\u636e\u7136\u540e\u5c06\u5176\u653e\u5230\u4e0b\u62c9\u83dc\u5355\u4e2d     \u8bf7\u9009\u62e9\u547d\u4ee4:\u8fd9\u91cc\u6211\u4eec\u5c06\u65e5\u5e38\u9700\u8981\u7528\u5230\u7684\u4e00\u4e9b\u547d\u4ee4\u653e\u5230\u4e0b\u62c9\u83dc\u5355\u4e2d     \u8bf7\u8f93\u5165\u76f8\u5173\u6587:\u8fd9\u91cc\u9700\u8981\u8f93\u5165\u4e00\u4e9b\u4e0a\u9762\u547d\u4ee4\u9700\u8981\u7528\u5230\u53c2\u6570\uff0c\u5728\u4e00\u4e9b\u4e0d\u9700\u8981\u7684\u547d\u4ee4\u4e2d\u662f\u9690\u85cf\u7684\uff0c\u901a\u8fc7\u4e0a\u9762\u7684js\u811a\u672c\u63a7\u5236\uff0c\u5927\u5bb6\u4e00\u770b\u5c31\u660e\u767d\u4e86",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.1/#_2",
            "text": "http://10.65.202.218:8081/monitor/oracle_command/     \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u6267\u884c\u547d\u4ee4\u5e76\u5c06\u7ed3\u679c\u663e\u793a\u5728\u9875\u9762\u4e2d",
            "title": "\u6700\u7ec8\u6548\u679c"
        },
        {
            "location": "/2.2/",
            "text": "\u83b7\u53d6Oracle\u6570\u636e\u6587\u4ef6\u521b\u5efa\u7684\u65f6\u95f4\n\n\n\u4e0a\u8282\u8bb2\u5230\u5982\u4f55\u5efa\u7acb\u4e00\u4e2aOracle\u547d\u4ee4\u7684\u754c\u9762\n\n\n\u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Django\u83b7\u53d6Oracle\u6570\u636e\u6587\u4ef6\u7684\u5efa\u7acb\u65f6\u95f4\u5e76\u663e\u793a\u51fa\u6765\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u7f16\u8f91 monitor/urls.py\n\n\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]\n\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762 \n\n\ncommandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u9996\u5148import\u540e\u9762\u7528\u5230\u7684\u51fd\u6570\n\n\nfrom monitor.command.getoraclecommandresult import *\n\n\n\n\n\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\ndef commandresult(request):\n    ipaddress  = str(request.GET['ipaddress']).split('-')[0]\n    tnsname=str(request.GET['ipaddress']).split('-')[1]\n    command_content  = str(request.GET['operate'])\n    result=oraclelist.objects.all().order_by('tnsname')\n    for i in result:\n        if i.ipaddress==ipaddress:\n            username =i.username\n            password=i.password\n            port=i.port\n            break\n    if command_content=='check_datafile_time':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            cursor = db.cursor()\n            row=getdatafilecreationtime(cursor)\n            cursor.close()\n            db.close()\n            title='\u6570\u636e\u6587\u4ef6\u521b\u5efa\u65f6\u95f4-'+ipaddress+'-'+tnsname\n            tr=['\u6570\u636e\u6587\u4ef6\u540d\u79f0','\u6587\u4ef6\u5927\u5c0f','\u8868\u7a7a\u95f4','\u81ea\u52a8\u6269\u5c55','\u521b\u5efa\u65f6\u95f4']\n            dic ={'title':title,'tr':tr,'row':row}\n            #return render_to_response('oracle_command_result1.html',dic)\n            html= render_to_string('oracle_command_result_5.html',dic)\n            return HttpResponse(html)\n\n\n\n\n\n\n\n\n\u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5\n\n\n\n\n\n\n\u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_datafile_time\u5219\u6267\u884c\u4e0b\u9762\u8bed\u53e5\n\n\n\n\n\n\n\u8fd9\u91cc\u7684getdatafilecreationtime\u51fd\u6570\u83b7\u53d6Oracle\u6587\u4ef6\u7684\u5efa\u7acb\u65f6\u95f4\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\n\n\n\u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230oracle_command_result_5.html\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\ngetdatafilecreationtime\u51fd\u6570\n\n\n\u8fd9\u91cc\u6211\u4eec\u5f15\u7528getdatafilecreationtime\u51fd\u6570\u6765\u83b7\u53d6Oracle\u6570\u636e\u6587\u4ef6\u7684\u5efa\u7acb\u65f6\u95f4\n\n\n\u5bfc\u5165\u65b9\u6cd5\u89c1\u4e0a\u9762views.py\u6587\u4ef6\u7684\u8bb2\u89e3\n\n\n\u5728monitor\u76ee\u5f55\u4e0b\u5efa\u7acb command\u76ee\u5f55\u7528\u4e8e\u5b58\u653e\u76f8\u5173\u7a0b\u5e8f\n\n\n\u6ce8\u610f:\u8fd9\u91cc\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u540d\u4e3a\ninit\n.py\u7684\u7a7a\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u63d0\u793a\u65e0\u6cd5\u627e\u5230\u51fd\u6570\n\n\ndef getdatafilecreationtime(cursor):\n    fp=open('/home/oracle/mysite/oracle/command/oracle_command/getdatafilecreationtime.sql','r')\n    fp1=fp.read()\n    s=cursor.execute(fp1)\n    fp.close()\n    row=s.fetchall()\n    return row\n\n\n\n\n\ngetdatafilecreationtime.sql\n\n\n\u8fd9\u4e2aSQL\u662f\u67e5\u8be2\u6240\u6709\u6570\u636e\u6587\u4ef6\u7684\u76f8\u5173\u4fe1\u606f\u5e76\u6309\u7167\u65f6\u95f4\u5012\u5e8f\u6392\u5e8f\n\n\nselect a.file_name,\n       a.bytes / 1024 / 1024 Bytes,\n       a.tablespace_name,\n       a.autoextensible,\n       to_char(b.creation_time, 'yyyy-mm-dd') creation_time\n  from dba_data_files a, v$datafile b\n where a.file_id = b.file#\n order by creation_time desc\n\n\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u7528\u5230ajax\u7684\u529f\u80fd,\u5176\u5b9e\u9875\u9762\u8fd8\u662foracle_command.html\u9875\u9762\uff0c\u53ea\u662f\u5c06oracle_command_result_5.html\u9875\u9762\u5d4c\u5165\u4e86oracle_command.html\u9875\u9762\u4e2d\uff0c\u5168\u7a0b\u65e0\u9875\u9762\u8df3\u8f6c\u3002\n\n\noracle_command_result_5.html\n\n\n<div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>\n\n\n\n\n\n\u8be5\u6a21\u677f\u662f\u4e00\u4e2atable \uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762\n\n\n\u5b9e\u9645\u6548\u679c\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6\u8868\u7684\u5206\u6790\u65f6\u95f4\u7136\u540e\u663e\u793a\u51fa\u6765",
            "title": "2.\u83b7\u53d6Oracle\u6570\u636e\u6587\u4ef6\u521b\u5efa\u7684\u65f6\u95f4"
        },
        {
            "location": "/2.2/#oracle",
            "text": "\u4e0a\u8282\u8bb2\u5230\u5982\u4f55\u5efa\u7acb\u4e00\u4e2aOracle\u547d\u4ee4\u7684\u754c\u9762  \u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Django\u83b7\u53d6Oracle\u6570\u636e\u6587\u4ef6\u7684\u5efa\u7acb\u65f6\u95f4\u5e76\u663e\u793a\u51fa\u6765  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u83b7\u53d6Oracle\u6570\u636e\u6587\u4ef6\u521b\u5efa\u7684\u65f6\u95f4"
        },
        {
            "location": "/2.2/#urlspy",
            "text": "\u9996\u5148\u7f16\u8f91 monitor/urls.py  urlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762   commandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.2/#viewspy",
            "text": "\u9996\u5148import\u540e\u9762\u7528\u5230\u7684\u51fd\u6570  from monitor.command.getoraclecommandresult import *  \u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5  def commandresult(request):\n    ipaddress  = str(request.GET['ipaddress']).split('-')[0]\n    tnsname=str(request.GET['ipaddress']).split('-')[1]\n    command_content  = str(request.GET['operate'])\n    result=oraclelist.objects.all().order_by('tnsname')\n    for i in result:\n        if i.ipaddress==ipaddress:\n            username =i.username\n            password=i.password\n            port=i.port\n            break\n    if command_content=='check_datafile_time':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            cursor = db.cursor()\n            row=getdatafilecreationtime(cursor)\n            cursor.close()\n            db.close()\n            title='\u6570\u636e\u6587\u4ef6\u521b\u5efa\u65f6\u95f4-'+ipaddress+'-'+tnsname\n            tr=['\u6570\u636e\u6587\u4ef6\u540d\u79f0','\u6587\u4ef6\u5927\u5c0f','\u8868\u7a7a\u95f4','\u81ea\u52a8\u6269\u5c55','\u521b\u5efa\u65f6\u95f4']\n            dic ={'title':title,'tr':tr,'row':row}\n            #return render_to_response('oracle_command_result1.html',dic)\n            html= render_to_string('oracle_command_result_5.html',dic)\n            return HttpResponse(html)    \u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4    \u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5    \u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_datafile_time\u5219\u6267\u884c\u4e0b\u9762\u8bed\u53e5    \u8fd9\u91cc\u7684getdatafilecreationtime\u51fd\u6570\u83b7\u53d6Oracle\u6587\u4ef6\u7684\u5efa\u7acb\u65f6\u95f4\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801   \u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230oracle_command_result_5.html\u6a21\u677f\u6587\u4ef6\u4e2d   getdatafilecreationtime\u51fd\u6570  \u8fd9\u91cc\u6211\u4eec\u5f15\u7528getdatafilecreationtime\u51fd\u6570\u6765\u83b7\u53d6Oracle\u6570\u636e\u6587\u4ef6\u7684\u5efa\u7acb\u65f6\u95f4  \u5bfc\u5165\u65b9\u6cd5\u89c1\u4e0a\u9762views.py\u6587\u4ef6\u7684\u8bb2\u89e3  \u5728monitor\u76ee\u5f55\u4e0b\u5efa\u7acb command\u76ee\u5f55\u7528\u4e8e\u5b58\u653e\u76f8\u5173\u7a0b\u5e8f  \u6ce8\u610f:\u8fd9\u91cc\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u540d\u4e3a init .py\u7684\u7a7a\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u63d0\u793a\u65e0\u6cd5\u627e\u5230\u51fd\u6570  def getdatafilecreationtime(cursor):\n    fp=open('/home/oracle/mysite/oracle/command/oracle_command/getdatafilecreationtime.sql','r')\n    fp1=fp.read()\n    s=cursor.execute(fp1)\n    fp.close()\n    row=s.fetchall()\n    return row  getdatafilecreationtime.sql  \u8fd9\u4e2aSQL\u662f\u67e5\u8be2\u6240\u6709\u6570\u636e\u6587\u4ef6\u7684\u76f8\u5173\u4fe1\u606f\u5e76\u6309\u7167\u65f6\u95f4\u5012\u5e8f\u6392\u5e8f  select a.file_name,\n       a.bytes / 1024 / 1024 Bytes,\n       a.tablespace_name,\n       a.autoextensible,\n       to_char(b.creation_time, 'yyyy-mm-dd') creation_time\n  from dba_data_files a, v$datafile b\n where a.file_id = b.file#\n order by creation_time desc",
            "title": "views.py"
        },
        {
            "location": "/2.2/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u7528\u5230ajax\u7684\u529f\u80fd,\u5176\u5b9e\u9875\u9762\u8fd8\u662foracle_command.html\u9875\u9762\uff0c\u53ea\u662f\u5c06oracle_command_result_5.html\u9875\u9762\u5d4c\u5165\u4e86oracle_command.html\u9875\u9762\u4e2d\uff0c\u5168\u7a0b\u65e0\u9875\u9762\u8df3\u8f6c\u3002  oracle_command_result_5.html  <div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>  \u8be5\u6a21\u677f\u662f\u4e00\u4e2atable \uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.2/#_1",
            "text": "http://10.65.202.218:8081/monitor/oracle_command/   \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6\u8868\u7684\u5206\u6790\u65f6\u95f4\u7136\u540e\u663e\u793a\u51fa\u6765",
            "title": "\u5b9e\u9645\u6548\u679c"
        },
        {
            "location": "/2.3/",
            "text": "\u83b7\u53d6Oracle\u8868\u7684\u5206\u6790\u65f6\u95f4\n\n\n\u4e0a\u8282\u8bb2\u5230\u5982\u4f55\u5efa\u7acb\u4e00\u4e2aOracle\u547d\u4ee4\u7684\u754c\u9762\uff0c\u5e76\u663e\u793a\u6570\u636e\u5e93\u6587\u4ef6\u7684\u521b\u5efa\u65f6\u95f4\n\n\n\u8fd9\u8282\u8bb2\u5982\u4f55\u67e5\u770b\u6307\u5b9a\u8868\u7684\u5206\u6790\u65f6\u95f4\n\n\n\u6211\u4eec\u5728\u65e5\u5e38SQL\u4f18\u5316\u7684\u8fc7\u7a0b\u4e2d\uff0c\u80af\u5b9a\u8981\u77e5\u9053\u8868\u7684\u7edf\u8ba1\u4fe1\u606f\u662f\u5426\u6b63\u786e\uff0c\u800c\u8fd9\u4e2a\u529f\u80fd\u7684\u8bdd\u5c31\u80fd\u7b80\u5316\u8fd9\u4e2a\u64cd\u4f5c\n\n\n\u6ce8\u610f\uff1a\u4e0d\u652f\u6301\u7d22\u5f15\u7684\u5206\u6790\u65f6\u95f4\uff0c\u591a\u4e2a\u8868\u67e5\u8be2\u8bf7\u4f7f\u7528\u7a7a\u683c\u9694\u5f00\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3\n\n\nPython\u7248\u672c :2.7\n\n\nDjango\u7248\u672c: 1.10.5\n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\n\n\nurlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n   url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762\n\n\ncommandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\n    elif command_content=='check_analyzed_time':\n        table_name1=[]\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            table_name  = str(request.GET['sql'])\n            table_name=table_name.split()\n            for i in table_name:\n                table_name1.append('\\''+str(i).strip().upper()+'\\'')\n            table_name=','.join(table_name1)\n            cursor = db.cursor()\n            row=getanalyzedtime(cursor,table_name)\n            cursor.close()\n            db.close()\n            title='\u8868\u5206\u6790\u7684\u65f6\u95f4-'+ipaddress+'-'+tnsname\n            tr=['OWNER','TABLE_NAME','NUM_ROWS','SAMPLE_SIZE','LAST_ANALYZED']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_5.html',dic)\n\n\n\n\n\n\n\n\n\n\u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5\n\n\n\n\n\n\n\u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_analyzed_time\n\n\n\n\n\n\n\u5219\u4ece\u8f93\u5165\u6587\u672c\u4e2d\u83b7\u53d6\u60f3\u8981\u67e5\u8be2\u7684\u8868\u540d\u5e76\u8fde\u63a5\u8d77\u6765\n\n\n\n\n\n\n\u7136\u540e\u6267\u884c\u51fd\u6570\u83b7\u53d6\u5206\u6790\u65f6\u95f4,\u8fd9\u91cc\u7684getanalyzedtime\u51fd\u6570\u83b7\u53d6Oracle\u8868\u7684\u5206\u6790\u65f6\u95f4\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\n\n\n\n\n\u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230\noracle_command_result_5.html\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\n\n\ngetanalyzedtime\u51fd\u6570\n\n\n\u8fd9\u91cc\u6211\u4eec\u5f15\u7528getanalyzedtime\u51fd\u6570\u6765\u83b7\u53d6Oracle\u8868\u7684\u5206\u6790\u65f6\u95f4,\u5177\u4f53\u770bSQL\u8bed\u53e5\n\n\nmonitor/command/getoraclecommandresult.py\n\n\ndef getanalyzedtime(cursor,table_name):\n   fp1='SELECT owner,table_name,num_rows,sample_size,last_analyzed FROM DBA_TABLES WHERE  TABLE_NAME in ('+table_name+') order by table_name'\n   s=cursor.execute(fp1)\n   row=s.fetchall()\n   return row\n\n\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f9d\u65e7\u4f7f\u7528oracle_command_result_5.html\u6587\u4ef6\u6765\u663e\u793a\n\n\noracle_command_result_5.html\n\n\n<div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>\n\n\n\n\n\n\u8be5\u6a21\u677f\u662f\u4e00\u4e2atable \uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762\n\n\n\u5b9e\u9645\u6548\u679c\n\n\n\u591a\u4e2a\u8868\u4e00\u8d77\u67e5\u8be2\u8bf7\u4f7f\u7528\u7a7a\u683c\u9694\u5f00\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f",
            "title": "3.\u83b7\u53d6Oracle\u8868\u7684\u5206\u6790\u65f6\u95f4"
        },
        {
            "location": "/2.3/#oracle",
            "text": "\u4e0a\u8282\u8bb2\u5230\u5982\u4f55\u5efa\u7acb\u4e00\u4e2aOracle\u547d\u4ee4\u7684\u754c\u9762\uff0c\u5e76\u663e\u793a\u6570\u636e\u5e93\u6587\u4ef6\u7684\u521b\u5efa\u65f6\u95f4  \u8fd9\u8282\u8bb2\u5982\u4f55\u67e5\u770b\u6307\u5b9a\u8868\u7684\u5206\u6790\u65f6\u95f4  \u6211\u4eec\u5728\u65e5\u5e38SQL\u4f18\u5316\u7684\u8fc7\u7a0b\u4e2d\uff0c\u80af\u5b9a\u8981\u77e5\u9053\u8868\u7684\u7edf\u8ba1\u4fe1\u606f\u662f\u5426\u6b63\u786e\uff0c\u800c\u8fd9\u4e2a\u529f\u80fd\u7684\u8bdd\u5c31\u80fd\u7b80\u5316\u8fd9\u4e2a\u64cd\u4f5c  \u6ce8\u610f\uff1a\u4e0d\u652f\u6301\u7d22\u5f15\u7684\u5206\u6790\u65f6\u95f4\uff0c\u591a\u4e2a\u8868\u67e5\u8be2\u8bf7\u4f7f\u7528\u7a7a\u683c\u9694\u5f00  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3  Python\u7248\u672c :2.7  Django\u7248\u672c: 1.10.5  \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u83b7\u53d6Oracle\u8868\u7684\u5206\u6790\u65f6\u95f4"
        },
        {
            "location": "/2.3/#urlspy",
            "text": "\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6  urlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n   url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762  commandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.3/#viewspy",
            "text": "\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5      elif command_content=='check_analyzed_time':\n        table_name1=[]\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            table_name  = str(request.GET['sql'])\n            table_name=table_name.split()\n            for i in table_name:\n                table_name1.append('\\''+str(i).strip().upper()+'\\'')\n            table_name=','.join(table_name1)\n            cursor = db.cursor()\n            row=getanalyzedtime(cursor,table_name)\n            cursor.close()\n            db.close()\n            title='\u8868\u5206\u6790\u7684\u65f6\u95f4-'+ipaddress+'-'+tnsname\n            tr=['OWNER','TABLE_NAME','NUM_ROWS','SAMPLE_SIZE','LAST_ANALYZED']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_5.html',dic)    \u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4    \u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5    \u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_analyzed_time    \u5219\u4ece\u8f93\u5165\u6587\u672c\u4e2d\u83b7\u53d6\u60f3\u8981\u67e5\u8be2\u7684\u8868\u540d\u5e76\u8fde\u63a5\u8d77\u6765    \u7136\u540e\u6267\u884c\u51fd\u6570\u83b7\u53d6\u5206\u6790\u65f6\u95f4,\u8fd9\u91cc\u7684getanalyzedtime\u51fd\u6570\u83b7\u53d6Oracle\u8868\u7684\u5206\u6790\u65f6\u95f4\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801    \u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230\noracle_command_result_5.html\u6a21\u677f\u6587\u4ef6\u4e2d    getanalyzedtime\u51fd\u6570  \u8fd9\u91cc\u6211\u4eec\u5f15\u7528getanalyzedtime\u51fd\u6570\u6765\u83b7\u53d6Oracle\u8868\u7684\u5206\u6790\u65f6\u95f4,\u5177\u4f53\u770bSQL\u8bed\u53e5  monitor/command/getoraclecommandresult.py  def getanalyzedtime(cursor,table_name):\n   fp1='SELECT owner,table_name,num_rows,sample_size,last_analyzed FROM DBA_TABLES WHERE  TABLE_NAME in ('+table_name+') order by table_name'\n   s=cursor.execute(fp1)\n   row=s.fetchall()\n   return row",
            "title": "views.py"
        },
        {
            "location": "/2.3/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f9d\u65e7\u4f7f\u7528oracle_command_result_5.html\u6587\u4ef6\u6765\u663e\u793a  oracle_command_result_5.html  <div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>  \u8be5\u6a21\u677f\u662f\u4e00\u4e2atable \uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.3/#_1",
            "text": "\u591a\u4e2a\u8868\u4e00\u8d77\u67e5\u8be2\u8bf7\u4f7f\u7528\u7a7a\u683c\u9694\u5f00  http://10.65.202.218:8081/monitor/oracle_command/   \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f",
            "title": "\u5b9e\u9645\u6548\u679c"
        },
        {
            "location": "/2.4/",
            "text": "\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f\n\n\n\u6211\u4eec\u5728\u65e5\u5e38Oracle\u7ef4\u62a4\u4e2d\u53ef\u80fd\u9700\u8981\u77e5\u9053\u6570\u636e\u5e93\u54ea\u4e2a\u8868\u5360\u7528\u7684\u7a7a\u95f4\u6700\u5927\n\n\n\u4e0b\u9762\u8fd9\u4e2a\u529f\u80fd\u53ef\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\n\n\nurlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n   url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]\n\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762 \n\n\ncommandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\n    elif command_content=='check_segments_size':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n\n            cursor = db.cursor()\n            row=getsegmentssize(cursor)\n            cursor.close()\n            db.close()\n            title='\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f-'+ipaddress+'-'+tnsname\n            tr=['OWNER','SEGMENTS_NAME','SEGMENTS_TYPE','TABLESPACE_NAME','BYTES/GB']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_5.html',dic)\n\n\n\n\n\n\n\n\n\u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5\n\n\n\n\n\n\n\u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_segments_size\u5219\u6267\u884c\u51fd\u6570getsegmentssize,\u8fd9\u91cc\u7684getsegmentssize\u51fd\u6570\u83b7\u53d6Oracle\u5927\u5c0f\u5927\u4e8e1G\u7684\u6bb5\u5e76\u6309\u5927\u5c0f\u964d\u5e8f\u6392\u5217\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\n\n\n\n\n\u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_5.html\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\n\n\ngetsegmentssize\u51fd\u6570\n\n\n\u8fd9\u91cc\u6211\u4eec\u5f15\u7528getsegmentssize\u51fd\u6570\u6765\u83b7\u53d6Oracle\u5927\u5c0f\u5927\u4e8e1G\u7684\u6bb5\u5e76\u6309\u5927\u5c0f\u964d\u5e8f\u6392\u5217,\u5177\u4f53\u770bSQL\u8bed\u53e5\n\n\nmonitor/command/getoraclecommandresult.py\n\n\ndef getsegmentssize(cursor):\n   fp1='SELECT OWNER,segment_name,SEGMENT_TYPE,TABLESPACE_NAME ,BYTES/1024/1024 FROM DBA_SEGMENTS WHERE BYTES/1024/1024>1024 ORDER BY BYTES DESC'\n   s=cursor.execute(fp1)\n   row=s.fetchall()\n   return row\n\n\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f9d\u65e7\u4f7f\u7528oracle_command_result_5.html\u6587\u4ef6\u6765\u663e\u793a\n\n\noracle_command_result_5.html\n\n\n<div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>\n\n\n\n\n\n\u8be5\u6a21\u677f\u662f\u4e00\u4e2atable \uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762\n\n\n\u5b9e\u9645\u6548\u679c\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fdb\u7a0b\u53f7\u83b7\u53d6\u5bf9\u5e94\u7684SQL\u8bed\u53e5",
            "title": "4.\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f"
        },
        {
            "location": "/2.4/#oracle",
            "text": "\u6211\u4eec\u5728\u65e5\u5e38Oracle\u7ef4\u62a4\u4e2d\u53ef\u80fd\u9700\u8981\u77e5\u9053\u6570\u636e\u5e93\u54ea\u4e2a\u8868\u5360\u7528\u7684\u7a7a\u95f4\u6700\u5927  \u4e0b\u9762\u8fd9\u4e2a\u529f\u80fd\u53ef\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f"
        },
        {
            "location": "/2.4/#urlspy",
            "text": "\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6  urlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n   url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762   commandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.4/#viewspy",
            "text": "\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5      elif command_content=='check_segments_size':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n\n            cursor = db.cursor()\n            row=getsegmentssize(cursor)\n            cursor.close()\n            db.close()\n            title='\u6570\u636e\u5e93\u6bb5\u7684\u5927\u5c0f-'+ipaddress+'-'+tnsname\n            tr=['OWNER','SEGMENTS_NAME','SEGMENTS_TYPE','TABLESPACE_NAME','BYTES/GB']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_5.html',dic)    \u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4    \u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5    \u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_segments_size\u5219\u6267\u884c\u51fd\u6570getsegmentssize,\u8fd9\u91cc\u7684getsegmentssize\u51fd\u6570\u83b7\u53d6Oracle\u5927\u5c0f\u5927\u4e8e1G\u7684\u6bb5\u5e76\u6309\u5927\u5c0f\u964d\u5e8f\u6392\u5217\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801    \u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_5.html\u6a21\u677f\u6587\u4ef6\u4e2d    getsegmentssize\u51fd\u6570  \u8fd9\u91cc\u6211\u4eec\u5f15\u7528getsegmentssize\u51fd\u6570\u6765\u83b7\u53d6Oracle\u5927\u5c0f\u5927\u4e8e1G\u7684\u6bb5\u5e76\u6309\u5927\u5c0f\u964d\u5e8f\u6392\u5217,\u5177\u4f53\u770bSQL\u8bed\u53e5  monitor/command/getoraclecommandresult.py  def getsegmentssize(cursor):\n   fp1='SELECT OWNER,segment_name,SEGMENT_TYPE,TABLESPACE_NAME ,BYTES/1024/1024 FROM DBA_SEGMENTS WHERE BYTES/1024/1024>1024 ORDER BY BYTES DESC'\n   s=cursor.execute(fp1)\n   row=s.fetchall()\n   return row",
            "title": "views.py"
        },
        {
            "location": "/2.4/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f9d\u65e7\u4f7f\u7528oracle_command_result_5.html\u6587\u4ef6\u6765\u663e\u793a  oracle_command_result_5.html  <div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>  \u8be5\u6a21\u677f\u662f\u4e00\u4e2atable \uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.4/#_1",
            "text": "http://10.65.202.218:8081/monitor/oracle_command/   \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fdb\u7a0b\u53f7\u83b7\u53d6\u5bf9\u5e94\u7684SQL\u8bed\u53e5",
            "title": "\u5b9e\u9645\u6548\u679c"
        },
        {
            "location": "/2.5/",
            "text": "\u901a\u8fc7\u8fdb\u7a0b\u53f7\u83b7\u53d6SQL\u8bed\u53e5\n\n\n\u6211\u4eec\u5728\u65e5\u5e38Oracle\u7ef4\u62a4\u4e2d\uff0c\u53ef\u80fd\u6709\u7684\u8fdb\u7a0b\u5360\u7528\u7684CPU\u6216\u8005\u5185\u5b58\u8f83\u9ad8\uff0c\u8fd9\u65f6\u6211\u4eec\u9700\u8981\u77e5\u9053\u5b83\u5bf9\u5e94\u7684SQL\u8bed\u53e5\uff0c\u4e0b\u9762\u8fd9\u4e2a\u529f\u80fd\u53ef\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\n\n\n\u6ce8\u610f\uff1a\u8fdb\u7a0b\u5fc5\u987b\u5904\u4e8erun\u72b6\u6001\u624d\u80fd\u67e5\u5230\uff0c\u591a\u4e2a\u8fdb\u7a0b\u540c\u65f6\u67e5\u8be2\u8bf7\u7528\u7a7a\u683c\u9694\u5f00\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3\n\n\nPython\u7248\u672c :2.7\n\n\nDjango\u7248\u672c: 1.10.5\n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\n\n\nurlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n   url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762\n\n\ncommandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\n    elif command_content=='check_process_text':\n        pid1=[]\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            pid  = str(request.GET['sql'])\n            pid=pid.split()\n            for i in pid:\n                pid1.append('\\''+str(i).strip().upper()+'\\'')\n            pid=','.join(pid1)\n            cursor = db.cursor()\n            row=getprocesstext(cursor,pid)\n            cursor.close()\n            db.close()\n            title='\u6570\u636e\u5e93\u8fdb\u7a0b\u5bf9\u7528\u7684SQL\u8bed\u53e5-'+ipaddress+'-'+tnsname\n            tr=['SPID','SID','HASH_VALUE','SQL_TEXT','LOGON_TIME','PROGRAM']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_6.html',dic)\n\n\n\n\n\n\n\n\n\u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5\n\n\n\n\n\n\n\u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_process_text\u5219\u9996\u5148\u83b7\u53d6\u8fdb\u7a0b\u53f7\u7801(pid)\u5e76\u8fde\u63a5\u8d77\u6765\n\n\n\n\n\n\n\u5728\u6267\u884c\u51fd\u6570getprocesstext\u83b7\u53d6\u76f8\u5173SQL\u4fe1\u606f,\u8fd9\u91cc\u4e4b\u6240\u4ee5\u7528hash_value\u662f\u56e0\u4e3a\u6211\u67099i\u7684\u5e93\n\n\n\n\n\n\n\u8fd9\u91cc\u7684getprocesstext\u51fd\u6570\u83b7\u53d6Oracle \u4fe1\u606f\uff0c\u5305\u62ecSID,HASH_VALUE,LOGON_TIME,PROGRAM\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\n\n\n\n\n\u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230\noracle_command_result_6.html\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\n\n\ngetprocesstext\u51fd\u6570\n\n\n\u8fd9\u91cc\u7684getprocesstext\u51fd\u6570\u83b7\u53d6Oracle \u4fe1\u606f\uff0c\u5305\u62ecSID,HASH_VALUE,LOGON_TIME,PROGRAM\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\nmonitor/command/getoraclecommandresult.py\n\n\ndef getprocesstext(cursor,pid):\n   fp1='select a.spid,b.sid,c.hash_value,substr(c.sql_text, 0, 40),b.logon_time,b.program from v$process a, v$session b, V$SQL c where a.addr = b.paddr and b.sql_hash_value = c.hash_value and a.spid in ('+pid+')'\n   s=cursor.execute(fp1)\n   row=s.fetchall()\n   return row\n\n\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_6.html\u6587\u4ef6\u6765\u663e\u793a\n\n\noracle_command_result_6.html\n\n\n<div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e,f in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n                <td>{{f}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>\n\n\n\n\n\n\u8be5\u6a21\u677f\u662f\u4e00\u4e2atable \uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762\n\n\n\u5b9e\u9645\u6548\u679c\n\n\n\u591a\u4e2a\u8868\u4e00\u8d77\u67e5\u8be2\u8bf7\u4f7f\u7528\u7a7a\u683c\u9694\u5f00\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7\u4f1a\u8bdd\u67e5\u770b\u8fdb\u7a0b\u53f7",
            "title": "5.\u901a\u8fc7\u8fdb\u7a0b\u53f7\u83b7\u53d6SQL\u8bed\u53e5"
        },
        {
            "location": "/2.5/#sql",
            "text": "\u6211\u4eec\u5728\u65e5\u5e38Oracle\u7ef4\u62a4\u4e2d\uff0c\u53ef\u80fd\u6709\u7684\u8fdb\u7a0b\u5360\u7528\u7684CPU\u6216\u8005\u5185\u5b58\u8f83\u9ad8\uff0c\u8fd9\u65f6\u6211\u4eec\u9700\u8981\u77e5\u9053\u5b83\u5bf9\u5e94\u7684SQL\u8bed\u53e5\uff0c\u4e0b\u9762\u8fd9\u4e2a\u529f\u80fd\u53ef\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd  \u6ce8\u610f\uff1a\u8fdb\u7a0b\u5fc5\u987b\u5904\u4e8erun\u72b6\u6001\u624d\u80fd\u67e5\u5230\uff0c\u591a\u4e2a\u8fdb\u7a0b\u540c\u65f6\u67e5\u8be2\u8bf7\u7528\u7a7a\u683c\u9694\u5f00  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3  Python\u7248\u672c :2.7  Django\u7248\u672c: 1.10.5  \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u901a\u8fc7\u8fdb\u7a0b\u53f7\u83b7\u53d6SQL\u8bed\u53e5"
        },
        {
            "location": "/2.5/#urlspy",
            "text": "\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6  urlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n   url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762  commandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.5/#viewspy",
            "text": "\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5      elif command_content=='check_process_text':\n        pid1=[]\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            pid  = str(request.GET['sql'])\n            pid=pid.split()\n            for i in pid:\n                pid1.append('\\''+str(i).strip().upper()+'\\'')\n            pid=','.join(pid1)\n            cursor = db.cursor()\n            row=getprocesstext(cursor,pid)\n            cursor.close()\n            db.close()\n            title='\u6570\u636e\u5e93\u8fdb\u7a0b\u5bf9\u7528\u7684SQL\u8bed\u53e5-'+ipaddress+'-'+tnsname\n            tr=['SPID','SID','HASH_VALUE','SQL_TEXT','LOGON_TIME','PROGRAM']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_6.html',dic)    \u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4    \u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5    \u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_process_text\u5219\u9996\u5148\u83b7\u53d6\u8fdb\u7a0b\u53f7\u7801(pid)\u5e76\u8fde\u63a5\u8d77\u6765    \u5728\u6267\u884c\u51fd\u6570getprocesstext\u83b7\u53d6\u76f8\u5173SQL\u4fe1\u606f,\u8fd9\u91cc\u4e4b\u6240\u4ee5\u7528hash_value\u662f\u56e0\u4e3a\u6211\u67099i\u7684\u5e93    \u8fd9\u91cc\u7684getprocesstext\u51fd\u6570\u83b7\u53d6Oracle \u4fe1\u606f\uff0c\u5305\u62ecSID,HASH_VALUE,LOGON_TIME,PROGRAM\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801    \u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230\noracle_command_result_6.html\u6a21\u677f\u6587\u4ef6\u4e2d    getprocesstext\u51fd\u6570  \u8fd9\u91cc\u7684getprocesstext\u51fd\u6570\u83b7\u53d6Oracle \u4fe1\u606f\uff0c\u5305\u62ecSID,HASH_VALUE,LOGON_TIME,PROGRAM\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801  monitor/command/getoraclecommandresult.py  def getprocesstext(cursor,pid):\n   fp1='select a.spid,b.sid,c.hash_value,substr(c.sql_text, 0, 40),b.logon_time,b.program from v$process a, v$session b, V$SQL c where a.addr = b.paddr and b.sql_hash_value = c.hash_value and a.spid in ('+pid+')'\n   s=cursor.execute(fp1)\n   row=s.fetchall()\n   return row",
            "title": "views.py"
        },
        {
            "location": "/2.5/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_6.html\u6587\u4ef6\u6765\u663e\u793a  oracle_command_result_6.html  <div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e,f in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n                <td>{{f}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>  \u8be5\u6a21\u677f\u662f\u4e00\u4e2atable \uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.5/#_1",
            "text": "\u591a\u4e2a\u8868\u4e00\u8d77\u67e5\u8be2\u8bf7\u4f7f\u7528\u7a7a\u683c\u9694\u5f00  http://10.65.202.218:8081/monitor/oracle_command/   \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7\u4f1a\u8bdd\u67e5\u770b\u8fdb\u7a0b\u53f7",
            "title": "\u5b9e\u9645\u6548\u679c"
        },
        {
            "location": "/2.6/",
            "text": "\u901a\u8fc7\u4f1a\u8bdd\u67e5\u770b\u8fdb\u7a0b\u53f7\n\n\n\u6211\u4eec\u5728\u65e5\u5e38Oracle\u7ef4\u62a4\u4e2d\uff0c\u53ef\u80fd\u6709\u7684\u9047\u5230\u4e00\u4e2a\u4f1a\u8bdd\u5904\u4e8e\u5047\u6b7b\u72b6\u6001\u6216\u8005\u901a\u8fc7\u5e38\u89c4\u547d\u4ee4\u65e0\u6cd5\u6740\u6b7b\uff0c\u8fd9\u65f6\u9700\u8981\u76f4\u63a5\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edfkill\u547d\u4ee4\u6765\u6740\u6b7b\u8fdb\u7a0b\uff0c\u8fd9\u8282\u5c31\u8bb2\u8ff0\u5982\u4f55\u901a\u8fc7SID\u6765\u83b7\u53d6\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fdb\u7a0b\u53f7\u3002\n\n\n\u6ce8\u610f\uff1a\u8be5\u529f\u80fd\u53ea\u652f\u6301\u540c\u65f6\u67e5\u4e00\u4e2a\u8fdb\u7a0b\u53f7\uff0c\u65e0\u8bba\u4f1a\u8bdd\u662f\u5426ACTIVE\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\n\n\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762 \n\n\ncommandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\n    elif command_content=='check_session_process':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            sid  = str(request.GET['sql'])\n            cursor = db.cursor()\n            row=getprocessno(cursor,sid)\n            cursor.close()\n            db.close()\n            title='\u6570\u636e\u5e93\u8fdb\u7a0b\u53f7-'+ipaddress+'-'+tnsname+':'\n            dic ={'title':title,'row':row}\n            return render_to_response('oracle_command_result_1.html',dic)\n\n\n\n\n\n\n\n\n\u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5\n\n\n\n\n\n\n\u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_session_process\n\n\n\n\n\n\n\u5219\u9996\u5148\u83b7\u53d6SID\n\n\n\n\n\n\n\u5728\u6267\u884c\u51fd\u6570getprocessno\u901a\u8fc7SID\u83b7\u53d6\u5bf9\u5e94\u7684\u8fdb\u7a0b\u53f7\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\n\n\n\n\n\u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_1.html\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\n\n\ngetprocessno\u51fd\u6570\n\n\n\u8fd9\u91cc\u7684getprocessno\u51fd\u6570\u901a\u8fc7SID\u83b7\u53d6\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u7a0b\u53f7\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\nmonitor/command/getoraclecommandresult.py\n\n\ndef getprocessno(cursor,sid):\n    fp1='select pro.spid from v$session ses,v$process pro where ses.sid='+sid+' and ses.paddr=pro.addr'\n    s=cursor.execute(fp1)\n    row=s.fetchone()\n    if row is None:\n        return 'None'\n    else:\n        return row[0]\n\n\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_1.html\u6587\u4ef6\u6765\u663e\u793a\n\n\noracle_command_result_1.html\n\n\n<div id='newadd'>\n<h3>{{title}}{{row}}</h3>\n</div>\n\n\n\n\n\u8be5\u6a21\u677f\u5c31\u662f\u4e00\u884c\u6587\u5b57\uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762\n\n\n\u5b9e\u9645\u6548\u679c\n\n\n\u8be5\u529f\u80fd\u53ea\u652f\u6301\u540c\u65f6\u67e5\u4e00\u4e2a\u8fdb\u7a0b\u53f7\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6Oracle\u4e34\u65f6\u6587\u4ef6\u7684\u4f7f\u7528\u7387\u5e76\u5728\u524d\u7aef\u663e\u793a",
            "title": "6.\u901a\u8fc7\u4f1a\u8bdd\u67e5\u770b\u8fdb\u7a0b\u53f7"
        },
        {
            "location": "/2.6/#_1",
            "text": "\u6211\u4eec\u5728\u65e5\u5e38Oracle\u7ef4\u62a4\u4e2d\uff0c\u53ef\u80fd\u6709\u7684\u9047\u5230\u4e00\u4e2a\u4f1a\u8bdd\u5904\u4e8e\u5047\u6b7b\u72b6\u6001\u6216\u8005\u901a\u8fc7\u5e38\u89c4\u547d\u4ee4\u65e0\u6cd5\u6740\u6b7b\uff0c\u8fd9\u65f6\u9700\u8981\u76f4\u63a5\u901a\u8fc7\u64cd\u4f5c\u7cfb\u7edfkill\u547d\u4ee4\u6765\u6740\u6b7b\u8fdb\u7a0b\uff0c\u8fd9\u8282\u5c31\u8bb2\u8ff0\u5982\u4f55\u901a\u8fc7SID\u6765\u83b7\u53d6\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fdb\u7a0b\u53f7\u3002  \u6ce8\u610f\uff1a\u8be5\u529f\u80fd\u53ea\u652f\u6301\u540c\u65f6\u67e5\u4e00\u4e2a\u8fdb\u7a0b\u53f7\uff0c\u65e0\u8bba\u4f1a\u8bdd\u662f\u5426ACTIVE  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u901a\u8fc7\u4f1a\u8bdd\u67e5\u770b\u8fdb\u7a0b\u53f7"
        },
        {
            "location": "/2.6/#urlspy",
            "text": "\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6  urlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762   commandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.6/#viewspy",
            "text": "\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5      elif command_content=='check_session_process':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            sid  = str(request.GET['sql'])\n            cursor = db.cursor()\n            row=getprocessno(cursor,sid)\n            cursor.close()\n            db.close()\n            title='\u6570\u636e\u5e93\u8fdb\u7a0b\u53f7-'+ipaddress+'-'+tnsname+':'\n            dic ={'title':title,'row':row}\n            return render_to_response('oracle_command_result_1.html',dic)    \u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4    \u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5    \u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_session_process    \u5219\u9996\u5148\u83b7\u53d6SID    \u5728\u6267\u884c\u51fd\u6570getprocessno\u901a\u8fc7SID\u83b7\u53d6\u5bf9\u5e94\u7684\u8fdb\u7a0b\u53f7\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801    \u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u8868\u683c\u7684\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_1.html\u6a21\u677f\u6587\u4ef6\u4e2d    getprocessno\u51fd\u6570  \u8fd9\u91cc\u7684getprocessno\u51fd\u6570\u901a\u8fc7SID\u83b7\u53d6\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u7a0b\u53f7\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801  monitor/command/getoraclecommandresult.py  def getprocessno(cursor,sid):\n    fp1='select pro.spid from v$session ses,v$process pro where ses.sid='+sid+' and ses.paddr=pro.addr'\n    s=cursor.execute(fp1)\n    row=s.fetchone()\n    if row is None:\n        return 'None'\n    else:\n        return row[0]",
            "title": "views.py"
        },
        {
            "location": "/2.6/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_1.html\u6587\u4ef6\u6765\u663e\u793a  oracle_command_result_1.html  <div id='newadd'>\n<h3>{{title}}{{row}}</h3>\n</div>  \u8be5\u6a21\u677f\u5c31\u662f\u4e00\u884c\u6587\u5b57\uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.6/#_2",
            "text": "\u8be5\u529f\u80fd\u53ea\u652f\u6301\u540c\u65f6\u67e5\u4e00\u4e2a\u8fdb\u7a0b\u53f7  http://10.65.202.218:8081/monitor/oracle_command/   \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6Oracle\u4e34\u65f6\u6587\u4ef6\u7684\u4f7f\u7528\u7387\u5e76\u5728\u524d\u7aef\u663e\u793a",
            "title": "\u5b9e\u9645\u6548\u679c"
        },
        {
            "location": "/2.7/",
            "text": "\u83b7\u53d6Oracle\u4e34\u65f6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\n\n\n\u6211\u4eec\u5728\u65e5\u5e38Oracle\u7ef4\u62a4\u4e2d\uff0c\u53ef\u80fd\u67d0\u4e2aSQL\u8bed\u53e5\u5f88\u6162\uff0c\u6709\u5927\u91cf\u7684\u6392\u5e8f\u64cd\u4f5c\uff0c\u8fd9\u65f6\u9700\u8981\u786e\u8ba4\u4e0b\u4e34\u65f6\u6587\u4ef6\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u4eca\u5929\u5c31\u8bb2\u5982\u4f55\u76f4\u89c2\u7684\u5728\u524d\u7aef\u663e\u793a\u8be5\u7ed3\u679c\n\n\n\u6ce8\u610f\uff1a\u8be5\u529f\u80fd\u81ea\u52a8\u67e5\u627e\u4e34\u65f6\u8868\u7a7a\u95f4\u540d\u79f0\u5e76\u8ba1\u7b97\u4f7f\u7528\u7387\uff0c\u65e0\u9700\u8f93\u5165temp\u8868\u7a7a\u95f4\u540d\u79f0\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\n\n\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762 \n\n\ncommandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\n    elif command_content=='check_temp_usage':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            cursor = db.cursor()\n            row=gettempusage(cursor)\n            cursor.close()\n            db.close()\n            title=ipaddress+'-'+tnsname+' \u6570\u636e\u5e93\u4e34\u65f6\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\u4e3a: '\n            dic ={'title':title,'row':row}\n            return render_to_response('oracle_command_result_1.html',dic)\n\n\n\n\n\n\n\n\n\u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5\n\n\n\n\n\n\n\u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_temp_usage\n\n\n\n\n\n\n\u5219\u6267\u884c\u51fd\u6570gettempusage\u83b7\u53d6\u4e34\u65f6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\n\n\n\n\n\u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_1.html\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\n\n\ngettempusage\u51fd\u6570\n\n\n\u8fd9\u91cc\u7684ggettempusage\u51fd\u6570\u901a\u4e34\u65f6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\nmonitor/command/getoraclecommandresult.py\n\n\ndef gettempusage(cursor):\n    fp=open('/home/oracle/mysite/monitor/command/oracle_command/gettempusage.sql','r')\n    fp1=fp.read()\n    s=cursor.execute(fp1)\n    fp.close()\n    row=s.fetchone()\n    return row[0]\n\n\n\n\n\ngettempusage.sql\n\n\n\u8fd9\u4e2aSQL\u662f\u67e5\u8be2Oralce\u6570\u636e\u5e93\u7684temp\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\n\n\nselect round ((s.tot_used_blocks/f.total_blocks)*100, 2) as \"percent used\"\n  from ( select sum (used_blocks) tot_used_blocks\n          from v$sort_segment\n         where tablespace_name =\n               ( select tablespace_name\n                  from dba_tablespaces\n                 where contents = 'TEMPORARY')) s,\n       ( select sum (blocks) total_blocks\n          from dba_temp_files\n         where tablespace_name =\n               ( select tablespace_name\n                  from dba_tablespaces\n                 where contents = 'TEMPORARY')) f\n\n\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_1.html\u6587\u4ef6\u6765\u663e\u793a\n\n\noracle_command_result_1.html\n\n\n<div id='newadd'>\n<h3>{{title}}{{row}}</h3>\n</div>\n\n\n\n\n\u8be5\u6a21\u677f\u5c31\u662f\u4e00\u884c\u6587\u5b57\uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762\n\n\n\u5b9e\u9645\u6548\u679c\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6Oracle\u7684\u786c\u89e3\u6790\u72b6\u51b5",
            "title": "7.\u83b7\u53d6Oracle\u4e34\u65f6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387"
        },
        {
            "location": "/2.7/#oracle",
            "text": "\u6211\u4eec\u5728\u65e5\u5e38Oracle\u7ef4\u62a4\u4e2d\uff0c\u53ef\u80fd\u67d0\u4e2aSQL\u8bed\u53e5\u5f88\u6162\uff0c\u6709\u5927\u91cf\u7684\u6392\u5e8f\u64cd\u4f5c\uff0c\u8fd9\u65f6\u9700\u8981\u786e\u8ba4\u4e0b\u4e34\u65f6\u6587\u4ef6\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u4eca\u5929\u5c31\u8bb2\u5982\u4f55\u76f4\u89c2\u7684\u5728\u524d\u7aef\u663e\u793a\u8be5\u7ed3\u679c  \u6ce8\u610f\uff1a\u8be5\u529f\u80fd\u81ea\u52a8\u67e5\u627e\u4e34\u65f6\u8868\u7a7a\u95f4\u540d\u79f0\u5e76\u8ba1\u7b97\u4f7f\u7528\u7387\uff0c\u65e0\u9700\u8f93\u5165temp\u8868\u7a7a\u95f4\u540d\u79f0  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u83b7\u53d6Oracle\u4e34\u65f6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387"
        },
        {
            "location": "/2.7/#urlspy",
            "text": "\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6  urlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762   commandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.7/#viewspy",
            "text": "\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5      elif command_content=='check_temp_usage':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            cursor = db.cursor()\n            row=gettempusage(cursor)\n            cursor.close()\n            db.close()\n            title=ipaddress+'-'+tnsname+' \u6570\u636e\u5e93\u4e34\u65f6\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\u4e3a: '\n            dic ={'title':title,'row':row}\n            return render_to_response('oracle_command_result_1.html',dic)    \u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4    \u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5    \u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_temp_usage    \u5219\u6267\u884c\u51fd\u6570gettempusage\u83b7\u53d6\u4e34\u65f6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801    \u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_1.html\u6a21\u677f\u6587\u4ef6\u4e2d    gettempusage\u51fd\u6570  \u8fd9\u91cc\u7684ggettempusage\u51fd\u6570\u901a\u4e34\u65f6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801  monitor/command/getoraclecommandresult.py  def gettempusage(cursor):\n    fp=open('/home/oracle/mysite/monitor/command/oracle_command/gettempusage.sql','r')\n    fp1=fp.read()\n    s=cursor.execute(fp1)\n    fp.close()\n    row=s.fetchone()\n    return row[0]  gettempusage.sql  \u8fd9\u4e2aSQL\u662f\u67e5\u8be2Oralce\u6570\u636e\u5e93\u7684temp\u8868\u7a7a\u95f4\u4f7f\u7528\u7387  select round ((s.tot_used_blocks/f.total_blocks)*100, 2) as \"percent used\"\n  from ( select sum (used_blocks) tot_used_blocks\n          from v$sort_segment\n         where tablespace_name =\n               ( select tablespace_name\n                  from dba_tablespaces\n                 where contents = 'TEMPORARY')) s,\n       ( select sum (blocks) total_blocks\n          from dba_temp_files\n         where tablespace_name =\n               ( select tablespace_name\n                  from dba_tablespaces\n                 where contents = 'TEMPORARY')) f",
            "title": "views.py"
        },
        {
            "location": "/2.7/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_1.html\u6587\u4ef6\u6765\u663e\u793a  oracle_command_result_1.html  <div id='newadd'>\n<h3>{{title}}{{row}}</h3>\n</div>  \u8be5\u6a21\u677f\u5c31\u662f\u4e00\u884c\u6587\u5b57\uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.7/#_1",
            "text": "http://10.65.202.218:8081/monitor/oracle_command/   \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6Oracle\u7684\u786c\u89e3\u6790\u72b6\u51b5",
            "title": "\u5b9e\u9645\u6548\u679c"
        },
        {
            "location": "/2.8/",
            "text": "\u83b7\u53d6Oracle\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5(\u786c\u89e3\u6790\u72b6\u51b5)\n\n\n\u6211\u4eec\u77e5\u9053\u786c\u89e3\u6790\u662f\u4e00\u4e2a\u975e\u5e38\u8017\u8d44\u6e90\u7684\u52a8\u4f5c\uff0c\u5c24\u5176\u662f\u5728OLTP\u7cfb\u7edf\u4e2d\u5982\u679c\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\u5bfc\u81f4\u786c\u89e3\u6790\u5f88\u4e25\u91cd(\u6bcf\u79d230\u6b21\u4ee5\u4e0a)\uff0c\u6570\u636e\u5e93\u6027\u80fd\u4f1a\u4e25\u91cd\u7684\u4e0b\u964d\uff0c\u8fd9\u65f6\u6211\u4eec\u9700\u8981\u627e\u5230\u76f8\u5e94\u7684\u8bed\u53e5\u6765\u8fdb\u884c\u4f18\u5316\n\n\n\u539f\u7406:\u901a\u8fc7v$sql\u89c6\u56fe\u4e2d\u627e\u51fa\u6240\u6709execute \u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u5e76\u4e14\u524d\u976240\u4e2a\u5b57\u7b26\u76f8\u540c\u7684\u8bed\u53e5\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\n\n\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762\n\n\ncommandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\n    elif command_content=='check_executions':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            cursor = db.cursor()\n            row=getexecutions(cursor)\n            cursor.close()\n            db.close()\n            title='\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u8bed\u53e5-'+ipaddress+'-'+tnsname\n            tr=['SQL\u8bed\u53e5','\u6b21\u6570','\u6a21\u5757']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_3.html',dic)\n\n\n\n\n\n\n\n\n\u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5\n\n\n\n\n\n\n\u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_executions\n\n\n\n\n\n\n\u5219\u6267\u884c\u51fd\u6570getexecutions\u83b7\u53d6v$sql\u89c6\u56fe\u4e2d\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u5e76\u4ee5SQL\u8bed\u53e5\u524d40\u4e2a\u5b57\u7b26\u5206\u7ec4\uff0c\u5e76\u6309\u6570\u91cf\u964d\u5e8f\u6392\u5217\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\n\n\n\n\n\u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_3.html\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\n\n\ncheck_executions\u51fd\u6570\n\n\n\u8fd9\u91cc\u7684check_executions\u51fd\u6570\u83b7\u53d6\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\nmonitor/command/getoraclecommandresult.py\n\n\ndef getexecutions(cursor):\n    fp=open('/home/oracle/mysite/monitor/command/oracle_command/getexecutions.sql','r')\n    fp1=fp.read()\n    s=cursor.execute(fp1)\n    fp.close()\n    row=s.fetchall()\n    return row\n\n\n\n\ngetexecutions.sql\n\n\n\u8fd9\u4e2aSQL\u83b7\u53d6v$sql\u89c6\u56fe\u4e2d\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u5e76\u4ee5SQL\u8bed\u53e5\u524d40\u4e2a\u5b57\u7b26\u5206\u7ec4\uff0c\u5e76\u6309\u6570\u91cf\u964d\u5e8f\u6392\u5217\n\n\nselect substr (sql_text,0, 40), count (*),max(module)\n  from v$sql\n where executions = 1\n group by substr (sql_text,0, 40)\n order by count (*) desc\n\n\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_3.html\u6587\u4ef6\u6765\u663e\u793a\n\n\noracle_command_result_3.html\n\n\n<div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>\n\n\n\n\n\n\u8be5\u6a21\u677f\u662f\u4e00\u4e2a\u8868\u683c\uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762\n\n\n\u5b9e\u9645\u6548\u679c\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\n\n\u4e0a\u9762\u7684\u7ed3\u679c\u7b2c\u4e00\u6761\u663e\u793a\u51fa\u672a\u4f7f\u7528\u53d8\u91cf\u7684\u8bed\u53e5\u67097304\u4e2a\u6761\u76ee\u5728shared pool\u4e2d\uff0c\u9020\u6210\u7a7a\u95f4\u7684\u6d6a\u8d39\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u8fd9\u671f\u8bb2\u8ff0\u4e86\u5982\u4f55\u83b7\u53d6\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u901a\u8fc7\u67e5\u627e\u51fa\u6765\u7684\u8bed\u53e5\u6765\u67e5\u770b\u5176\u5177\u4f53\u6765\u81ea\u54ea\u91cc\u4ec0\u4e48\u7528\u6237\u6267\u884c\u7684",
            "title": "8.\u83b7\u53d6Oracle\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5(\u786c\u89e3\u6790\u72b6\u51b5)"
        },
        {
            "location": "/2.8/#oracle",
            "text": "\u6211\u4eec\u77e5\u9053\u786c\u89e3\u6790\u662f\u4e00\u4e2a\u975e\u5e38\u8017\u8d44\u6e90\u7684\u52a8\u4f5c\uff0c\u5c24\u5176\u662f\u5728OLTP\u7cfb\u7edf\u4e2d\u5982\u679c\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\u5bfc\u81f4\u786c\u89e3\u6790\u5f88\u4e25\u91cd(\u6bcf\u79d230\u6b21\u4ee5\u4e0a)\uff0c\u6570\u636e\u5e93\u6027\u80fd\u4f1a\u4e25\u91cd\u7684\u4e0b\u964d\uff0c\u8fd9\u65f6\u6211\u4eec\u9700\u8981\u627e\u5230\u76f8\u5e94\u7684\u8bed\u53e5\u6765\u8fdb\u884c\u4f18\u5316  \u539f\u7406:\u901a\u8fc7v$sql\u89c6\u56fe\u4e2d\u627e\u51fa\u6240\u6709execute \u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u5e76\u4e14\u524d\u976240\u4e2a\u5b57\u7b26\u76f8\u540c\u7684\u8bed\u53e5  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u83b7\u53d6Oracle\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5(\u786c\u89e3\u6790\u72b6\u51b5)"
        },
        {
            "location": "/2.8/#urlspy",
            "text": "\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6  urlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762  commandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.8/#viewspy",
            "text": "\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5      elif command_content=='check_executions':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            cursor = db.cursor()\n            row=getexecutions(cursor)\n            cursor.close()\n            db.close()\n            title='\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u8bed\u53e5-'+ipaddress+'-'+tnsname\n            tr=['SQL\u8bed\u53e5','\u6b21\u6570','\u6a21\u5757']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_3.html',dic)    \u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4    \u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5    \u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_executions    \u5219\u6267\u884c\u51fd\u6570getexecutions\u83b7\u53d6v$sql\u89c6\u56fe\u4e2d\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u5e76\u4ee5SQL\u8bed\u53e5\u524d40\u4e2a\u5b57\u7b26\u5206\u7ec4\uff0c\u5e76\u6309\u6570\u91cf\u964d\u5e8f\u6392\u5217\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801    \u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_3.html\u6a21\u677f\u6587\u4ef6\u4e2d    check_executions\u51fd\u6570  \u8fd9\u91cc\u7684check_executions\u51fd\u6570\u83b7\u53d6\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801  monitor/command/getoraclecommandresult.py  def getexecutions(cursor):\n    fp=open('/home/oracle/mysite/monitor/command/oracle_command/getexecutions.sql','r')\n    fp1=fp.read()\n    s=cursor.execute(fp1)\n    fp.close()\n    row=s.fetchall()\n    return row  getexecutions.sql  \u8fd9\u4e2aSQL\u83b7\u53d6v$sql\u89c6\u56fe\u4e2d\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u5e76\u4ee5SQL\u8bed\u53e5\u524d40\u4e2a\u5b57\u7b26\u5206\u7ec4\uff0c\u5e76\u6309\u6570\u91cf\u964d\u5e8f\u6392\u5217  select substr (sql_text,0, 40), count (*),max(module)\n  from v$sql\n where executions = 1\n group by substr (sql_text,0, 40)\n order by count (*) desc",
            "title": "views.py"
        },
        {
            "location": "/2.8/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_3.html\u6587\u4ef6\u6765\u663e\u793a  oracle_command_result_3.html  <div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>  \u8be5\u6a21\u677f\u662f\u4e00\u4e2a\u8868\u683c\uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.8/#_1",
            "text": "http://10.65.202.218:8081/monitor/oracle_command/   \u4e0a\u9762\u7684\u7ed3\u679c\u7b2c\u4e00\u6761\u663e\u793a\u51fa\u672a\u4f7f\u7528\u53d8\u91cf\u7684\u8bed\u53e5\u67097304\u4e2a\u6761\u76ee\u5728shared pool\u4e2d\uff0c\u9020\u6210\u7a7a\u95f4\u7684\u6d6a\u8d39  \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u8fd9\u671f\u8bb2\u8ff0\u4e86\u5982\u4f55\u83b7\u53d6\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u901a\u8fc7\u67e5\u627e\u51fa\u6765\u7684\u8bed\u53e5\u6765\u67e5\u770b\u5176\u5177\u4f53\u6765\u81ea\u54ea\u91cc\u4ec0\u4e48\u7528\u6237\u6267\u884c\u7684",
            "title": "\u5b9e\u9645\u6548\u679c"
        },
        {
            "location": "/2.9/",
            "text": "\u68c0\u67e5\u672a\u7ed1\u5b9a\u53d8\u91cf\u7684\u8bed\u53e5(\u786c\u89e3\u6790\u72b6\u51b5)\n\n\n\u4e0a\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6Oracle \u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u800c\u8fd9\u4e9b\u8bed\u53e5\u5f88\u6709\u53ef\u80fd\u662f\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\u5bfc\u81f4\uff0c\u8fd9\u8282\u8bb2\u5982\u4f55\u83b7\u53d6\u5176\u5177\u4f53\u7684\u4fe1\u606f\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3\n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\n\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\n\n\nurlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n   url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]\n\n\n\n\n\noracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762\n\n\ncommandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762\n\n\nviews.py\n\n\n\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5\n\n\n    elif command_content=='check_unboundsql':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            unboundsql  = str(request.GET['sql'])\n            #return HttpResponse(unboundsql)\n            cursor = db.cursor()\n            row=getunboundsql(cursor,unboundsql)\n            cursor.close()\n            db.close()\n            title='\u672a\u7ed1\u5b9a\u53d8\u91cf\u8bed\u53e5-'+ipaddress+'-'+tnsname\n            tr=['SQL\u8bed\u53e5','\u54c8\u5e0c\u503c','\u6a21\u5757','\u7b2c\u4e00\u6b21\u8f7d\u5165\u65f6\u95f4','\u4e0a\u4e00\u6b21\u8f7d\u5165\u65f6\u95f4']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_5.html',dic)\n\n\n\n\n\n\n\n\n\u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4\n\n\n\n\n\n\n\u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5\n\n\n\n\n\n\n\u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_unboundsql\n\n\n\n\n\n\n\u5219\u9996\u5148\u83b7\u53d6\u4e0a\u8282\u4e2d\u67e5\u627e\u5230\u7684\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\n\n\n\n\n\n\n\u7136\u540e\u5c06\u8bed\u53e5\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u5230\u51fd\u6570getunboundsql\u4e2d\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\u7684\u8bed\u53e5\u7684\u76f8\u4fe1\u4fe1\u606f\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\n\n\n\n\n\u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_5.html\u6a21\u677f\u6587\u4ef6\u4e2d\n\n\n\n\n\n\ngetunboundsql\u51fd\u6570\n\n\n\u8fd9\u91cc\u7684getunboundsql\u51fd\u6570\u83b7\u53d6\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801\n\n\nmonitor/command/getoraclecommandresult.py\n\n\ndef getunboundsql(cursor,unboundsql):\n   fp=open('/home/oracle/mysite/monitor/command/oracle_command/getunboundsql.sql','r')\n   fp1=fp.read().strip()+unboundsql+'%\\' order by last_load_time desc'\n   s=cursor.execute(fp1)\n   fp.close()\n   row=s.fetchall()\n   return row\ngetexecutions.sql\n\n\n\n\n\u8fd9\u4e2aSQL\u83b7\u53d6v$sql\u89c6\u56fe\u4e2d\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\u7684\u8bed\u53e5\u60c5\u51b5\n\n\ngetunboundsql.sql\n\n\nselect sql_text, hash_value, module , first_load_time, last_load_time\n from v$sql\nwhere sql_text like '\n\n\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_5.html\u6587\u4ef6\u6765\u663e\u793a\n\n\noracle_command_result_5.html\n\n\n<div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>\n\n\n\n\n\u8be5\u6a21\u677f\u662f\u4e00\u4e2a\u8868\u683c\uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762\n\n\n\u5b9e\u9645\u6548\u679c\n\n\nhttp://10.65.202.218:8081/monitor/oracle_command/\n\n\n\n\n\n\n\u4ece\u4e0a\u9762\u7ed3\u679c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2aselect\u8bed\u53e5\u7684where\u5b50\u53e5\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\n\n\n\u4ece\u6a21\u5757\u4e2d\u53ef\u4ee5\u770b\u5230\u5176\u6765\u81ea\u7684\u54ea\u91cc\uff0c\u8f7d\u5165\u65f6\u95f4\u4e5f\u53ef\u4ee5\u5224\u65ad\u5176\u6267\u884c\u7684\u975e\u5e38\u9891\u7e41\u3002\n\n\n\u6e90\u7801\u5730\u5740\n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u5230\u8fd9\u91cc\u5df2\u7ecf\u8bb2\u4e86\u65e5\u5e38\u8fd0\u7ef4\u4e2d\u9047\u5230\u7684\u60c5\u5f62\uff0c\u5927\u5bb6\u5982\u6709\u5176\u4ed6\u9700\u6c42\uff0c\u57fa\u672c\u4e0a\u90fd\u63d0\u4f9b\u4e86\u6a21\u677f\u4f9b\u4fee\u6539",
            "title": "9.\u68c0\u67e5\u672a\u7ed1\u5b9a\u53d8\u91cf\u7684\u8bed\u53e5(\u786c\u89e3\u6790\u72b6\u51b5)"
        },
        {
            "location": "/2.9/#_1",
            "text": "\u4e0a\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u5982\u4f55\u901a\u8fc7Django\u83b7\u53d6Oracle \u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u800c\u8fd9\u4e9b\u8bed\u53e5\u5f88\u6709\u53ef\u80fd\u662f\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\u5bfc\u81f4\uff0c\u8fd9\u8282\u8bb2\u5982\u4f55\u83b7\u53d6\u5176\u5177\u4f53\u7684\u4fe1\u606f  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3  Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u68c0\u67e5\u672a\u7ed1\u5b9a\u53d8\u91cf\u7684\u8bed\u53e5(\u786c\u89e3\u6790\u72b6\u51b5)"
        },
        {
            "location": "/2.9/#urlspy",
            "text": "\u9996\u5148\u662fmonitor/urls.py\uff0c\u8fd9\u8282\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6  urlpatterns = [\n   url(r'^$', views.index, name='index'),\n   url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n   url(r'^commandresult/$',views.commandresult, name='commandresult'),\n]  oracle_command\u4e3a\u6267\u884cOracle\u547d\u4ee4\u7684\u9875\u9762  commandresult\u4e3a\u6267\u884c\u5b8cOracle\u547d\u4ee4\u663e\u793a\u7ed3\u679c\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/2.9/#viewspy",
            "text": "\u4e0b\u9762\u4e3acommandresult\u5bf9\u5e94\u7684\u51fd\u6570\u5728views.py\u91cc\u9762\u7684\u5199\u6cd5      elif command_content=='check_unboundsql':\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception , e:\n            content= (ipaddress+' is Unreachable,The reason is '+ str(e)).strip()\n            return HttpResponse(content)\n        else:\n            unboundsql  = str(request.GET['sql'])\n            #return HttpResponse(unboundsql)\n            cursor = db.cursor()\n            row=getunboundsql(cursor,unboundsql)\n            cursor.close()\n            db.close()\n            title='\u672a\u7ed1\u5b9a\u53d8\u91cf\u8bed\u53e5-'+ipaddress+'-'+tnsname\n            tr=['SQL\u8bed\u53e5','\u54c8\u5e0c\u503c','\u6a21\u5757','\u7b2c\u4e00\u6b21\u8f7d\u5165\u65f6\u95f4','\u4e0a\u4e00\u6b21\u8f7d\u5165\u65f6\u95f4']\n            dic ={'title':title,'tr':tr,'row':row}\n            return render_to_response('oracle_command_result_5.html',dic)    \u9996\u5148\u83b7\u53d6\u5230\u8868\u5355\u4e2d\u7684\u6570\u636e\uff0c\u5982 ipaddress,tnsname\u4ee5\u53ca\u6267\u884c\u7684\u547d\u4ee4    \u7136\u540e\u901a\u8fc7ipaddress,tnsname\u4eceoraclelist\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u83b7\u5f97\u7528\u6237\u540d\u5bc6\u7801\u7528\u4e8e\u8fde\u63a5    \u518d\u5224\u65ad\u547d\u4ee4\u5185\u5bb9\uff0c\u5982\u679c\u662fcheck_unboundsql    \u5219\u9996\u5148\u83b7\u53d6\u4e0a\u8282\u4e2d\u67e5\u627e\u5230\u7684\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c    \u7136\u540e\u5c06\u8bed\u53e5\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u5230\u51fd\u6570getunboundsql\u4e2d\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\u7684\u8bed\u53e5\u7684\u76f8\u4fe1\u4fe1\u606f\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801    \u6700\u540e\u628a\u9875\u9762\u7684\u6807\u9898\u4ee5\u53ca\u6570\u636e\u653e\u5230dic\u53d8\u91cf\u4e2d\u4f20\u5230 \noracle_command_result_5.html\u6a21\u677f\u6587\u4ef6\u4e2d    getunboundsql\u51fd\u6570  \u8fd9\u91cc\u7684getunboundsql\u51fd\u6570\u83b7\u53d6\u6267\u884c\u6b21\u6570\u7b49\u4e8e\u4e00\u7684\u8bed\u53e5\uff0c\u8be6\u60c5\u770b\u5177\u4f53\u4ee3\u7801  monitor/command/getoraclecommandresult.py  def getunboundsql(cursor,unboundsql):\n   fp=open('/home/oracle/mysite/monitor/command/oracle_command/getunboundsql.sql','r')\n   fp1=fp.read().strip()+unboundsql+'%\\' order by last_load_time desc'\n   s=cursor.execute(fp1)\n   fp.close()\n   row=s.fetchall()\n   return row\ngetexecutions.sql  \u8fd9\u4e2aSQL\u83b7\u53d6v$sql\u89c6\u56fe\u4e2d\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf\u7684\u8bed\u53e5\u60c5\u51b5  getunboundsql.sql  select sql_text, hash_value, module , first_load_time, last_load_time\n from v$sql\nwhere sql_text like '",
            "title": "views.py"
        },
        {
            "location": "/2.9/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_command_result_5.html\u6587\u4ef6\u6765\u663e\u793a  oracle_command_result_5.html  <div id='newadd'>\n<h3>{{title}}</h3>\n<table class=\"table\">\n  <thead>\n    <tr>\n{% for i in tr %}\n        <th>{{i}}</th>\n{%endfor%}\n    </tr>\n  </thead>\n{% for a,b,c,d,e in row %}\n<tbody>\n            <tr>\n                <td>{{a}}</td>\n                <td>{{b}}</td>\n                <td>{{c}}</td>\n                <td>{{d}}</td>\n                <td>{{e}}</td>\n            </tr>\n</tbody>\n{% endfor %}\n</table>\n</div>  \u8be5\u6a21\u677f\u662f\u4e00\u4e2a\u8868\u683c\uff0c\u901a\u8fc7\u5c06\u4f20\u8fc7\u6765\u7684\u53d8\u91cf\u663e\u793a\u5728\u524d\u7aef\u9875\u9762",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/2.9/#_2",
            "text": "http://10.65.202.218:8081/monitor/oracle_command/   \u4ece\u4e0a\u9762\u7ed3\u679c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2aselect\u8bed\u53e5\u7684where\u5b50\u53e5\u672a\u4f7f\u7528\u7ed1\u5b9a\u53d8\u91cf  \u4ece\u6a21\u5757\u4e2d\u53ef\u4ee5\u770b\u5230\u5176\u6765\u81ea\u7684\u54ea\u91cc\uff0c\u8f7d\u5165\u65f6\u95f4\u4e5f\u53ef\u4ee5\u5224\u65ad\u5176\u6267\u884c\u7684\u975e\u5e38\u9891\u7e41\u3002  \u6e90\u7801\u5730\u5740  \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684GitHub\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u5230\u8fd9\u91cc\u5df2\u7ecf\u8bb2\u4e86\u65e5\u5e38\u8fd0\u7ef4\u4e2d\u9047\u5230\u7684\u60c5\u5f62\uff0c\u5927\u5bb6\u5982\u6709\u5176\u4ed6\u9700\u6c42\uff0c\u57fa\u672c\u4e0a\u90fd\u63d0\u4f9b\u4e86\u6a21\u677f\u4f9b\u4fee\u6539",
            "title": "\u5b9e\u9645\u6548\u679c"
        },
        {
            "location": "/3.1/",
            "text": "\u8ba9Django\u8fd0\u884c\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\n\u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u8fd0\u884c\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\n\u8fd9\u4e2a\u4e13\u9898\u4e3b\u8981\u5185\u5bb9\u6709\uff1a\n\n\n\n\n\n\n\u5982\u4f55\u65b0\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4 \n\n\n\n\n\n\n\u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807\u5e76\u5199\u5165\u6570\u636e\u5e93 \n\n\n\n\n\n\n\u5982\u4f55\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u5e93\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u663e\u793a\n\n\n\n\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u4f55\u65f6\u7528\u5230\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\n\u6211\u4eec\u5728\u4f7f\u7528Django\u7684\u8fc7\u7a0b\u4e2d\u662f\u5426\u6709\u8fd9\u6837\u7684\u56f0\u60d1\n\n\n\u6211\u4eec\u5728model\u4e2d\u5b9a\u4e49\u7684\u6570\u636e\u8868\u5982\u4f55\u624d\u80fd\u53d6\u51fa\u6765\u4f9b\u6211\u4eec\u4f7f\u7528\u5462\n\n\n\u662f\u5426\u53ef\u4ee5\u4e0d\u7528\u7b2c\u4e09\u65b9\u6a21\u5757\u5462\n\n\n\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u5728\u81ea\u5b9a\u4e49\u547d\u4ee4\u4e2d\u5f97\u5230\u89e3\u51b3\n\n\n\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u7684\u6700\u5e38\u7528\u7684\u7528\u9014\u4e3a\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528Django model\u4e2d\u5b9a\u4e49\u7684\u6570\u636e\n\n\n\u5c31\u50cf\u524d\u9762\u6267\u884cOracle\u547d\u4ee4\u4e2dview.py\u4e2d\u7684\u8bed\u53e5\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u800c\u4e0d\u9700\u8981\u4f7f\u7528\u989d\u5916\u7684\u7b2c\u4e09\u65b9\u6a21\u5757\n\n\ndef oracle_command(request):\n  result=oraclelist.objects.all().order_by('tnsname')\n  dic={'result':result}\n  return render_to_response('oracle_command.html',dic)\n\n\n\n\n\u5982\u4e0a\u56feresult\u5c31\u662f\u53d6oraclelist\u8868\u4e2d\u7684\u6240\u6709\u6570\u636e\n\n\n\u4f55\u4e3a\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\nDjango\u5185\u7f6e\u63d0\u4f9b\u4e86\u4e00\u4e9b\u529f\u80fd\u5982\u5f00\u542fweb\u670d\u52a1\uff0c\u8fc1\u79fb\u6570\u636e\u5e93\u7b49\u547d\u4ee4\n\n\n\u6211\u4eec\u5728mysite\u76ee\u5f55\u4e0b\u8fd0\u884cpython manage.py\u547d\u4ee4\u4f1a\u8f93\u51faDjango\u63d0\u4f9b\u7684\u5185\u7f6e\u7684\u547d\u4ee4\n\n\n\n\n\u4e0a\u9762\u663e\u793a\u51fa\u7684\u547d\u4ee4\u5373\u4e3a\u5185\u7f6e\u7684\u547d\u4ee4\n\n\n\u800c\u81ea\u5b9a\u4e49\u547d\u4ee4\u5982\u4e0b\u56fe\n\n\n\n\n\u4e0a\u56fe\u5708\u51fa\u6765\u7684hello_world\u5373\u4e3a\u6211\u4eec\u4eca\u5929\u4ecb\u7ecd\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\n\u5982\u4f55\u5efa\u7acb\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\n\u4e0b\u9762\u6211\u4eec\u6765\u8bf4\u5982\u4f55\u4f7fpython manage.py\u547d\u4ee4\u8bc6\u522b\u51fa\u6211\u4eec\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\n\u6839\u636e\u524d\u9762\u7684\u7ae0\u8282\uff0c\u6211\u4eecapp\u7684\u8def\u5f84\u4e3a /home/oracle/mysite/monitor\n\n\n\u4e3b\u8981\u5206\u4e3a2\u6b65\n\n\n1.\u6211\u4eec\u9700\u8981\u5efa\u7acb\u4e24\u4e2a\u76ee\u5f55\n\n\n[oracle@asensvr-oms]mkdir -p /home/oracle/mysite/monitor/management/commands\n\n\n\n\n2.\u518d\u5728\u4e24\u4e2a\u76ee\u5f55\u65b0\u5efainit\u6587\u4ef6,\u5185\u5bb9\u4e3a\u7a7a\n\n\n[oracle@asensvr-oms ]$ touch /home/oracle/mysite/monitor/management/__init__.py\n[oracle@asensvr-oms ]$ touch /home/oracle/mysite/monitor/management/commands/__init__.py\n\n\n\n\n\u5230\u8fd9\u91cc\u6211\u4eec\u5df2\u7ecf\u5b8c\u6210\u4e86\u524d\u7f6e\u7684\u5de5\u4f5c\n\n\n3.\u63a5\u4e0b\u6765\u6211\u4eec\u7f16\u5199\u4e00\u4e2ahello world \u7a0b\u5e8f\u6765\u6d4b\u8bd5\u4e0b\n\n\n\u6ce8\u610f:\u6211\u4eec\u6240\u6709\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4\u9700\u8981\u5168\u90e8\u5728commands\u76ee\u5f55\u4e0b\n\n\n[oracle@asensvr-oms commands]$ vim hello_world.py\n\n\nfrom django.core.management.base import BaseCommand\nfrom django.contrib.contenttypes.models import ContentType\nfrom monitor.models import oraclelist\nclass Command(BaseCommand):\n    def handle(self, *args, **options):\n        print 'hello world'\n\n\n\n\n\u524d\u97622\u884c\u4e3a\u5bfc\u5165\u9700\u8981\u7684\u6a21\u5757 \n\n\n\u7b2c\u4e09\u884c\u4e3a\u5bfc\u5165model\u4e2d\u5b9a\u4e49\u7684oraclelist\u8868 \n\n\n\u4e0b\u97622\u884c\u4e3a\u56fa\u5b9a\u683c\u5f0f\uff0c\u8bf7\u4e0d\u8981\u53d8\u66f4\n\n\n\u6211\u4eec\u7684\u7a0b\u5e8f\u5199\u5728handle\u51fd\u6570\u4e0b\u9762\n\n\n\u8fd0\u884c\u547d\u4ee4\n\n\n\u8fd9\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u7528python manage.py\u547d\u4ee4\u8fd0\u884c\u6211\u4eec\u7684\u547d\u4ee4\u4e86\n\n\n\n\n\u6e90\u7801\u4f4d\u7f6e\n \n\n\n\u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u597d\u4e86\uff0c\u8fd9\u8282\u4ecb\u7ecd\u4e86\u5982\u4f55\u65b0\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\n\u4e0b\u8282\u5c06\u4ecb\u7ecd\u5982\u4f55\u5229\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6307\u6807\u5e76\u4fdd\u5b58\u5728MySQL\u6570\u636e\u5e93\u4e2d",
            "title": "1.\u8ba9Django\u8fd0\u884c\u81ea\u5b9a\u4e49\u547d\u4ee4"
        },
        {
            "location": "/3.1/#django",
            "text": "\u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u8fd0\u884c\u81ea\u5b9a\u4e49\u547d\u4ee4  \u8fd9\u4e2a\u4e13\u9898\u4e3b\u8981\u5185\u5bb9\u6709\uff1a    \u5982\u4f55\u65b0\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4     \u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807\u5e76\u5199\u5165\u6570\u636e\u5e93     \u5982\u4f55\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u5e93\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u663e\u793a    \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle",
            "title": "\u8ba9Django\u8fd0\u884c\u81ea\u5b9a\u4e49\u547d\u4ee4"
        },
        {
            "location": "/3.1/#_1",
            "text": "\u6211\u4eec\u5728\u4f7f\u7528Django\u7684\u8fc7\u7a0b\u4e2d\u662f\u5426\u6709\u8fd9\u6837\u7684\u56f0\u60d1  \u6211\u4eec\u5728model\u4e2d\u5b9a\u4e49\u7684\u6570\u636e\u8868\u5982\u4f55\u624d\u80fd\u53d6\u51fa\u6765\u4f9b\u6211\u4eec\u4f7f\u7528\u5462  \u662f\u5426\u53ef\u4ee5\u4e0d\u7528\u7b2c\u4e09\u65b9\u6a21\u5757\u5462  \u8fd9\u4e9b\u90fd\u53ef\u4ee5\u5728\u81ea\u5b9a\u4e49\u547d\u4ee4\u4e2d\u5f97\u5230\u89e3\u51b3  \u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u7684\u6700\u5e38\u7528\u7684\u7528\u9014\u4e3a\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528Django model\u4e2d\u5b9a\u4e49\u7684\u6570\u636e  \u5c31\u50cf\u524d\u9762\u6267\u884cOracle\u547d\u4ee4\u4e2dview.py\u4e2d\u7684\u8bed\u53e5\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u800c\u4e0d\u9700\u8981\u4f7f\u7528\u989d\u5916\u7684\u7b2c\u4e09\u65b9\u6a21\u5757  def oracle_command(request):\n  result=oraclelist.objects.all().order_by('tnsname')\n  dic={'result':result}\n  return render_to_response('oracle_command.html',dic)  \u5982\u4e0a\u56feresult\u5c31\u662f\u53d6oraclelist\u8868\u4e2d\u7684\u6240\u6709\u6570\u636e",
            "title": "\u4f55\u65f6\u7528\u5230\u81ea\u5b9a\u4e49\u547d\u4ee4"
        },
        {
            "location": "/3.1/#_2",
            "text": "Django\u5185\u7f6e\u63d0\u4f9b\u4e86\u4e00\u4e9b\u529f\u80fd\u5982\u5f00\u542fweb\u670d\u52a1\uff0c\u8fc1\u79fb\u6570\u636e\u5e93\u7b49\u547d\u4ee4  \u6211\u4eec\u5728mysite\u76ee\u5f55\u4e0b\u8fd0\u884cpython manage.py\u547d\u4ee4\u4f1a\u8f93\u51faDjango\u63d0\u4f9b\u7684\u5185\u7f6e\u7684\u547d\u4ee4   \u4e0a\u9762\u663e\u793a\u51fa\u7684\u547d\u4ee4\u5373\u4e3a\u5185\u7f6e\u7684\u547d\u4ee4  \u800c\u81ea\u5b9a\u4e49\u547d\u4ee4\u5982\u4e0b\u56fe   \u4e0a\u56fe\u5708\u51fa\u6765\u7684hello_world\u5373\u4e3a\u6211\u4eec\u4eca\u5929\u4ecb\u7ecd\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4",
            "title": "\u4f55\u4e3a\u81ea\u5b9a\u4e49\u547d\u4ee4"
        },
        {
            "location": "/3.1/#_3",
            "text": "\u4e0b\u9762\u6211\u4eec\u6765\u8bf4\u5982\u4f55\u4f7fpython manage.py\u547d\u4ee4\u8bc6\u522b\u51fa\u6211\u4eec\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4  \u6839\u636e\u524d\u9762\u7684\u7ae0\u8282\uff0c\u6211\u4eecapp\u7684\u8def\u5f84\u4e3a /home/oracle/mysite/monitor  \u4e3b\u8981\u5206\u4e3a2\u6b65  1.\u6211\u4eec\u9700\u8981\u5efa\u7acb\u4e24\u4e2a\u76ee\u5f55  [oracle@asensvr-oms]mkdir -p /home/oracle/mysite/monitor/management/commands  2.\u518d\u5728\u4e24\u4e2a\u76ee\u5f55\u65b0\u5efainit\u6587\u4ef6,\u5185\u5bb9\u4e3a\u7a7a  [oracle@asensvr-oms ]$ touch /home/oracle/mysite/monitor/management/__init__.py\n[oracle@asensvr-oms ]$ touch /home/oracle/mysite/monitor/management/commands/__init__.py  \u5230\u8fd9\u91cc\u6211\u4eec\u5df2\u7ecf\u5b8c\u6210\u4e86\u524d\u7f6e\u7684\u5de5\u4f5c  3.\u63a5\u4e0b\u6765\u6211\u4eec\u7f16\u5199\u4e00\u4e2ahello world \u7a0b\u5e8f\u6765\u6d4b\u8bd5\u4e0b  \u6ce8\u610f:\u6211\u4eec\u6240\u6709\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4\u9700\u8981\u5168\u90e8\u5728commands\u76ee\u5f55\u4e0b  [oracle@asensvr-oms commands]$ vim hello_world.py  from django.core.management.base import BaseCommand\nfrom django.contrib.contenttypes.models import ContentType\nfrom monitor.models import oraclelist\nclass Command(BaseCommand):\n    def handle(self, *args, **options):\n        print 'hello world'  \u524d\u97622\u884c\u4e3a\u5bfc\u5165\u9700\u8981\u7684\u6a21\u5757   \u7b2c\u4e09\u884c\u4e3a\u5bfc\u5165model\u4e2d\u5b9a\u4e49\u7684oraclelist\u8868   \u4e0b\u97622\u884c\u4e3a\u56fa\u5b9a\u683c\u5f0f\uff0c\u8bf7\u4e0d\u8981\u53d8\u66f4  \u6211\u4eec\u7684\u7a0b\u5e8f\u5199\u5728handle\u51fd\u6570\u4e0b\u9762",
            "title": "\u5982\u4f55\u5efa\u7acb\u81ea\u5b9a\u4e49\u547d\u4ee4"
        },
        {
            "location": "/3.1/#_4",
            "text": "\u8fd9\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u7528python manage.py\u547d\u4ee4\u8fd0\u884c\u6211\u4eec\u7684\u547d\u4ee4\u4e86   \u6e90\u7801\u4f4d\u7f6e    \u6e90\u7801\u8bf7\u67e5\u770b\u6211\u7684\u4e3b\u9875  https://github.com/bsbforever/wechat_monitor  \u597d\u4e86\uff0c\u8fd9\u8282\u4ecb\u7ecd\u4e86\u5982\u4f55\u65b0\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u81ea\u5b9a\u4e49\u547d\u4ee4  \u4e0b\u8282\u5c06\u4ecb\u7ecd\u5982\u4f55\u5229\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6307\u6807\u5e76\u4fdd\u5b58\u5728MySQL\u6570\u636e\u5e93\u4e2d",
            "title": "\u8fd0\u884c\u547d\u4ee4"
        },
        {
            "location": "/3.2/",
            "text": "\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807\n\n\n\u8fd9\u4e2a\u4e13\u9898\u4e3b\u8981\u5185\u5bb9\u6709\uff1a\n\n\n\n\n\n\n\u5982\u4f55\u65b0\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4 \n\n\n\n\n\n\n\u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807\u5e76\u5199\u5165\u6570\u636e\u5e93 \n\n\n\n\n\n\n\u5982\u4f55\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u5e93\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u663e\u793a\n\n\n\n\n\n\n\u4e0a\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u5982\u4f55\u65b0\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u547d\u4ee4\n\n\n\u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u4f7f\u7528\u5176\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807\u5e76\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5\n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u65b0\u5efaMySQL\u8868\u5b58\u653e\u76d1\u63a7\u6570\u636e\n\n\n\u6211\u4eec\u65e5\u5e38\u5728\u8fd0\u7ef4Oracle\u6570\u636e\u5e93\u65f6\u6709\u5f88\u591a\u6307\u6807\u9700\u8981\u8003\u8651\uff0c\u8fd9\u91cc\u6211\u6311\u9009\u4e86\u4e00\u4e9b\u65e5\u5e38\u68c0\u67e5\u7684\u9879\u76ee\n\n\n1.\u6dfb\u52a0models\n\n\nvim models.py\n\n\nclass oraclestatus(models.Model):\n    tnsname=models.CharField(max_length=100)\n    ipaddress=models.GenericIPAddressField()\n    dbsize=models.CharField(max_length=50)\n    tbstatus=models.CharField(max_length=200)\n    host_name=models.CharField(max_length=50,default='host')\n    version=models.CharField(max_length=50,default='10')\n    startup_time=models.CharField(max_length=50,default='2015')\n    archiver=models.CharField(max_length=20,default='opened')\n    sga_size=models.IntegerField(default=0)\n    def __unicode__(self):\n        return self.tnsname\n    class Meta:\n        app_label='monitor'\n\n\n\n\n\n2.\u521b\u5efa\u6570\u636e\u5e93\u8868\n\n\n[oracle@asensvr-oms mysite]$ python manage.py  makemigrations\n[oracle@asensvr-oms mysite]$ python manage.py  migrate\n\n\n\n\n3.\u52a0\u81f3admin\u7ba1\u7406\n\n\nfrom django.contrib import admin\n\n# Register your models here.\n\nfrom monitor.models import oraclelist\nfrom monitor.models import oraclestatus\n\n\nadmin.site.register(oraclelist)\nadmin.site.register(oraclestatus)\n\n\n\n\n\u4ee5\u4e0a\u5c31\u5b8c\u6210\u4e86\u8868\u7684\u521b\u5efa\uff0c\u4e00\u4e9b\u5b57\u6bb5\u7684\u89e3\u91ca\u5982\u4e0b: \n\n\n\n\n\n\ndbsize \u4e3a\u6570\u636e\u5e93\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3aG \n\n\n\n\n\n\ntbstatus\u4e3a\u8868\u7a7a\u95f4\u7684\u72b6\u6001\uff0c\u5f53\u4f7f\u7528\u7387\u5927\u4e8e90%\u65f6\u5019\u4f1a\u663e\u793a\u51fa\u5177\u4f53\u7684\u8868\u7a7a\u95f4\u540d \n\n\n\n\n\n\narchiver\u4e3a\u662f\u5426\u542f\u7528\u4e86\u5f52\u6863\n\n\n\n\n\n\n\u7f16\u5199\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6\u6307\u6807\u5e76\u5b58\u5165\u6570\u636e\u5e93\n\n\nvim oraclemonitor.py\n\n\nfrom django.core.management.base import BaseCommand\nfrom monitor.models import oraclelist\nfrom monitor.models import oraclestatus\nfrom monitor.command.getoracleinfo import *\n        oraclestatus.objects.all().delete()\n        ip=oraclelist.objects.all().order_by('tnsname')\n        for i in ip:\n            if i.monitor_type==1:\n                    ipaddress1=i.ipaddress\n                    username=i.username\n                    password=i.password\n                    port=i.port\n                    tnsname1=i.tnsname\n                    try:\n                        db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress1+':'+port+'/'+tnsname1 ,mode=cx_Oracle.SYSDBA)\n                    except Exception , e:\n                        content= (i.ipaddress+' is Unreachable,The reason is '+str(e)).strip()\n                        print content\n                    else:\n                        cursor = db.cursor()\n                        dbsize=getdbsize(cursor)\n                        tbstatus=getspace(cursor)\n                        oracle_info=check_info(cursor)\n                        sga_size=get_sga_size(cursor)\n                        cursor.close()\n                        db.close()\n                        if oraclestatus.objects.filter(ipaddress=ipaddress1).filter(tnsname=tnsname1):\n                            status=oraclestatus.objects.filter(ipaddress=ipaddress1)\n                            status.update(**{'tnsname':tnsname1,'ipaddress':ipaddress1,'dbsize':dbsize,'tbstatus':tbstatus,'host_name':oracle_info[0],'version':oracle_info[1],'startup_time':oracle_info[2],'archiver':oracle_info[3],'sga_size':sga_size})\n                        else:\n                            createtnsname=oraclestatus(ipaddress=ipaddress1,tnsname=tnsname1)\n                            createtnsname.save()\n                            status=oraclestatus.objects.filter(ipaddress=ipaddress1).filter(tnsname=tnsname1)\n                            status.update(**{'tnsname':tnsname1,'ipaddress':ipaddress1,'dbsize':dbsize,'tbstatus':tbstatus,'host_name':oracle_info[0],'version':oracle_info[1],'startup_time':oracle_info[2],'archiver':oracle_info[3],'sga_size':sga_size})\n\n\n\n\n\u8fd9\u4e2a\u7a0b\u5e8f\u8bb2\u89e3\u5982\u4e0b:\n\n\n\n\n\n\n\u4e3a\u9632\u6b62\u4e0d\u9700\u8981\u76d1\u63a7\u7684\u6570\u636e\u5e93\u7559\u4e0b\uff0c\u5148\u6e05\u7a7aoraclestatus\u8868\u7684\u6570\u636e \n\n\n\n\n\n\n\u7136\u540e\u4eceoraclelist\u8868\u4e2d\u83b7\u53d6\u4fe1\u606f \n\n\n\n\n\n\n\u904d\u5386\u6bcf\u4e2a\u6570\u636e\u5e93\uff0c\u5f53monitor_type\u4e3a1\u65f6\u7ee7\u7eed \n\n\n\n\n\n\n\u5229\u7528\u53d6\u51fa\u6765\u7684\u4fe1\u606f\u8fde\u63a5\u6570\u636e\u5e93\uff0c\u5f53\u8fde\u63a5\u6210\u529f\u540e\u6267\u884c\u76f8\u5e94\u7684\u7a0b\u5e8f\u83b7\u53d6\u76d1\u63a7\u6570\u636e\n\n\n\n\n\n\n\u83b7\u53d6\u5b8c\u6210\u540e\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5 \n\n\n\n\n\n\n\u63a5\u4e0b\u6765\u9996\u5148\u5229\u7528filter\u65b9\u6cd5\u5224\u65adoraclestatus\u8868\u4e2d\u662f\u5426\u5df2\u7ecf\u6709\u8be5\u5b9e\u4f8b\uff0c\u5982\u679c\u6709\u5219\u4f7f\u7528update\u66f4\u65b0\u8be5\u884c \n\n\n\n\n\n\n\u5982\u679c\u6ca1\u6709\u5219\u9996\u5148\u521b\u5efa\u8be5\u884c\uff0c\u7136\u540e\u518d\u66f4\u65b0\u8be5\u884c\uff0csave\u65b9\u6cd5\u4e3acommit insert\u52a8\u4f5c\n\n\n\n\n\n\n\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\n\n\n\n\n\n\n\u7531\u4e8e\u53ef\u80fd\u540c\u4e00\u53f0\u4e3b\u673a\u6709\u591a\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u91cc\u5224\u65adtnsname\u548cip\u5730\u57402\u4e2a\u5b57\u6bb5 \n\n\n\n\n\n\n\u5404\u4e2a\u51fd\u6570\u7684\u5185\u5bb9\u8bf7\u81ea\u884c\u67e5\u770b\u6e90\u4ee3\u7801\uff0c\u5f88\u5bb9\u6613\u7406\u89e3 \n\n\n\n\n\n\n\u7531\u4e8e\u6211\u8fd9\u67099i\u7684\u6570\u636e\u5e93\uff0c\u6240\u4ee5SGA\u5927\u5c0f\u6211\u7528\u7684\u662f sga max size \u800c\u4e0d\u662fsga target \n\n\n\n\n\n\n\u6570\u636e\u5e93\u5927\u5c0f\u7528\u7684\u662fdatafile\u7684\u5927\u5c0f\u800c\u4e0d\u662fsegment\u7684\u5927\u5c0f\n\n\n\n\n\n\n\u6700\u7ec8\u7ed3\u679c\n\n\n\n\n\n\n\u53ef\u4ee5\u770b\u51fa\u6570\u636e\u5e93\u7684\u4fe1\u606f\u5df2\u7ecf\u4fdd\u5b58\u5728MySQL\u6570\u636e\u5e93\u4e2d\u4e86\n\n\n\u8bbe\u7f6e\u81ea\u52a8\u8fd0\u884c\n\n\n\u8fd9\u91cc\u6211\u4eec\u8bbe\u7f6e\u6bcf\u5929\u51cc\u6668\u8fdb\u884c\u4e00\u6b21\uff0c\u5e76\u91cd\u5b9a\u5411\u6240\u6709\u65e5\u5fd7\u81f3\u4e00\u4e2a\u6587\u4ef6\n\n\n\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u8be5\u65e5\u5fd7\u6587\u4ef6\u5224\u65ad\u811a\u672c\u662f\u5426\u6b63\u5e38\u8fd0\u884c\n\n\n59 23  *   *   *   /usr/bin/python2.7  /home/oracle/mysite/manage.py oraclemonitor >>/home/oracle/crontab.log  2>&1\n\n\n\n\n\u6e90\u4ee3\u7801\u4f4d\u7f6e\n\n\n\u6b22\u8fce\u8bbf\u95ee\u6211\u7684github\u4e3b\u9875\u67e5\u770b\u6e90\u7801\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u8fd9\u8282\u4ecb\u7ecd\u4e86\u5982\u4f55\u5229\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6307\u6807\u5e76\u4fdd\u5b58\u5728MySQL\u6570\u636e\u5e93\u4e2d\n\n\n\u4e0b\u8282\u4ecb\u7ecd\u5982\u4f55\u5c06\u8fd9\u4e9b\u6570\u636e\u5c55\u793a\u5728\u4e00\u4e2a\u9875\u9762\u4e0a",
            "title": "2.\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807"
        },
        {
            "location": "/3.2/#oracle",
            "text": "\u8fd9\u4e2a\u4e13\u9898\u4e3b\u8981\u5185\u5bb9\u6709\uff1a    \u5982\u4f55\u65b0\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4     \u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807\u5e76\u5199\u5165\u6570\u636e\u5e93     \u5982\u4f55\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u5e93\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u663e\u793a    \u4e0a\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u5982\u4f55\u65b0\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u547d\u4ee4  \u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u4f7f\u7528\u5176\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807\u5e76\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5  \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle",
            "title": "\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u76d1\u63a7\u6307\u6807"
        },
        {
            "location": "/3.2/#mysql",
            "text": "\u6211\u4eec\u65e5\u5e38\u5728\u8fd0\u7ef4Oracle\u6570\u636e\u5e93\u65f6\u6709\u5f88\u591a\u6307\u6807\u9700\u8981\u8003\u8651\uff0c\u8fd9\u91cc\u6211\u6311\u9009\u4e86\u4e00\u4e9b\u65e5\u5e38\u68c0\u67e5\u7684\u9879\u76ee  1.\u6dfb\u52a0models  vim models.py  class oraclestatus(models.Model):\n    tnsname=models.CharField(max_length=100)\n    ipaddress=models.GenericIPAddressField()\n    dbsize=models.CharField(max_length=50)\n    tbstatus=models.CharField(max_length=200)\n    host_name=models.CharField(max_length=50,default='host')\n    version=models.CharField(max_length=50,default='10')\n    startup_time=models.CharField(max_length=50,default='2015')\n    archiver=models.CharField(max_length=20,default='opened')\n    sga_size=models.IntegerField(default=0)\n    def __unicode__(self):\n        return self.tnsname\n    class Meta:\n        app_label='monitor'  2.\u521b\u5efa\u6570\u636e\u5e93\u8868  [oracle@asensvr-oms mysite]$ python manage.py  makemigrations\n[oracle@asensvr-oms mysite]$ python manage.py  migrate  3.\u52a0\u81f3admin\u7ba1\u7406  from django.contrib import admin\n\n# Register your models here.\n\nfrom monitor.models import oraclelist\nfrom monitor.models import oraclestatus\n\n\nadmin.site.register(oraclelist)\nadmin.site.register(oraclestatus)  \u4ee5\u4e0a\u5c31\u5b8c\u6210\u4e86\u8868\u7684\u521b\u5efa\uff0c\u4e00\u4e9b\u5b57\u6bb5\u7684\u89e3\u91ca\u5982\u4e0b:     dbsize \u4e3a\u6570\u636e\u5e93\u7684\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3aG     tbstatus\u4e3a\u8868\u7a7a\u95f4\u7684\u72b6\u6001\uff0c\u5f53\u4f7f\u7528\u7387\u5927\u4e8e90%\u65f6\u5019\u4f1a\u663e\u793a\u51fa\u5177\u4f53\u7684\u8868\u7a7a\u95f4\u540d     archiver\u4e3a\u662f\u5426\u542f\u7528\u4e86\u5f52\u6863",
            "title": "\u65b0\u5efaMySQL\u8868\u5b58\u653e\u76d1\u63a7\u6570\u636e"
        },
        {
            "location": "/3.2/#_1",
            "text": "vim oraclemonitor.py  from django.core.management.base import BaseCommand\nfrom monitor.models import oraclelist\nfrom monitor.models import oraclestatus\nfrom monitor.command.getoracleinfo import *\n        oraclestatus.objects.all().delete()\n        ip=oraclelist.objects.all().order_by('tnsname')\n        for i in ip:\n            if i.monitor_type==1:\n                    ipaddress1=i.ipaddress\n                    username=i.username\n                    password=i.password\n                    port=i.port\n                    tnsname1=i.tnsname\n                    try:\n                        db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress1+':'+port+'/'+tnsname1 ,mode=cx_Oracle.SYSDBA)\n                    except Exception , e:\n                        content= (i.ipaddress+' is Unreachable,The reason is '+str(e)).strip()\n                        print content\n                    else:\n                        cursor = db.cursor()\n                        dbsize=getdbsize(cursor)\n                        tbstatus=getspace(cursor)\n                        oracle_info=check_info(cursor)\n                        sga_size=get_sga_size(cursor)\n                        cursor.close()\n                        db.close()\n                        if oraclestatus.objects.filter(ipaddress=ipaddress1).filter(tnsname=tnsname1):\n                            status=oraclestatus.objects.filter(ipaddress=ipaddress1)\n                            status.update(**{'tnsname':tnsname1,'ipaddress':ipaddress1,'dbsize':dbsize,'tbstatus':tbstatus,'host_name':oracle_info[0],'version':oracle_info[1],'startup_time':oracle_info[2],'archiver':oracle_info[3],'sga_size':sga_size})\n                        else:\n                            createtnsname=oraclestatus(ipaddress=ipaddress1,tnsname=tnsname1)\n                            createtnsname.save()\n                            status=oraclestatus.objects.filter(ipaddress=ipaddress1).filter(tnsname=tnsname1)\n                            status.update(**{'tnsname':tnsname1,'ipaddress':ipaddress1,'dbsize':dbsize,'tbstatus':tbstatus,'host_name':oracle_info[0],'version':oracle_info[1],'startup_time':oracle_info[2],'archiver':oracle_info[3],'sga_size':sga_size})  \u8fd9\u4e2a\u7a0b\u5e8f\u8bb2\u89e3\u5982\u4e0b:    \u4e3a\u9632\u6b62\u4e0d\u9700\u8981\u76d1\u63a7\u7684\u6570\u636e\u5e93\u7559\u4e0b\uff0c\u5148\u6e05\u7a7aoraclestatus\u8868\u7684\u6570\u636e     \u7136\u540e\u4eceoraclelist\u8868\u4e2d\u83b7\u53d6\u4fe1\u606f     \u904d\u5386\u6bcf\u4e2a\u6570\u636e\u5e93\uff0c\u5f53monitor_type\u4e3a1\u65f6\u7ee7\u7eed     \u5229\u7528\u53d6\u51fa\u6765\u7684\u4fe1\u606f\u8fde\u63a5\u6570\u636e\u5e93\uff0c\u5f53\u8fde\u63a5\u6210\u529f\u540e\u6267\u884c\u76f8\u5e94\u7684\u7a0b\u5e8f\u83b7\u53d6\u76d1\u63a7\u6570\u636e    \u83b7\u53d6\u5b8c\u6210\u540e\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5     \u63a5\u4e0b\u6765\u9996\u5148\u5229\u7528filter\u65b9\u6cd5\u5224\u65adoraclestatus\u8868\u4e2d\u662f\u5426\u5df2\u7ecf\u6709\u8be5\u5b9e\u4f8b\uff0c\u5982\u679c\u6709\u5219\u4f7f\u7528update\u66f4\u65b0\u8be5\u884c     \u5982\u679c\u6ca1\u6709\u5219\u9996\u5148\u521b\u5efa\u8be5\u884c\uff0c\u7136\u540e\u518d\u66f4\u65b0\u8be5\u884c\uff0csave\u65b9\u6cd5\u4e3acommit insert\u52a8\u4f5c    \u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879    \u7531\u4e8e\u53ef\u80fd\u540c\u4e00\u53f0\u4e3b\u673a\u6709\u591a\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u91cc\u5224\u65adtnsname\u548cip\u5730\u57402\u4e2a\u5b57\u6bb5     \u5404\u4e2a\u51fd\u6570\u7684\u5185\u5bb9\u8bf7\u81ea\u884c\u67e5\u770b\u6e90\u4ee3\u7801\uff0c\u5f88\u5bb9\u6613\u7406\u89e3     \u7531\u4e8e\u6211\u8fd9\u67099i\u7684\u6570\u636e\u5e93\uff0c\u6240\u4ee5SGA\u5927\u5c0f\u6211\u7528\u7684\u662f sga max size \u800c\u4e0d\u662fsga target     \u6570\u636e\u5e93\u5927\u5c0f\u7528\u7684\u662fdatafile\u7684\u5927\u5c0f\u800c\u4e0d\u662fsegment\u7684\u5927\u5c0f",
            "title": "\u7f16\u5199\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6\u6307\u6807\u5e76\u5b58\u5165\u6570\u636e\u5e93"
        },
        {
            "location": "/3.2/#_2",
            "text": "\u53ef\u4ee5\u770b\u51fa\u6570\u636e\u5e93\u7684\u4fe1\u606f\u5df2\u7ecf\u4fdd\u5b58\u5728MySQL\u6570\u636e\u5e93\u4e2d\u4e86",
            "title": "\u6700\u7ec8\u7ed3\u679c"
        },
        {
            "location": "/3.2/#_3",
            "text": "\u8fd9\u91cc\u6211\u4eec\u8bbe\u7f6e\u6bcf\u5929\u51cc\u6668\u8fdb\u884c\u4e00\u6b21\uff0c\u5e76\u91cd\u5b9a\u5411\u6240\u6709\u65e5\u5fd7\u81f3\u4e00\u4e2a\u6587\u4ef6  \u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u8be5\u65e5\u5fd7\u6587\u4ef6\u5224\u65ad\u811a\u672c\u662f\u5426\u6b63\u5e38\u8fd0\u884c  59 23  *   *   *   /usr/bin/python2.7  /home/oracle/mysite/manage.py oraclemonitor >>/home/oracle/crontab.log  2>&1  \u6e90\u4ee3\u7801\u4f4d\u7f6e  \u6b22\u8fce\u8bbf\u95ee\u6211\u7684github\u4e3b\u9875\u67e5\u770b\u6e90\u7801  https://github.com/bsbforever/wechat_monitor  \u8fd9\u8282\u4ecb\u7ecd\u4e86\u5982\u4f55\u5229\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u6570\u636e\u5e93\u6307\u6807\u5e76\u4fdd\u5b58\u5728MySQL\u6570\u636e\u5e93\u4e2d  \u4e0b\u8282\u4ecb\u7ecd\u5982\u4f55\u5c06\u8fd9\u4e9b\u6570\u636e\u5c55\u793a\u5728\u4e00\u4e2a\u9875\u9762\u4e0a",
            "title": "\u8bbe\u7f6e\u81ea\u52a8\u8fd0\u884c"
        },
        {
            "location": "/3.3/",
            "text": "\u5c06Oracle\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u5c55\u73b0\n\n\n\u8fd9\u8282\u8bb2\u8ff0\u81ea\u5b9a\u4e49\u547d\u4ee4\u76f8\u5173\u7684\u77e5\u8bc6\n\n\n\u8fd9\u4e2a\u4e13\u9898\u4e3b\u8981\u5185\u5bb9\u6709\uff1a\n\n\n\n\n\n\n\u5982\u4f55\u65b0\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4 \n\n\n\n\n\n\n\u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u81ea\u5b9a\u4e49\u547d\u4ee4\u5e76\u5199\u5165\u6570\u636e\u5e93 \n\n\n\n\n\n\n\u5982\u4f55\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u5e93\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u663e\u793a\n\n\n\n\n\n\n\u7ecf\u8fc7\u524d\u9762\u7684\u4ecb\u7ecd\u6211\u4eec\u5df2\u7ecf\u628a\u65e5\u5e38\u9700\u8981\u76d1\u63a7\u7684\u6307\u6807\u5b58\u5165\u4e86oraclestatus\u8868\u4e2d\n\n\n\u4e0b\u9762\u6211\u4eec\u5c06\u5176\u5728\u524d\u7aef\u5c55\u73b0\n\n\n\u5f00\u53d1\u73af\u5883\n\n\n\u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3 \n\n\nPython\u7248\u672c :2.7 \n\n\nDjango\u7248\u672c: 1.10.5 \n\n\n\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle\n\n\n\u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4\n\n\n\u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762\n\n\n\n\nurls.py\u9875\u9762\n\n\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n    url(r'^oracle_status$',views.oracle_status, name='oracle_status'),\n]\n\n\n\n\noracle_status\u4e3a\u5c55\u793aOracle\u76d1\u63a7\u6307\u6807\u7684\u9875\u9762\n\n\nviews.py\n\n\ndef oracle_status(request):\n    result=oraclestatus.objects.all().order_by('tnsname')\n    dic ={'result':result}\n    return render_to_response('oracle_status.html',dic)\n\n\n\n\n\u8be5\u51fd\u6570\u5c06oraclestatus\u8868\u4e2d\u6570\u636e\u53d6\u51fa\u6765\u4e4b\u540e\u4f20\u9012\u7ed9oracle_status.html\u6587\u4ef6\n\n\ntemplate\u6587\u4ef6\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_status.html\u6587\u4ef6\u6765\u663e\u793a\n\n\n{% block content %}\n<div class=\"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main\" id='content'>\n<p><h3>\u6570\u636e\u5e93\u6982\u51b5------\u6bcf\u5929\u96f6\u70b9\u66f4\u65b0</h3></p>\n<table class=\"table table-hover\">\n<thead>\n<tr>\n    <th>\u6570\u636e\u5e93\u540d</th>\n    <th>IP\u5730\u5740</th>\n    <th>\u6570\u636e\u5e93\u5927\u5c0f</th>\n    <th>SGA\u5927\u5c0f</th>\n    <th>\u8868\u7a7a\u95f4\u72b6\u6001</th>\n    <th>\u7248\u672c</th>\n    <th>\u5f00\u542f\u65f6\u95f4</th>\n    <th>\u5f52\u6863\u72b6\u6001</th>\n</tr>\n</thead>\n<tbody>\n{% for i in result %}\n            <tr>\n                <td>{{i.tnsname|upper}}</td>\n                <td>{{i.ipaddress|upper}}</td>\n                <td>{{i.dbsize|upper}}G</td>\n                <td>{{i.sga_size|upper}}M</td>\n                <td>{% if i.tbstatus != \"normal\" %} <div style=\"color:#F00\">{% endif %}{{i.tbstatus|upper}}</td>\n                <td>{{i.version|upper}}</td>\n                <td>{{i.startup_time|upper}}</td>\n                <td>{% if i.archiver != \"STARTED\" %} <div style=\"color:#F00\">{% endif %}{{i.archiver}}</td>\n\n            </tr>\n{% endfor %}\n</tbody>\n</div>\n{% endblock %}\n\n\n\n\n\u8fd9\u91cc\u901a\u8fc7\u4e00\u4e2a\u8868\u683c\u6765\u5c55\u73b0\u6570\u636e\u5e93\u6307\u6807\u7684\u6574\u4f53\u60c5\u51b5\n\n\nDjango\u5141\u8bb8\u5728html\u6587\u4ef6\u5185\u90e8\u4f7f\u7528\u7a0b\u5e8f\u52a8\u6001\u63a7\u5236\u9875\u9762\u7684\u663e\u793a\uff0c\u4ee3\u7801\u4e2d\u7528\u5230\u4e86if\u5224\u65ad\u529f\u80fd\n\n\n\u5bf9\u4e8e\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\u4e0d\u6b63\u5e38\u7684\u4ee5\u53ca\u672a\u5f00\u542f\u5f52\u6863\u7684\u4ee5\u7ea2\u8272\u663e\u793a\n\n\n\u6ce8\u610f\uff1a\u8fd9\u91ccbase.html,index.html\u6587\u4ef6\u90fd\u9700\u8981\u4fee\u6539\uff0c\u5177\u4f53\u89c1\u6e90\u7801\n\n\n\u6700\u7ec8\u6548\u679c\n\n\nhttp://10.65.202.218:8081/monitor/oracle_status\n\n\n\n\n\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u663e\u793a\u51fa\u4e86\u6709\u5f02\u5e38\u7684\u8868\u7a7a\u95f4\u548c\u5f52\u6863\u72b6\u6001\u7684\u6570\u636e\u5e93\n\n\n\u6e90\u4ee3\u7801\u4f4d\u7f6e\n\n\n\u6b22\u8fce\u8bbf\u95ee\u6211\u7684github\u4e3b\u9875\u67e5\u770b\u6e90\u7801\n\n\nhttps://github.com/bsbforever/wechat_monitor\n\n\n\u65e5\u5e38\u7684\u76d1\u63a7\u6307\u6807\u5c55\u73b0\u5728\u524d\u7aef\u9875\u9762\u5df2\u7ecf\u8bb2\u5b8c\u4e86\uff0c\u8fd9\u53ef\u4ee5\u66f4\u65b9\u4fbf\u6211\u4eec\u65e5\u5e38\u7684\u8fd0\u7ef4",
            "title": "3.\u5c06Oracle\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u5c55\u73b0"
        },
        {
            "location": "/3.3/#oracle",
            "text": "\u8fd9\u8282\u8bb2\u8ff0\u81ea\u5b9a\u4e49\u547d\u4ee4\u76f8\u5173\u7684\u77e5\u8bc6  \u8fd9\u4e2a\u4e13\u9898\u4e3b\u8981\u5185\u5bb9\u6709\uff1a    \u5982\u4f55\u65b0\u5efa\u81ea\u5b9a\u4e49\u547d\u4ee4     \u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49\u547d\u4ee4\u83b7\u53d6Oracle\u81ea\u5b9a\u4e49\u547d\u4ee4\u5e76\u5199\u5165\u6570\u636e\u5e93     \u5982\u4f55\u5c06\u83b7\u53d6\u5230\u7684\u6570\u636e\u5e93\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u663e\u793a    \u7ecf\u8fc7\u524d\u9762\u7684\u4ecb\u7ecd\u6211\u4eec\u5df2\u7ecf\u628a\u65e5\u5e38\u9700\u8981\u76d1\u63a7\u7684\u6307\u6807\u5b58\u5165\u4e86oraclestatus\u8868\u4e2d  \u4e0b\u9762\u6211\u4eec\u5c06\u5176\u5728\u524d\u7aef\u5c55\u73b0  \u5f00\u53d1\u73af\u5883  \u64cd\u4f5c\u7cfb\u7edf:CentOS 7.3   Python\u7248\u672c :2.7   Django\u7248\u672c: 1.10.5   \u64cd\u4f5c\u7cfb\u7edf\u7528\u6237:oracle  \u5efa\u7acb\u9875\u9762\u7684\u6b65\u9aa4  \u6211\u4eec\u8fd8\u662f\u901a\u8fc7\u8fd9\u5f20\u56fe\u7684\u6b65\u9aa4\u6765\u8bf4\u660e\u5982\u4f55\u5efa\u7acb\u9875\u9762",
            "title": "\u5c06Oracle\u76d1\u63a7\u6307\u6807\u5728\u524d\u7aef\u5c55\u73b0"
        },
        {
            "location": "/3.3/#urlspy",
            "text": "urlpatterns = [\n    url(r'^$', views.index, name='index'),\n    url(r'^oracle_command/$',views.oracle_command, name='oracle_command'),\n    url(r'^commandresult/$',views.commandresult, name='commandresult'),\n    url(r'^oracle_status$',views.oracle_status, name='oracle_status'),\n]  oracle_status\u4e3a\u5c55\u793aOracle\u76d1\u63a7\u6307\u6807\u7684\u9875\u9762",
            "title": "urls.py\u9875\u9762"
        },
        {
            "location": "/3.3/#viewspy",
            "text": "def oracle_status(request):\n    result=oraclestatus.objects.all().order_by('tnsname')\n    dic ={'result':result}\n    return render_to_response('oracle_status.html',dic)  \u8be5\u51fd\u6570\u5c06oraclestatus\u8868\u4e2d\u6570\u636e\u53d6\u51fa\u6765\u4e4b\u540e\u4f20\u9012\u7ed9oracle_status.html\u6587\u4ef6",
            "title": "views.py"
        },
        {
            "location": "/3.3/#template",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528oracle_status.html\u6587\u4ef6\u6765\u663e\u793a  {% block content %}\n<div class=\"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main\" id='content'>\n<p><h3>\u6570\u636e\u5e93\u6982\u51b5------\u6bcf\u5929\u96f6\u70b9\u66f4\u65b0</h3></p>\n<table class=\"table table-hover\">\n<thead>\n<tr>\n    <th>\u6570\u636e\u5e93\u540d</th>\n    <th>IP\u5730\u5740</th>\n    <th>\u6570\u636e\u5e93\u5927\u5c0f</th>\n    <th>SGA\u5927\u5c0f</th>\n    <th>\u8868\u7a7a\u95f4\u72b6\u6001</th>\n    <th>\u7248\u672c</th>\n    <th>\u5f00\u542f\u65f6\u95f4</th>\n    <th>\u5f52\u6863\u72b6\u6001</th>\n</tr>\n</thead>\n<tbody>\n{% for i in result %}\n            <tr>\n                <td>{{i.tnsname|upper}}</td>\n                <td>{{i.ipaddress|upper}}</td>\n                <td>{{i.dbsize|upper}}G</td>\n                <td>{{i.sga_size|upper}}M</td>\n                <td>{% if i.tbstatus != \"normal\" %} <div style=\"color:#F00\">{% endif %}{{i.tbstatus|upper}}</td>\n                <td>{{i.version|upper}}</td>\n                <td>{{i.startup_time|upper}}</td>\n                <td>{% if i.archiver != \"STARTED\" %} <div style=\"color:#F00\">{% endif %}{{i.archiver}}</td>\n\n            </tr>\n{% endfor %}\n</tbody>\n</div>\n{% endblock %}  \u8fd9\u91cc\u901a\u8fc7\u4e00\u4e2a\u8868\u683c\u6765\u5c55\u73b0\u6570\u636e\u5e93\u6307\u6807\u7684\u6574\u4f53\u60c5\u51b5  Django\u5141\u8bb8\u5728html\u6587\u4ef6\u5185\u90e8\u4f7f\u7528\u7a0b\u5e8f\u52a8\u6001\u63a7\u5236\u9875\u9762\u7684\u663e\u793a\uff0c\u4ee3\u7801\u4e2d\u7528\u5230\u4e86if\u5224\u65ad\u529f\u80fd  \u5bf9\u4e8e\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\u4e0d\u6b63\u5e38\u7684\u4ee5\u53ca\u672a\u5f00\u542f\u5f52\u6863\u7684\u4ee5\u7ea2\u8272\u663e\u793a  \u6ce8\u610f\uff1a\u8fd9\u91ccbase.html,index.html\u6587\u4ef6\u90fd\u9700\u8981\u4fee\u6539\uff0c\u5177\u4f53\u89c1\u6e90\u7801",
            "title": "template\u6587\u4ef6"
        },
        {
            "location": "/3.3/#_1",
            "text": "http://10.65.202.218:8081/monitor/oracle_status   \u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u663e\u793a\u51fa\u4e86\u6709\u5f02\u5e38\u7684\u8868\u7a7a\u95f4\u548c\u5f52\u6863\u72b6\u6001\u7684\u6570\u636e\u5e93  \u6e90\u4ee3\u7801\u4f4d\u7f6e  \u6b22\u8fce\u8bbf\u95ee\u6211\u7684github\u4e3b\u9875\u67e5\u770b\u6e90\u7801  https://github.com/bsbforever/wechat_monitor  \u65e5\u5e38\u7684\u76d1\u63a7\u6307\u6807\u5c55\u73b0\u5728\u524d\u7aef\u9875\u9762\u5df2\u7ecf\u8bb2\u5b8c\u4e86\uff0c\u8fd9\u53ef\u4ee5\u66f4\u65b9\u4fbf\u6211\u4eec\u65e5\u5e38\u7684\u8fd0\u7ef4",
            "title": "\u6700\u7ec8\u6548\u679c"
        }
    ]
}