{
    "docs": [
        {
            "location": "/",
            "text": "\u6b22\u8fce\u6765\u5230\u5b85\u5fc5\u5907\n\n\n \n\u8be5\u7f51\u7ad9\u4e3a\u6211\u7684\u4e2a\u4eba\u516c\u4f17\u53f7\u7684\u535a\u5ba2\u5730\u5740\uff0c\u6700\u65b0\u6700\u5feb\u8d44\u6599\u8bf7\u5173\u6ce8\u516c\u4f17\u53f7\n\n\n \n\n\n\u8be5\u9875\u9762\u4e3a\nPython\u81ea\u52a8\u5316\u8fd0\u7ef4\n\u4e3b\u9875\u9762\n\n\n\u66f4\u591a\u5185\u5bb9\u8bf7\u70b9\u51fb\n\u8fd4\u56de\u9996\u9875\n\n\n \n\n \n\n \n\n \n\n\n\u6b22\u8fce\u626b\u63cf\u5173\u6ce8\u4e2a\u4eba\u516c\u4f17\u53f7\n\u5b85\u5fc5\u5907",
            "title": "\u9996\u9875"
        },
        {
            "location": "/#_1",
            "text": "\u8be5\u7f51\u7ad9\u4e3a\u6211\u7684\u4e2a\u4eba\u516c\u4f17\u53f7\u7684\u535a\u5ba2\u5730\u5740\uff0c\u6700\u65b0\u6700\u5feb\u8d44\u6599\u8bf7\u5173\u6ce8\u516c\u4f17\u53f7     \u8be5\u9875\u9762\u4e3a Python\u81ea\u52a8\u5316\u8fd0\u7ef4 \u4e3b\u9875\u9762  \u66f4\u591a\u5185\u5bb9\u8bf7\u70b9\u51fb \u8fd4\u56de\u9996\u9875           \u6b22\u8fce\u626b\u63cf\u5173\u6ce8\u4e2a\u4eba\u516c\u4f17\u53f7 \u5b85\u5fc5\u5907",
            "title": "\u6b22\u8fce\u6765\u5230\u5b85\u5fc5\u5907"
        },
        {
            "location": "/1.1/",
            "text": "Python3.6\u7684\u5b89\u88c5\n\n\n\u8fd9\u4e2a\u4e13\u9898\u8bb2\u89e3Python\u76f8\u5173\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u9996\u5148\u662f\u8fd0\u7ef4\u65b9\u9762\uff0c\u4f8b\u5982\u6570\u636e\u5e93\uff0cLinux\u7b49\uff0c\u540e\u7eed\u4f1a\u6709Web\uff0c\u722c\u866b\u7b49\u3002\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8\n\n\nPython\u73af\u5883\u4e3a Python 3.6\n\n\n\u65b0\u589eoracle\u7528\u6237\n\n\n\u540d\u5b57\u53ef\u968f\u4fbf\u53d6\uff0c\u6211\u4eec\u811a\u672c\u90fd\u653e\u8be5\u7528\u6237\u4e0b\n\n\n[root@asensvr-monitor ~]# useradd oracle\n\n\n\n\n\u4fee\u6539\u5bc6\u7801\n\n\n[root@asensvr-monitor ~]# passwd oracle\n\n\n\n\n\u65b0\u5efa\u5b89\u88c5\u76ee\u5f55\n\n\n[root@asensvr-monitor ~]# su - oracle\n\n[oracle@asensvr-monitor ~]$ mkdir software\n\n[oracle@asensvr-monitor ~]$ cd software/\n\n\n\n\n\u5b89\u88c5Python3.6\n\n\n1.\u7531\u4e8e\u7cfb\u7edf\u5b89\u88c5\u5b8c\u6210\u540ePython\u7684\u7248\u672c\u4e3a2.6\uff0c\u9700\u5148\u5347\u7ea7\u81f33.6\n\n\n\n\n2.\u4e0b\u8f7d\u5b89\u88c5\u6587\u4ef6\u5e76\u89e3\u538b\n\n\ncd  ~/software\nwget https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tgz\ngunzip Python-3.6.1.tgz\ntar xvf Python-3.6.1.tar\ncd Python-3.6.1\n\n\n\n\n3.\u521b\u5efaPython\u5b89\u88c5\u76ee\u5f55\n\n\n mkdir /usr/local/python36\n\n\n\n\n4.\u7f16\u8bd1\u5b89\u88c5\n\n\ncd Python-3.6.1\n./configure --prefix=/usr/local/python36\nmake\nmake install\n\n\n\n\n5.\u4fee\u6539\u94fe\u63a5\n\n\nmv /usr/bin/python /usr/bin/python_old\nln -s /usr/local/python36/bin/python3.6 /usr/bin/python\n\n\n\n\n6.\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f\n\n\n\n\nyum\u95ee\u9898\u5904\u7406\n\n\n\u5347\u7ea7\u5b8c\u4e4b\u540eyum\u4f1a\u65e0\u6cd5\u4f7f\u7528\n\u8fd9\u65f6\u9700\u8981\u4fee\u6539yum\u53ef\u6267\u884c\u6587\u4ef6\u6587\u4ef6\n\n\n\u5c06\u7b2c\u4e00\u884c\u6539\u6210 python2.6\u5373\u53ef\n\n\nvim  /usr/bin/yum\n#!/usr/bin/python2.6\n\n\n\n\n\u81f3\u6b64Python 3.6\u5df2\u5b89\u88c5\u5b8c\u6210\uff0c\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u8fde\u63a5Oracle\u6570\u636e\u5e93",
            "title": "1.Python3.6\u7684\u5b89\u88c5"
        },
        {
            "location": "/1.1/#python36",
            "text": "\u8fd9\u4e2a\u4e13\u9898\u8bb2\u89e3Python\u76f8\u5173\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u9996\u5148\u662f\u8fd0\u7ef4\u65b9\u9762\uff0c\u4f8b\u5982\u6570\u636e\u5e93\uff0cLinux\u7b49\uff0c\u540e\u7eed\u4f1a\u6709Web\uff0c\u722c\u866b\u7b49\u3002  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8  Python\u73af\u5883\u4e3a Python 3.6",
            "title": "Python3.6\u7684\u5b89\u88c5"
        },
        {
            "location": "/1.1/#oracle",
            "text": "\u540d\u5b57\u53ef\u968f\u4fbf\u53d6\uff0c\u6211\u4eec\u811a\u672c\u90fd\u653e\u8be5\u7528\u6237\u4e0b  [root@asensvr-monitor ~]# useradd oracle",
            "title": "\u65b0\u589eoracle\u7528\u6237"
        },
        {
            "location": "/1.1/#_1",
            "text": "[root@asensvr-monitor ~]# passwd oracle",
            "title": "\u4fee\u6539\u5bc6\u7801"
        },
        {
            "location": "/1.1/#_2",
            "text": "[root@asensvr-monitor ~]# su - oracle\n\n[oracle@asensvr-monitor ~]$ mkdir software\n\n[oracle@asensvr-monitor ~]$ cd software/",
            "title": "\u65b0\u5efa\u5b89\u88c5\u76ee\u5f55"
        },
        {
            "location": "/1.1/#python36_1",
            "text": "1.\u7531\u4e8e\u7cfb\u7edf\u5b89\u88c5\u5b8c\u6210\u540ePython\u7684\u7248\u672c\u4e3a2.6\uff0c\u9700\u5148\u5347\u7ea7\u81f33.6   2.\u4e0b\u8f7d\u5b89\u88c5\u6587\u4ef6\u5e76\u89e3\u538b  cd  ~/software\nwget https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tgz\ngunzip Python-3.6.1.tgz\ntar xvf Python-3.6.1.tar\ncd Python-3.6.1  3.\u521b\u5efaPython\u5b89\u88c5\u76ee\u5f55   mkdir /usr/local/python36  4.\u7f16\u8bd1\u5b89\u88c5  cd Python-3.6.1\n./configure --prefix=/usr/local/python36\nmake\nmake install  5.\u4fee\u6539\u94fe\u63a5  mv /usr/bin/python /usr/bin/python_old\nln -s /usr/local/python36/bin/python3.6 /usr/bin/python  6.\u9a8c\u8bc1\u662f\u5426\u5b89\u88c5\u6210\u529f",
            "title": "\u5b89\u88c5Python3.6"
        },
        {
            "location": "/1.1/#yum",
            "text": "\u5347\u7ea7\u5b8c\u4e4b\u540eyum\u4f1a\u65e0\u6cd5\u4f7f\u7528\n\u8fd9\u65f6\u9700\u8981\u4fee\u6539yum\u53ef\u6267\u884c\u6587\u4ef6\u6587\u4ef6  \u5c06\u7b2c\u4e00\u884c\u6539\u6210 python2.6\u5373\u53ef  vim  /usr/bin/yum\n#!/usr/bin/python2.6  \u81f3\u6b64Python 3.6\u5df2\u5b89\u88c5\u5b8c\u6210\uff0c\u4e0b\u671f\u5c06\u4ecb\u7ecd\u5982\u4f55\u8fde\u63a5Oracle\u6570\u636e\u5e93",
            "title": "yum\u95ee\u9898\u5904\u7406"
        },
        {
            "location": "/1.2/",
            "text": "cx_Oracle\u6a21\u5757\u7684\u5b89\u88c5\n\n\n\u8fd9\u4e2a\u4e13\u9898\u8bb2\u89e3Python\u76f8\u5173\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u9996\u5148\u662f\u8fd0\u7ef4\u65b9\u9762\uff0c\u4f8b\u5982\u6570\u636e\u5e93\uff0cLinux\u7b49\uff0c\u540e\u7eed\u4f1a\u6709Web\uff0c\u722c\u866b\u7b49\u3002\n\n\n\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5b89\u88c5Python3.6 \uff0c\u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Python \u6a21\u5757cx_Oracle \u8fde\u63a5Oracle\u6570\u636e\u5e93\n\n\n\u8fd9\u8282\u5305\u542b oracle\u5ba2\u6237\u7aef\u7684\u5b89\u88c5\u548ccx_Oracle\u6a21\u5757\u7684\u5b89\u88c5\u4e24\u90e8\u5206\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8\n\n\nPython\u73af\u5883\u4e3a Python 3.6\n\n\nOracle \u6a21\u5757:cx_Oracle\n\n\nOracle\u5ba2\u6237\u7aef:Oracle 12c Instant Client\n\n\n1. \u5b89\u88c5Oracle 12c Instant Client\n\n\n\u7531\u4e8e\u8fd9\u6b21\u6211\u4eec\u4f7f\u7528Python\u8fde\u63a5Oracle\uff0c\u6240\u4ee5\u9700\u8981oracle\u5ba2\u6237\u7aef\uff0c\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528Oracle 12c Instant Client\n\n\n\u6ce8\u610f\uff1a12c\u5ba2\u6237\u7aef\u4e0d\u652f\u6301\u8fde\u63a59i\u53ca\u4ee5\u4e0b\u6570\u636e\u5e93\uff0c\u5982\u6709\u9700\u6c42\u8bf7\u4e0b\u8f7d11g\u7684instant client\n\n\n\u4e0b\u8f7d\u5730\u5740\n\n\n\n\n\u8fd9\u91cc\u6211\u4eec\u4e0b\u8f7d\u4e0a\u56fe\u5708\u51fa\u6765\u76842\u4e2arpm\u5305(\u9700\u8981\u6ce8\u518cOracle\u8d26\u53f7)\n\n\n\n\noracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm \n\n\noracle-instantclient12.2-devel-12.2.0.1.0-1.x86_64.rpm \n\n\n\n\n1.1\u5b89\u88c5Oracle\u5ba2\u6237\u7aef(root\u7528\u6237)\n\n\nrpm -ivh oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm \nrpm -ivh oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm\n\n\n\n\n\n\n1.2\u6dfb\u52a0ORACLE_HOME\u7528\u6237\u73af\u5883\u53d8\u91cf(root\u7528\u6237)\n\n\n\n\nvim ~/.bash_profile\nexport ORACLE_HOME=/usr/lib/oracle/12.2/client64\nexport LD_LIBRARY_PATH=/usr/lib/oracle/12.2/client64/lib\n\n\n\n\n2.\u4e0b\u8f7dcx_Oracle\u6a21\u5757\n\n\n\u6211\u4eec\u77e5\u9053Python\u5728\u5f3a\u5927\u7684\u5728\u4e8e\u4ed6\u5f3a\u5927\u7684\u6a21\u5757\u529f\u80fd\uff0c\u4e0d\u8bba\u4f60\u60f3\u505a\u4ec0\u4e48\u90fd\u6709\u76f8\u5e94\u7684\u8f6e\u5b50\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u4eca\u5929\u4ecb\u7ecd\u7684\u662f\u4e13\u95e8\u7528\u6237\u8fde\u63a5Oracle\u6570\u636e\u7684\u4e00\u4e2a\u6a21\u5757\n\n\n\u4e0b\u8f7d\u5730\u5740\n\n\n\u8fd9\u91cc\u6211\u4eec\u9009\u62e9Linux\u7248\u672c\u3002\n\n\n\n3.\u5b89\u88c5cx_Oracle\u6a21\u5757(root\u7528\u6237)\n\n\n\u4e0b\u8f7d\u5b8c\u6210\u540e\u6211\u4eec\u5b89\u88c5\n\n\ntar zxvf cx_Oracle-5.2.1.tar.gz\ncd cx_Oracle-5.2.1\npython setup.py build\npython setup.py  install\n\n\n\n\n\u9a8c\u8bc1\u5b89\u88c5\n\n\n\u5982import\u65e0\u9519\u8bef\u5219\u8bf4\u660e\u5b89\u88c5\u6210\u529f\n\n\n\n\u81f3\u6b64cx_Oracle\u6a21\u5757\u5df2\u7ecf\u5b89\u88c5\u5b8c\u6210\uff0c\u4e0b\u671f\u8bb2\u4ecb\u7ecd\u5982\u4f55\u5229\u7528cx_Oracle\u6a21\u5757\u8fde\u63a5Oracle\u6570\u636e\u5e93",
            "title": "2.cx_Oracle\u6a21\u5757\u7684\u5b89\u88c5"
        },
        {
            "location": "/1.2/#cx_oracle",
            "text": "\u8fd9\u4e2a\u4e13\u9898\u8bb2\u89e3Python\u76f8\u5173\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u9996\u5148\u662f\u8fd0\u7ef4\u65b9\u9762\uff0c\u4f8b\u5982\u6570\u636e\u5e93\uff0cLinux\u7b49\uff0c\u540e\u7eed\u4f1a\u6709Web\uff0c\u722c\u866b\u7b49\u3002  \u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5b89\u88c5Python3.6 \uff0c\u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Python \u6a21\u5757cx_Oracle \u8fde\u63a5Oracle\u6570\u636e\u5e93  \u8fd9\u8282\u5305\u542b oracle\u5ba2\u6237\u7aef\u7684\u5b89\u88c5\u548ccx_Oracle\u6a21\u5757\u7684\u5b89\u88c5\u4e24\u90e8\u5206  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8  Python\u73af\u5883\u4e3a Python 3.6  Oracle \u6a21\u5757:cx_Oracle  Oracle\u5ba2\u6237\u7aef:Oracle 12c Instant Client",
            "title": "cx_Oracle\u6a21\u5757\u7684\u5b89\u88c5"
        },
        {
            "location": "/1.2/#1-oracle-12c-instant-client",
            "text": "\u7531\u4e8e\u8fd9\u6b21\u6211\u4eec\u4f7f\u7528Python\u8fde\u63a5Oracle\uff0c\u6240\u4ee5\u9700\u8981oracle\u5ba2\u6237\u7aef\uff0c\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528Oracle 12c Instant Client  \u6ce8\u610f\uff1a12c\u5ba2\u6237\u7aef\u4e0d\u652f\u6301\u8fde\u63a59i\u53ca\u4ee5\u4e0b\u6570\u636e\u5e93\uff0c\u5982\u6709\u9700\u6c42\u8bf7\u4e0b\u8f7d11g\u7684instant client  \u4e0b\u8f7d\u5730\u5740   \u8fd9\u91cc\u6211\u4eec\u4e0b\u8f7d\u4e0a\u56fe\u5708\u51fa\u6765\u76842\u4e2arpm\u5305(\u9700\u8981\u6ce8\u518cOracle\u8d26\u53f7)   oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm   oracle-instantclient12.2-devel-12.2.0.1.0-1.x86_64.rpm    1.1\u5b89\u88c5Oracle\u5ba2\u6237\u7aef(root\u7528\u6237)  rpm -ivh oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm \nrpm -ivh oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm   1.2\u6dfb\u52a0ORACLE_HOME\u7528\u6237\u73af\u5883\u53d8\u91cf(root\u7528\u6237)   vim ~/.bash_profile\nexport ORACLE_HOME=/usr/lib/oracle/12.2/client64\nexport LD_LIBRARY_PATH=/usr/lib/oracle/12.2/client64/lib",
            "title": "1. \u5b89\u88c5Oracle 12c Instant Client"
        },
        {
            "location": "/1.2/#2cx_oracle",
            "text": "\u6211\u4eec\u77e5\u9053Python\u5728\u5f3a\u5927\u7684\u5728\u4e8e\u4ed6\u5f3a\u5927\u7684\u6a21\u5757\u529f\u80fd\uff0c\u4e0d\u8bba\u4f60\u60f3\u505a\u4ec0\u4e48\u90fd\u6709\u76f8\u5e94\u7684\u8f6e\u5b50\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u4eca\u5929\u4ecb\u7ecd\u7684\u662f\u4e13\u95e8\u7528\u6237\u8fde\u63a5Oracle\u6570\u636e\u7684\u4e00\u4e2a\u6a21\u5757  \u4e0b\u8f7d\u5730\u5740  \u8fd9\u91cc\u6211\u4eec\u9009\u62e9Linux\u7248\u672c\u3002",
            "title": "2.\u4e0b\u8f7dcx_Oracle\u6a21\u5757"
        },
        {
            "location": "/1.2/#3cx_oracleroot",
            "text": "\u4e0b\u8f7d\u5b8c\u6210\u540e\u6211\u4eec\u5b89\u88c5  tar zxvf cx_Oracle-5.2.1.tar.gz\ncd cx_Oracle-5.2.1\npython setup.py build\npython setup.py  install  \u9a8c\u8bc1\u5b89\u88c5  \u5982import\u65e0\u9519\u8bef\u5219\u8bf4\u660e\u5b89\u88c5\u6210\u529f  \u81f3\u6b64cx_Oracle\u6a21\u5757\u5df2\u7ecf\u5b89\u88c5\u5b8c\u6210\uff0c\u4e0b\u671f\u8bb2\u4ecb\u7ecd\u5982\u4f55\u5229\u7528cx_Oracle\u6a21\u5757\u8fde\u63a5Oracle\u6570\u636e\u5e93",
            "title": "3.\u5b89\u88c5cx_Oracle\u6a21\u5757(root\u7528\u6237)"
        },
        {
            "location": "/1.3/",
            "text": "\u4f7f\u7528cx_Oracle\u8fde\u63a5Oracle(\u57fa\u7840\u7bc7)\n\n\n\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5b89\u88c5cx_Oracle\uff0c\u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Python \u6a21\u5757cx_Oracle \u8fde\u63a5Oracle\u6570\u636e\u5e93\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8\n\n\nPython\u73af\u5883\u4e3a Python 3.6\n\n\nOracle \u6a21\u5757:cx_Oracle\n\n\n\u4f7f\u7528cx_Oracle\u8fde\u63a5Oracle\n\n\n\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u547d\u540d\u4e3aconnectoracle.py,\u5185\u5bb9\u5982\u4e0b\n\n\n#!/usr/bin/python\n#coding=utf8\n\n#\u5bfc\u5165cx_Oracle\u6a21\u5757\nimport cx_Oracle\n\n#\u521b\u5efa\u5230Oracle\u6570\u636e\u5e93\u7684\u8fde\u63a5\u5e76\u8d4b\u7ed9\u53d8\u91cf\ndb=cx_Oracle.connect('dcb2b/dcb2b@10.65.1.119:1521/dcprod')\n\n#\u521b\u5efa\u6e38\u6807\u5e76\u8d4b\u7ed9\u53d8\u91cfcursor\ncursor=db.cursor()\n\n#\u6267\u884cOracle SQL\u8bed\u53e5\ncursor.execute('select sysdate from dual')\n\n#\u83b7\u53d6\u6267\u884c\u7ed3\u679c\u5e76\u8d4b\u7ed9\u53d8\u91cfdata\n#\u8fd9\u91ccfetchone\u8868\u793a\u83b7\u53d6\u4e00\u884c\uff0cfetchall\u4e3a\u83b7\u53d6\u6240\u6709\u884c\n#fetchone\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\n#fetchall\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5217\u8868,\u54ea\u6015\u7ed3\u679c\u53ea\u6709\u4e00\u884c\ndata=cursor.fetchone()\n\n\n#\u6253\u5370\u7ed3\u679c\n\nprint ('Database time: %s ' %data)\n\n#\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\n\ncursor.close()\ndb.close()\n\n\n\n\n\n\u8fd0\u884c\u7ed3\u679c \n\n\n[oracle@asensvr-monitor script]$ python connectoracle.py \nDatabase time: 2017-09-29 14:28:47\n\n\n\n\n\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u6b63\u786e\u6267\u884c\u5e76\u8fd4\u56de\u7ed3\u679c\u4e86\n\n\n\u81f3\u6b64cx_Oracle\u6a21\u5757\u8fde\u63a5oracle(\u57fa\u7840\u7bc7)\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u4e0b\u671f\u8bb2\u4ecb\u7ecd\u5982\u4f55\u83b7\u53d6\u591a\u884c\u6570\u636e\u5e76\u901a\u8fc7\u51fd\u6570\u6765\u8c03\u7528\u3002",
            "title": "3.cx_Oracle\u6a21\u5757\u8fde\u63a5oracle(\u57fa\u7840\u7bc7)"
        },
        {
            "location": "/1.3/#cx_oracleoracle",
            "text": "\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5b89\u88c5cx_Oracle\uff0c\u8fd9\u8282\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Python \u6a21\u5757cx_Oracle \u8fde\u63a5Oracle\u6570\u636e\u5e93  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8  Python\u73af\u5883\u4e3a Python 3.6  Oracle \u6a21\u5757:cx_Oracle",
            "title": "\u4f7f\u7528cx_Oracle\u8fde\u63a5Oracle(\u57fa\u7840\u7bc7)"
        },
        {
            "location": "/1.3/#cx_oracleoracle_1",
            "text": "\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u547d\u540d\u4e3aconnectoracle.py,\u5185\u5bb9\u5982\u4e0b  #!/usr/bin/python\n#coding=utf8\n\n#\u5bfc\u5165cx_Oracle\u6a21\u5757\nimport cx_Oracle\n\n#\u521b\u5efa\u5230Oracle\u6570\u636e\u5e93\u7684\u8fde\u63a5\u5e76\u8d4b\u7ed9\u53d8\u91cf\ndb=cx_Oracle.connect('dcb2b/dcb2b@10.65.1.119:1521/dcprod')\n\n#\u521b\u5efa\u6e38\u6807\u5e76\u8d4b\u7ed9\u53d8\u91cfcursor\ncursor=db.cursor()\n\n#\u6267\u884cOracle SQL\u8bed\u53e5\ncursor.execute('select sysdate from dual')\n\n#\u83b7\u53d6\u6267\u884c\u7ed3\u679c\u5e76\u8d4b\u7ed9\u53d8\u91cfdata\n#\u8fd9\u91ccfetchone\u8868\u793a\u83b7\u53d6\u4e00\u884c\uff0cfetchall\u4e3a\u83b7\u53d6\u6240\u6709\u884c\n#fetchone\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\n#fetchall\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5217\u8868,\u54ea\u6015\u7ed3\u679c\u53ea\u6709\u4e00\u884c\ndata=cursor.fetchone()\n\n\n#\u6253\u5370\u7ed3\u679c\n\nprint ('Database time: %s ' %data)\n\n#\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\n\ncursor.close()\ndb.close()  \u8fd0\u884c\u7ed3\u679c   [oracle@asensvr-monitor script]$ python connectoracle.py \nDatabase time: 2017-09-29 14:28:47  \u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u6b63\u786e\u6267\u884c\u5e76\u8fd4\u56de\u7ed3\u679c\u4e86  \u81f3\u6b64cx_Oracle\u6a21\u5757\u8fde\u63a5oracle(\u57fa\u7840\u7bc7)\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u4e0b\u671f\u8bb2\u4ecb\u7ecd\u5982\u4f55\u83b7\u53d6\u591a\u884c\u6570\u636e\u5e76\u901a\u8fc7\u51fd\u6570\u6765\u8c03\u7528\u3002",
            "title": "\u4f7f\u7528cx_Oracle\u8fde\u63a5Oracle"
        },
        {
            "location": "/1.4/",
            "text": "[Python\u8fd0\u7ef4]\u4f7f\u7528cx_Oracle\u8fde\u63a5Oracle(\u9ad8\u7ea7\u7bc7)\n\n\n\u8fd9\u8282\u7684\u5185\u5bb9\u8f83\u591a\uff0c\u5206\u522b\u662f: \n\n\n\n\n\u4f7f\u7528sys\u7528\u6237\u8fde\u63a5Oracle\u6570\u636e\u5e93 \n\n\n\u901a\u8fc7\u51fd\u6570\u6267\u884cSQL\u8bed\u53e5 \n\n\n\u901a\u8fc7\u8bfb\u53d6\u6587\u4ef6\u5185\u7684\u5185\u5bb9\u6765\u6267\u884cSQL\u8bed\u53e5 \n\n\n\u4f7f\u7528Python \u6355\u83b7\u7a0b\u5e8f\u5f02\u5e38\n\n\n\n\n\u4f7f\u7528cx_Oracle\u83b7\u53d6oracle\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\n\n\n\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u547d\u540d\u4e3atablespace.sql,\u8be5\u6587\u4ef6\u7684\u5185\u5bb9\u662f\u83b7\u53d6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387:\n\n\n\u6587\u4ef6\u8def\u5f84\u4e3a:/home/oracle/script/tablespace.sql\n\n\nselect a.tablespace_name,a.bytes/1024/ 1024 \"Sum MB\",(a.bytes-b.bytes)/1024 /1024 \"used MB\"\n,b.bytes/ 1024/1024 \"free MB\",round(((a.bytes-b.bytes)/a.bytes)*100 ,2\n) \"percent_used\"\nfrom\n(select tablespace_name, sum(bytes) bytes from dba_data_files group by tablespace_name) a,\n(select tablespace_name, sum(bytes) bytes,max (bytes) largest from dba_free_space\n group by tablespace_name) b\nwhere a.tablespace_name=b.tablespace_name \n\n\n\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u4e0a\u4ee3\u7801\n\n\n#!/usr/bin/python\n#coding=utf8\nimport cx_Oracle\ndef oraclesql(cursor):\n    #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528python\u7684open\u65b9\u6cd5\u6253\u5f00\u6587\u4ef6\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3aSQL\u8bed\u53e5\u6267\u884c\n    #\u53ef\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\n    fp=open('/home/oracle/script/tablespace.sql','r')\n    #fp=open('./tablespace.sql','r')\n    fp1=fp.read()\n    cursor.execute(fp1)\n    data=cursor.fetchall()\n    return data\n\n\nif __name__==\"__main__\":\n\n    ipaddress='10.65.1.120'\n    username='sys'\n    password='sys_password'\n    port='1521'\n    tnsname='dctest'\n    #\u8fd9\u91cc\u6211\u4eec\u5229\u7528Python\u7684\u5f02\u5e38\u5904\u7406\u6765\u6355\u83b7\u5f02\u5e38\uff0c\u5177\u4f53\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u7ae0\u5f00\u59cb\u63d0\u5230\u7684\u6559\u7a0b\n    try:\n        #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528sysdba\u6743\u9650\u8fde\u63a5oracle\u6570\u636e\u5e93(\u548c\u4e0a\u671f\u8fde\u63a5\u666e\u901a\u7528\u6237\u7684\u4e0d\u540c)\n        db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n    except Exception as e:\n        content= (tnsname+' is Unreachable,The reason is '+ str(e)).strip()\n        print (content)\n    else:\n        cursor = db.cursor()\n        data=oraclesql(cursor)\n        cursor.close()\n        db.close()\n        #\u7531\u4e8e\u4e0a\u9762\u83b7\u53d6\u7684\u662f\u4e00\u4e2a\u5217\u8868(\u591a\u884c)\uff0c\u8fd9\u91cc\u4f7f\u7528for\u5faa\u73af\u6765\u904d\u5386\n        #\u6ce8\u610fi\u4e5f\u662f\u4e00\u4e2a\u5217\u8868\n        print ('\u8868\u7a7a\u95f4\u540d\u79f0 \u603b\u5927\u5c0f(M) \u5df2\u4f7f\u7528(M) \u5269\u4f59\u7a7a\u95f4(M) \u4f7f\u7528\u7387')\n        for i in data:\n            print (i)\n\n\n\n\n\u8fd0\u884c\u7ed3\u679c\n\n\n\u9996\u5148\u6211\u4eec\u6d4b\u8bd5\u4e0b\u6b63\u786e\u7684\u8f93\u51fa\u7ed3\u6784\n\n\n\n\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u83b7\u53d6\u5230\u4e86\u5404\u4e2a\u8868\u7a7a\u95f4\u7684\u540d\u79f0\n\n\n\u5f02\u5e38\u5904\u7406\u6d4b\u8bd5\n\n\n\u7136\u540e\u6211\u4eec\u6545\u610f\u8f93\u5165\u7ed9\u51fa\u9519\u8bef\u7684\u8fde\u63a5\u6761\u4ef6\u770b\u662f\u5426\u53ef\u4ee5\u6355\u83b7\u5f02\u5e38\n\n\n\u6211\u4eec\u5206\u522b\u8f93\u9519\u5bc6\u7801\u548ctns\u540d\u79f0\n\n\n[oracle@asensvr-monitor script]$ python connectoracle1.py \ndctest is Unreachable,The reason is ORA-01017: invalid username/password; logon denied\n\n\n[oracle@asensvr-monitor script]$ python connectoracle1.py \nd1ctest is Unreachable,The reason is ORA-12514: TNS:listener does not currently know of service requested in connect descriptor\n\n\n\n\n\n\u53ef\u4ee5\u770b\u51fa\u5df2\u7ecf\u6355\u83b7\u6210\u529f\n\n\n\u83b7\u53d6\u611f\u5174\u8da3\u7684\u5217\n\n\n\u6211\u4eec\u662f\u5229\u7528fetchall\u65b9\u6cd5\u6765\u83b7\u53d6\u6570\u636e\u7684\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5217\u8868(list)\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528i[0]\u7684\u65b9\u5f0f\u53ea\u53d6\u611f\u5174\u8da3\u7684\u5217\uff0c\u5982\u4e0b\u56fe\u6211\u4eec\u53ea\u83b7\u53d6\u8868\u7a7a\u95f4\u7684\u540d\u79f0\n\n\n\u53ea\u9700\u5c06\u4ee3\u7801\u6700\u540e\u4e00\u884c\u6539\u6210:print (i[0])\n\n\n\n\n\u81f3\u6b64cx_Oracle\u6a21\u5757\u8fde\u63a5oracle(\u9ad8\u7ea7\u7bc7)\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u4e0b\u671f\u4ecb\u7ecd\u4e00\u4e9b\u5b9e\u7528\u7684\u65e5\u5e38\u8fd0\u7ef4\u65b9\u9762\u7684\u547d\u4ee4\u3002\n\n\n\u540e\u7eed\u4f1a\u8bb2\u8ff0\u5982\u4f55\u5c06\u5f97\u5230\u7684\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4f9b\u65e5\u540e\u5206\u6790",
            "title": "4.\u4f7f\u7528cx_Oracle\u8fde\u63a5Oracle(\u9ad8\u7ea7\u7bc7)"
        },
        {
            "location": "/1.4/#pythoncx_oracleoracle",
            "text": "\u8fd9\u8282\u7684\u5185\u5bb9\u8f83\u591a\uff0c\u5206\u522b\u662f:    \u4f7f\u7528sys\u7528\u6237\u8fde\u63a5Oracle\u6570\u636e\u5e93   \u901a\u8fc7\u51fd\u6570\u6267\u884cSQL\u8bed\u53e5   \u901a\u8fc7\u8bfb\u53d6\u6587\u4ef6\u5185\u7684\u5185\u5bb9\u6765\u6267\u884cSQL\u8bed\u53e5   \u4f7f\u7528Python \u6355\u83b7\u7a0b\u5e8f\u5f02\u5e38",
            "title": "[Python\u8fd0\u7ef4]\u4f7f\u7528cx_Oracle\u8fde\u63a5Oracle(\u9ad8\u7ea7\u7bc7)"
        },
        {
            "location": "/1.4/#cx_oracleoracle",
            "text": "\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u547d\u540d\u4e3atablespace.sql,\u8be5\u6587\u4ef6\u7684\u5185\u5bb9\u662f\u83b7\u53d6\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387:  \u6587\u4ef6\u8def\u5f84\u4e3a:/home/oracle/script/tablespace.sql  select a.tablespace_name,a.bytes/1024/ 1024 \"Sum MB\",(a.bytes-b.bytes)/1024 /1024 \"used MB\"\n,b.bytes/ 1024/1024 \"free MB\",round(((a.bytes-b.bytes)/a.bytes)*100 ,2\n) \"percent_used\"\nfrom\n(select tablespace_name, sum(bytes) bytes from dba_data_files group by tablespace_name) a,\n(select tablespace_name, sum(bytes) bytes,max (bytes) largest from dba_free_space\n group by tablespace_name) b\nwhere a.tablespace_name=b.tablespace_name   \u63a5\u4e0b\u6765\u6211\u4eec\u4e0a\u4ee3\u7801  #!/usr/bin/python\n#coding=utf8\nimport cx_Oracle\ndef oraclesql(cursor):\n    #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528python\u7684open\u65b9\u6cd5\u6253\u5f00\u6587\u4ef6\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3aSQL\u8bed\u53e5\u6267\u884c\n    #\u53ef\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\n    fp=open('/home/oracle/script/tablespace.sql','r')\n    #fp=open('./tablespace.sql','r')\n    fp1=fp.read()\n    cursor.execute(fp1)\n    data=cursor.fetchall()\n    return data\n\n\nif __name__==\"__main__\":\n\n    ipaddress='10.65.1.120'\n    username='sys'\n    password='sys_password'\n    port='1521'\n    tnsname='dctest'\n    #\u8fd9\u91cc\u6211\u4eec\u5229\u7528Python\u7684\u5f02\u5e38\u5904\u7406\u6765\u6355\u83b7\u5f02\u5e38\uff0c\u5177\u4f53\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u7ae0\u5f00\u59cb\u63d0\u5230\u7684\u6559\u7a0b\n    try:\n        #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528sysdba\u6743\u9650\u8fde\u63a5oracle\u6570\u636e\u5e93(\u548c\u4e0a\u671f\u8fde\u63a5\u666e\u901a\u7528\u6237\u7684\u4e0d\u540c)\n        db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n    except Exception as e:\n        content= (tnsname+' is Unreachable,The reason is '+ str(e)).strip()\n        print (content)\n    else:\n        cursor = db.cursor()\n        data=oraclesql(cursor)\n        cursor.close()\n        db.close()\n        #\u7531\u4e8e\u4e0a\u9762\u83b7\u53d6\u7684\u662f\u4e00\u4e2a\u5217\u8868(\u591a\u884c)\uff0c\u8fd9\u91cc\u4f7f\u7528for\u5faa\u73af\u6765\u904d\u5386\n        #\u6ce8\u610fi\u4e5f\u662f\u4e00\u4e2a\u5217\u8868\n        print ('\u8868\u7a7a\u95f4\u540d\u79f0 \u603b\u5927\u5c0f(M) \u5df2\u4f7f\u7528(M) \u5269\u4f59\u7a7a\u95f4(M) \u4f7f\u7528\u7387')\n        for i in data:\n            print (i)  \u8fd0\u884c\u7ed3\u679c  \u9996\u5148\u6211\u4eec\u6d4b\u8bd5\u4e0b\u6b63\u786e\u7684\u8f93\u51fa\u7ed3\u6784  \u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u83b7\u53d6\u5230\u4e86\u5404\u4e2a\u8868\u7a7a\u95f4\u7684\u540d\u79f0",
            "title": "\u4f7f\u7528cx_Oracle\u83b7\u53d6oracle\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387"
        },
        {
            "location": "/1.4/#_1",
            "text": "\u7136\u540e\u6211\u4eec\u6545\u610f\u8f93\u5165\u7ed9\u51fa\u9519\u8bef\u7684\u8fde\u63a5\u6761\u4ef6\u770b\u662f\u5426\u53ef\u4ee5\u6355\u83b7\u5f02\u5e38  \u6211\u4eec\u5206\u522b\u8f93\u9519\u5bc6\u7801\u548ctns\u540d\u79f0  [oracle@asensvr-monitor script]$ python connectoracle1.py \ndctest is Unreachable,The reason is ORA-01017: invalid username/password; logon denied\n\n\n[oracle@asensvr-monitor script]$ python connectoracle1.py \nd1ctest is Unreachable,The reason is ORA-12514: TNS:listener does not currently know of service requested in connect descriptor  \u53ef\u4ee5\u770b\u51fa\u5df2\u7ecf\u6355\u83b7\u6210\u529f",
            "title": "\u5f02\u5e38\u5904\u7406\u6d4b\u8bd5"
        },
        {
            "location": "/1.4/#_2",
            "text": "\u6211\u4eec\u662f\u5229\u7528fetchall\u65b9\u6cd5\u6765\u83b7\u53d6\u6570\u636e\u7684\uff0c\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5217\u8868(list)\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528i[0]\u7684\u65b9\u5f0f\u53ea\u53d6\u611f\u5174\u8da3\u7684\u5217\uff0c\u5982\u4e0b\u56fe\u6211\u4eec\u53ea\u83b7\u53d6\u8868\u7a7a\u95f4\u7684\u540d\u79f0  \u53ea\u9700\u5c06\u4ee3\u7801\u6700\u540e\u4e00\u884c\u6539\u6210:print (i[0])   \u81f3\u6b64cx_Oracle\u6a21\u5757\u8fde\u63a5oracle(\u9ad8\u7ea7\u7bc7)\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u4e0b\u671f\u4ecb\u7ecd\u4e00\u4e9b\u5b9e\u7528\u7684\u65e5\u5e38\u8fd0\u7ef4\u65b9\u9762\u7684\u547d\u4ee4\u3002  \u540e\u7eed\u4f1a\u8bb2\u8ff0\u5982\u4f55\u5c06\u5f97\u5230\u7684\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4f9b\u65e5\u540e\u5206\u6790",
            "title": "\u83b7\u53d6\u611f\u5174\u8da3\u7684\u5217"
        },
        {
            "location": "/1.5/",
            "text": "5.\u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6\n\n\n\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Python\u8fde\u63a5Oracle\u6570\u636e\u5e93\u5e76\u6267\u884c\u8bed\u53e5\n\n\n\u5176\u4e2d\u8bb2\u5230\u4e86\u5229\u7528\u67e5\u770b\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\uff0c\u8fd9\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u5229\u7528Python\u76d1\u63a7\u8fd9\u4e2a\u6570\u503c\uff0c\u7b49\u8d85\u8fc7\u9608\u503c\u540e\u53d1\u9001\u90ae\u4ef6\u901a\u77e5\u6211\u4eec\n\n\n\u8fd9\u8282\u5c31\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Python\u7684email\u6a21\u5757\u53d1\u9001\u90ae\u4ef6\n\n\n\u6ce8\u610f\u8be5\u6a21\u5757\u662f\u81ea\u5e26\u7684\uff0c\u65e0\u9700\u5b89\u88c5\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8\n\n\nPython\u73af\u5883\u4e3a Python 3.6\n\n\n\u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6\n\n\n\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u547d\u540d\u4e3asendmail.py,\u5185\u5bb9\u5982\u4e0b\n\n\n\u8def\u5f84\u4e3a:/home/oracle/script/sendmail.py\n\n\n#!/usr/bin/python\n#coding=utf-8\nimport smtplib\nimport os\nimport time\nfrom email.mime.text import MIMEText\nto_list=[\"<ezio_shi@aseglobal.com>\"]\n#to_list=[\"<1391111111@139.com>\"]\nmail_host=\"10.65.1.134\"  #\u8bbe\u7f6e\u670d\u52a1\u5668\nmail_user=\"ezio_shi\"    #\u7528\u6237\u540d\nmail_postfix=\"aseglobal.com\"  #\u53d1\u4ef6\u7bb1\u7684\u540e\u7f00\ndef send_mail(to_list,sub,content):  #to_list\uff1a\u6536\u4ef6\u4eba\uff1bsub\uff1a\u4e3b\u9898\uff1bcontent\uff1a\u90ae\u4ef6\u5185\u5bb9\n    me=\"<\"+mail_user+\"@\"+mail_postfix+\">\"   #\u8fd9\u91cc\u7684hello\u53ef\u4ee5\u4efb\u610f\u8bbe\u7f6e\uff0c\u6536\u5230\u4fe1\u540e\uff0c\u5c06\u6309\u7167\u8bbe\u7f6e\u663e\u793a\n    msg = MIMEText(content)    #\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3ahtml\u683c\u5f0f\u90ae\u4ef6\n    msg['Subject'] = sub    #\u8bbe\u7f6e\u4e3b\u9898\n    msg['From'] = me\n    msg['To'] = \";\".join(to_list)\n    try:\n        s = smtplib.SMTP()\n        s.connect(mail_host)  #\u8fde\u63a5smtp\u670d\u52a1\u5668\n        #s.set_debuglevel(1)\n        s.helo()\n        #s.starttls()\n        #s.login(mail_user,mail_pass)  #\u767b\u9646\u670d\u52a1\u5668,\u4e00\u822c\u516c\u53f8\u5185\u90e8\u65e0\u9700\u8ba4\u8bc1\n        s.sendmail(me, to_list, msg.as_string())  #\u53d1\u9001\u90ae\u4ef6\n        s.close()\n        return True\n    except Exception as  e:\n        print (str(e))\n        return False\nif __name__ == '__main__':\n    #\u591a\u4e2a\u6536\u4ef6\u4eba\u8bf7\u7528\u9017\u53f7\u9694\u5f00\n    content='\u8fd9\u91cc\u662f\u53d1\u9001\u7684\u5185\u5bb9'\n    sub='\u8fd9\u91cc\u662f\u90ae\u4ef6\u7684\u6807\u9898'\n    s=send_mail(to_list,sub,content)\n    print (s)\n\n\n\n\n\n\u6ce8\u610f\u6b64\u4ee3\u7801\u9002\u7528\u4e8e\u516c\u53f8\u5185\u90e8\u6709SMTP\u670d\u52a1\u5668\u7684\u60c5\u51b5\n\n\n\u8fd0\u884c\u7ed3\u679c\n\n\n\u5f53\u8fd4\u56de\u503c\u4e3aTrue\u65f6\u8bf4\u660e\u53d1\u9001\u6210\u529f\n\n\n[oracle@asensvr-monitor script]$ python sendmail.py \nTrue\n\n\n\n\n\u540c\u65f6\u4f1a\u6536\u5230\u4ee5\u4e0b\u90ae\u4ef6\n\n\n\n\n\u53ef\u4ee5\u770b\u5230\u53d1\u9001\u6210\u529f\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u81f3\u6b64\u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u4e0b\u8282\u8bb2\u8ff0\u5982\u4f55\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u4f7f\u7528\u7387",
            "title": "5.\u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6"
        },
        {
            "location": "/1.5/#5python",
            "text": "\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Python\u8fde\u63a5Oracle\u6570\u636e\u5e93\u5e76\u6267\u884c\u8bed\u53e5  \u5176\u4e2d\u8bb2\u5230\u4e86\u5229\u7528\u67e5\u770b\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\uff0c\u8fd9\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u5229\u7528Python\u76d1\u63a7\u8fd9\u4e2a\u6570\u503c\uff0c\u7b49\u8d85\u8fc7\u9608\u503c\u540e\u53d1\u9001\u90ae\u4ef6\u901a\u77e5\u6211\u4eec  \u8fd9\u8282\u5c31\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Python\u7684email\u6a21\u5757\u53d1\u9001\u90ae\u4ef6  \u6ce8\u610f\u8be5\u6a21\u5757\u662f\u81ea\u5e26\u7684\uff0c\u65e0\u9700\u5b89\u88c5  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8  Python\u73af\u5883\u4e3a Python 3.6",
            "title": "5.\u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6"
        },
        {
            "location": "/1.5/#python",
            "text": "\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u547d\u540d\u4e3asendmail.py,\u5185\u5bb9\u5982\u4e0b  \u8def\u5f84\u4e3a:/home/oracle/script/sendmail.py  #!/usr/bin/python\n#coding=utf-8\nimport smtplib\nimport os\nimport time\nfrom email.mime.text import MIMEText\nto_list=[\"<ezio_shi@aseglobal.com>\"]\n#to_list=[\"<1391111111@139.com>\"]\nmail_host=\"10.65.1.134\"  #\u8bbe\u7f6e\u670d\u52a1\u5668\nmail_user=\"ezio_shi\"    #\u7528\u6237\u540d\nmail_postfix=\"aseglobal.com\"  #\u53d1\u4ef6\u7bb1\u7684\u540e\u7f00\ndef send_mail(to_list,sub,content):  #to_list\uff1a\u6536\u4ef6\u4eba\uff1bsub\uff1a\u4e3b\u9898\uff1bcontent\uff1a\u90ae\u4ef6\u5185\u5bb9\n    me=\"<\"+mail_user+\"@\"+mail_postfix+\">\"   #\u8fd9\u91cc\u7684hello\u53ef\u4ee5\u4efb\u610f\u8bbe\u7f6e\uff0c\u6536\u5230\u4fe1\u540e\uff0c\u5c06\u6309\u7167\u8bbe\u7f6e\u663e\u793a\n    msg = MIMEText(content)    #\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3ahtml\u683c\u5f0f\u90ae\u4ef6\n    msg['Subject'] = sub    #\u8bbe\u7f6e\u4e3b\u9898\n    msg['From'] = me\n    msg['To'] = \";\".join(to_list)\n    try:\n        s = smtplib.SMTP()\n        s.connect(mail_host)  #\u8fde\u63a5smtp\u670d\u52a1\u5668\n        #s.set_debuglevel(1)\n        s.helo()\n        #s.starttls()\n        #s.login(mail_user,mail_pass)  #\u767b\u9646\u670d\u52a1\u5668,\u4e00\u822c\u516c\u53f8\u5185\u90e8\u65e0\u9700\u8ba4\u8bc1\n        s.sendmail(me, to_list, msg.as_string())  #\u53d1\u9001\u90ae\u4ef6\n        s.close()\n        return True\n    except Exception as  e:\n        print (str(e))\n        return False\nif __name__ == '__main__':\n    #\u591a\u4e2a\u6536\u4ef6\u4eba\u8bf7\u7528\u9017\u53f7\u9694\u5f00\n    content='\u8fd9\u91cc\u662f\u53d1\u9001\u7684\u5185\u5bb9'\n    sub='\u8fd9\u91cc\u662f\u90ae\u4ef6\u7684\u6807\u9898'\n    s=send_mail(to_list,sub,content)\n    print (s)  \u6ce8\u610f\u6b64\u4ee3\u7801\u9002\u7528\u4e8e\u516c\u53f8\u5185\u90e8\u6709SMTP\u670d\u52a1\u5668\u7684\u60c5\u51b5  \u8fd0\u884c\u7ed3\u679c  \u5f53\u8fd4\u56de\u503c\u4e3aTrue\u65f6\u8bf4\u660e\u53d1\u9001\u6210\u529f  [oracle@asensvr-monitor script]$ python sendmail.py \nTrue  \u540c\u65f6\u4f1a\u6536\u5230\u4ee5\u4e0b\u90ae\u4ef6   \u53ef\u4ee5\u770b\u5230\u53d1\u9001\u6210\u529f  \u6e90\u7801\u4f4d\u7f6e  https://github.com/bsbforever/wechat_oms  \u81f3\u6b64\u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u4e0b\u8282\u8bb2\u8ff0\u5982\u4f55\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u4f7f\u7528\u7387",
            "title": "\u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6"
        },
        {
            "location": "/1.6/",
            "text": "\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5e76\u53d1\u9001\u62a5\u8b66\n\n\n\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Python\u8fde\u63a5Oracle\u6570\u636e\u5e93\u5e76\u6267\u884c\u8bed\u53e5\u53ca\u53d1\u9001\u90ae\u4ef6\n\n\n\u5176\u4e2d\u8bb2\u5230\u4e86\u5229\u7528\u67e5\u770b\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\uff0c\u8fd9\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u5229\u7528Python\u76d1\u63a7\u8fd9\u4e2a\u6570\u503c\uff0c\u7b49\u8d85\u8fc7\u9608\u503c\u540e\u53d1\u9001\u90ae\u4ef6\u901a\u77e5\u6211\u4eec\n\n\n\u8fd9\u8282\u5c31\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Python\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5e76\u5728\u8d85\u8fc7\u9608\u503c\u7684\u65f6\u5019\u53d1\u9001\u90ae\u4ef6\u62a5\u8b66\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8\n\n\nPython\u73af\u5883\u4e3a Python 3.6\n\n\n\u4fee\u6539\u6536\u4ef6\u4eba\u81f3\u624b\u673a\u90ae\u7bb1\n\n\n\u4fee\u6539sendmail\u811a\u672c\u6536\u4ef6\u4eba\u81f3\u624b\u673a\u90ae\u7bb1\u53ef\u5728\u624b\u673a\u7aef\u6536\u5230\u77ed\u4fe1\n\n\n\u6587\u4ef6\u540d\u79f0:sendmail_phone.py\n\n\n#!/usr/bin/python\n#coding=utf-8\nimport smtplib\nimport os\nimport time\nfrom email.mime.text import MIMEText\nto_list=[\"<13911111111@139.com>\"]\nmail_host=\"10.65.1.134\"  #\u8bbe\u7f6e\u670d\u52a1\u5668\nmail_user=\"ezio_shi\"    #\u7528\u6237\u540d\nmail_postfix=\"aseglobal.com\"  #\u53d1\u4ef6\u7bb1\u7684\u540e\u7f00\ndef send_mail(to_list,sub,content):  #to_list\uff1a\u6536\u4ef6\u4eba\uff1bsub\uff1a\u4e3b\u9898\uff1bcontent\uff1a\u90ae\u4ef6\u5185\u5bb9\n    me=\"<\"+mail_user+\"@\"+mail_postfix+\">\"   #\u8fd9\u91cc\u7684hello\u53ef\u4ee5\u4efb\u610f\u8bbe\u7f6e\uff0c\u6536\u5230\u4fe1\u540e\uff0c\u5c06\u6309\u7167\u8bbe\u7f6e\u663e\u793a\n    msg = MIMEText(content)    #\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3ahtml\u683c\u5f0f\u90ae\u4ef6\n    msg['Subject'] = sub    #\u8bbe\u7f6e\u4e3b\u9898\n    msg['From'] = me\n    msg['To'] = \";\".join(to_list)\n    try:\n        s = smtplib.SMTP()\n        s.connect(mail_host)  #\u8fde\u63a5smtp\u670d\u52a1\u5668\n        #s.set_debuglevel(1)\n        s.helo()\n        #s.starttls()\n        #s.login(mail_user,mail_pass)  #\u767b\u9646\u670d\u52a1\u5668,\u4e00\u822c\u516c\u53f8\u5185\u90e8\u65e0\u9700\u8ba4\u8bc1\n        s.sendmail(me, to_list, msg.as_string())  #\u53d1\u9001\u90ae\u4ef6\n        s.close()\n        return True\n    except Exception as  e:\n        print (str(e))\n        return False\n\n\n\n\n\n\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5e76\u53d1\u9001\u62a5\u8b66\u4fe1\u606f\n\n\n\u6587\u4ef6\u540d\u79f0:checktablespace.py\n\n\n\n#!/usr/bin/python\n#coding=utf8\nimport cx_Oracle\nfrom sendmail_phone import *\ndef oraclesql(cursor):\n    #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528python\u7684open\u65b9\u6cd5\u6253\u5f00\u6587\u4ef6\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3aSQL\u8bed\u53e5\u6267\u884c\n    #\u53ef\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\n    fp=open('/home/oracle/script/tablespace.sql','r')\n    #fp=open('./tablespace.sql','r')\n    fp1=fp.read()\n    cursor.execute(fp1)\n    data=cursor.fetchall()\n    return data\n\n\nif __name__==\"__main__\":\n    mailcontent=[]\n    ipaddress='10.65.1.120'\n    username='sys'\n    password='ase_sys_n'\n    port='1521'\n    tnsname='dctest'\n    #\u8fd9\u91cc\u6211\u4eec\u5229\u7528Python\u7684\u5f02\u5e38\u5904\u7406\u6765\u6355\u83b7\u5f02\u5e38\uff0c\u5177\u4f53\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u7ae0\u5f00\u59cb\u63d0\u5230\u7684\u6559\u7a0b\n    try:\n        #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528sysdba\u6743\u9650\u8fde\u63a5oracle\u6570\u636e\u5e93(\u548c\u4e0a\u671f\u8fde\u63a5\u666e\u901a\u7528\u6237\u7684\u4e0d\u540c)\n        db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n    except Exception as e:\n        content= (tnsname+' is Unreachable,The reason is '+ str(e)).strip()\n        print (content)\n    else:\n        cursor = db.cursor()\n        data=oraclesql(cursor)\n        cursor.close()\n        db.close()\n        #\u8fd9\u91cc\u6211\u4eec\u68c0\u67e5\u6bcf\u4e2a\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\u662f\u5426\u5927\u4e8e90%\uff0c\u5982\u679c\u662f\u5219\u5c06\u4e00\u6761\u62a5\u8b66\u4fe1\u606f\u52a0\u5165\u5230mailcontent\u5217\u8868\n        for i in data:\n            usage=int(i[4])\n            if usage>=90:\n                tablespace=i[0]\n                mailcontent.append('Be Careful tablespace '+tablespace+' is '+str(usage)+'% Used!')\n        #\u8fd9\u91cc\u6211\u4eec\u5224\u65admailcontent\u957f\u5ea6\u662f\u5426\u4e3a0\uff0c\u4e0d\u4e3a0\u8bf4\u660e\u6709\u8d85\u8fc790%\u7684\u8868\u7a7a\u95f4\uff0c\u7136\u540e\u6211\u4eec\u53d1\u9001\u90ae\u4ef6\n        if len(mailcontent) != 0:\n            content='\\n'.join(mailcontent)\n            send_mail(to_list,' Tablespace usage warnning',content)\n\n\n\n\n\n\u8bbe\u7f6e\u5b9a\u65f6\u4efb\u52a1\n\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u628a\u4ed6\u8bbe\u6210\u81ea\u52a8\u4efb\u52a1\u5b9a\u671f\u6267\u884c\n\n\n\u5982\u4e0b\u5c31\u662f\u8bbe\u5b9a\u6bcf\u592912\u70b9\u68c0\u67e5\u4e00\u6b21\n\n\n\n\n\u8fd0\u884c\u7ed3\u679c\n\n\n\u5f53\u6709\u8868\u7a7a\u95f4\u8d85\u8fc7\u9608\u503c\u5373\u53ef\u6536\u5230\u77ed\u4fe1\n\n\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u4ee3\u7801\u653e\u5728\u6211\u7684github\u4e3b\u9875\uff0c\u6b22\u8fce\u5927\u5bb6\u67e5\u770b\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u81f3\u6b64\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u4e0b\u671f\u7f16\u5199\u6279\u91cf\u68c0\u67e5\u591a\u4e2a\u6570\u636e\u5e93\u811a\u672c\u3002",
            "title": "6.\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5e76\u53d1\u9001\u62a5\u8b66"
        },
        {
            "location": "/1.6/#oracle",
            "text": "\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Python\u8fde\u63a5Oracle\u6570\u636e\u5e93\u5e76\u6267\u884c\u8bed\u53e5\u53ca\u53d1\u9001\u90ae\u4ef6  \u5176\u4e2d\u8bb2\u5230\u4e86\u5229\u7528\u67e5\u770b\u8868\u7a7a\u95f4\u7684\u4f7f\u7528\u7387\uff0c\u8fd9\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u5229\u7528Python\u76d1\u63a7\u8fd9\u4e2a\u6570\u503c\uff0c\u7b49\u8d85\u8fc7\u9608\u503c\u540e\u53d1\u9001\u90ae\u4ef6\u901a\u77e5\u6211\u4eec  \u8fd9\u8282\u5c31\u8bb2\u8ff0\u5982\u4f55\u5229\u7528Python\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5e76\u5728\u8d85\u8fc7\u9608\u503c\u7684\u65f6\u5019\u53d1\u9001\u90ae\u4ef6\u62a5\u8b66  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8  Python\u73af\u5883\u4e3a Python 3.6",
            "title": "\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5e76\u53d1\u9001\u62a5\u8b66"
        },
        {
            "location": "/1.6/#_1",
            "text": "\u4fee\u6539sendmail\u811a\u672c\u6536\u4ef6\u4eba\u81f3\u624b\u673a\u90ae\u7bb1\u53ef\u5728\u624b\u673a\u7aef\u6536\u5230\u77ed\u4fe1  \u6587\u4ef6\u540d\u79f0:sendmail_phone.py  #!/usr/bin/python\n#coding=utf-8\nimport smtplib\nimport os\nimport time\nfrom email.mime.text import MIMEText\nto_list=[\"<13911111111@139.com>\"]\nmail_host=\"10.65.1.134\"  #\u8bbe\u7f6e\u670d\u52a1\u5668\nmail_user=\"ezio_shi\"    #\u7528\u6237\u540d\nmail_postfix=\"aseglobal.com\"  #\u53d1\u4ef6\u7bb1\u7684\u540e\u7f00\ndef send_mail(to_list,sub,content):  #to_list\uff1a\u6536\u4ef6\u4eba\uff1bsub\uff1a\u4e3b\u9898\uff1bcontent\uff1a\u90ae\u4ef6\u5185\u5bb9\n    me=\"<\"+mail_user+\"@\"+mail_postfix+\">\"   #\u8fd9\u91cc\u7684hello\u53ef\u4ee5\u4efb\u610f\u8bbe\u7f6e\uff0c\u6536\u5230\u4fe1\u540e\uff0c\u5c06\u6309\u7167\u8bbe\u7f6e\u663e\u793a\n    msg = MIMEText(content)    #\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3ahtml\u683c\u5f0f\u90ae\u4ef6\n    msg['Subject'] = sub    #\u8bbe\u7f6e\u4e3b\u9898\n    msg['From'] = me\n    msg['To'] = \";\".join(to_list)\n    try:\n        s = smtplib.SMTP()\n        s.connect(mail_host)  #\u8fde\u63a5smtp\u670d\u52a1\u5668\n        #s.set_debuglevel(1)\n        s.helo()\n        #s.starttls()\n        #s.login(mail_user,mail_pass)  #\u767b\u9646\u670d\u52a1\u5668,\u4e00\u822c\u516c\u53f8\u5185\u90e8\u65e0\u9700\u8ba4\u8bc1\n        s.sendmail(me, to_list, msg.as_string())  #\u53d1\u9001\u90ae\u4ef6\n        s.close()\n        return True\n    except Exception as  e:\n        print (str(e))\n        return False",
            "title": "\u4fee\u6539\u6536\u4ef6\u4eba\u81f3\u624b\u673a\u90ae\u7bb1"
        },
        {
            "location": "/1.6/#oracle_1",
            "text": "\u6587\u4ef6\u540d\u79f0:checktablespace.py  \n#!/usr/bin/python\n#coding=utf8\nimport cx_Oracle\nfrom sendmail_phone import *\ndef oraclesql(cursor):\n    #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528python\u7684open\u65b9\u6cd5\u6253\u5f00\u6587\u4ef6\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3aSQL\u8bed\u53e5\u6267\u884c\n    #\u53ef\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\n    fp=open('/home/oracle/script/tablespace.sql','r')\n    #fp=open('./tablespace.sql','r')\n    fp1=fp.read()\n    cursor.execute(fp1)\n    data=cursor.fetchall()\n    return data\n\n\nif __name__==\"__main__\":\n    mailcontent=[]\n    ipaddress='10.65.1.120'\n    username='sys'\n    password='ase_sys_n'\n    port='1521'\n    tnsname='dctest'\n    #\u8fd9\u91cc\u6211\u4eec\u5229\u7528Python\u7684\u5f02\u5e38\u5904\u7406\u6765\u6355\u83b7\u5f02\u5e38\uff0c\u5177\u4f53\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u7ae0\u5f00\u59cb\u63d0\u5230\u7684\u6559\u7a0b\n    try:\n        #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528sysdba\u6743\u9650\u8fde\u63a5oracle\u6570\u636e\u5e93(\u548c\u4e0a\u671f\u8fde\u63a5\u666e\u901a\u7528\u6237\u7684\u4e0d\u540c)\n        db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n    except Exception as e:\n        content= (tnsname+' is Unreachable,The reason is '+ str(e)).strip()\n        print (content)\n    else:\n        cursor = db.cursor()\n        data=oraclesql(cursor)\n        cursor.close()\n        db.close()\n        #\u8fd9\u91cc\u6211\u4eec\u68c0\u67e5\u6bcf\u4e2a\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\u662f\u5426\u5927\u4e8e90%\uff0c\u5982\u679c\u662f\u5219\u5c06\u4e00\u6761\u62a5\u8b66\u4fe1\u606f\u52a0\u5165\u5230mailcontent\u5217\u8868\n        for i in data:\n            usage=int(i[4])\n            if usage>=90:\n                tablespace=i[0]\n                mailcontent.append('Be Careful tablespace '+tablespace+' is '+str(usage)+'% Used!')\n        #\u8fd9\u91cc\u6211\u4eec\u5224\u65admailcontent\u957f\u5ea6\u662f\u5426\u4e3a0\uff0c\u4e0d\u4e3a0\u8bf4\u660e\u6709\u8d85\u8fc790%\u7684\u8868\u7a7a\u95f4\uff0c\u7136\u540e\u6211\u4eec\u53d1\u9001\u90ae\u4ef6\n        if len(mailcontent) != 0:\n            content='\\n'.join(mailcontent)\n            send_mail(to_list,' Tablespace usage warnning',content)",
            "title": "\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5e76\u53d1\u9001\u62a5\u8b66\u4fe1\u606f"
        },
        {
            "location": "/1.6/#_2",
            "text": "\u63a5\u4e0b\u6765\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u628a\u4ed6\u8bbe\u6210\u81ea\u52a8\u4efb\u52a1\u5b9a\u671f\u6267\u884c  \u5982\u4e0b\u5c31\u662f\u8bbe\u5b9a\u6bcf\u592912\u70b9\u68c0\u67e5\u4e00\u6b21",
            "title": "\u8bbe\u7f6e\u5b9a\u65f6\u4efb\u52a1"
        },
        {
            "location": "/1.6/#_3",
            "text": "\u5f53\u6709\u8868\u7a7a\u95f4\u8d85\u8fc7\u9608\u503c\u5373\u53ef\u6536\u5230\u77ed\u4fe1   \u6e90\u7801\u4f4d\u7f6e  \u4ee3\u7801\u653e\u5728\u6211\u7684github\u4e3b\u9875\uff0c\u6b22\u8fce\u5927\u5bb6\u67e5\u770b  https://github.com/bsbforever/wechat_oms  \u81f3\u6b64\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5df2\u7ecf\u8bb2\u5b8c\uff0c\u4e0b\u671f\u7f16\u5199\u6279\u91cf\u68c0\u67e5\u591a\u4e2a\u6570\u636e\u5e93\u811a\u672c\u3002",
            "title": "\u8fd0\u884c\u7ed3\u679c"
        },
        {
            "location": "/1.7/",
            "text": "\u81ea\u52a8\u5316\u76d1\u63a7\u591a\u4e2aOracle\u8868\u7a7a\u95f4\n\n\n\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Python\u81ea\u52a8\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\n\n\n\u8fd9\u8282\u4f1a\u5229\u7528\u4e00\u4e2a\u5faa\u73af\u4e00\u6b21\u6027\u67e5\u8be2\u591a\u4e2a\u8868\u7a7a\u95f4\u4f7f\u7528\u7387\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8\n\n\nPython\u73af\u5883\u4e3a Python 3.6\n\n\norale\u4fe1\u606f\u6587\u4ef6\n\n\n\u5176\u6b21\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u6587\u672c\u6587\u4ef6\u5b58\u653e\u591a\u4e2a\u6570\u636e\u5e93\u7684\u4fe1\u606f\n\n\n\u6ce8\u610f\u6700\u540e\u4e00\u884c\u4e0d\u80fd\u662f\u7a7a\u767d\u884c\n\n\n\u6587\u4ef6\u540d\u79f0:/home/oracle/script/oracle_list.txt\n\n\n10.65.1.120  sys sys_password   1521  dctest\n10.60.14.70  sys sys_password   1527   np1\n\n\n\n\n\u6700\u7ec8\u7a0b\u5e8f\n\n\n\u6587\u4ef6\u540d\u79f0:/home/oracle/script/checktablespace_multiple.py\n\n\n#!/usr/bin/python\n#coding=utf8\nimport cx_Oracle\nfrom sendmail_phone import *\ndef oraclesql(cursor):\n    #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528python\u7684open\u65b9\u6cd5\u6253\u5f00\u6587\u4ef6\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3aSQL\u8bed\u53e5\u6267\u884c\n    #\u53ef\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\n    fp=open('/home/oracle/script/tablespace.sql','r')\n    #fp=open('./tablespace.sql','r')\n    fp1=fp.read()\n    cursor.execute(fp1)\n    data=cursor.fetchall()\n    return data\n\n\nif __name__==\"__main__\":\n    mailcontent=[]\n    #\u8fd9\u91cc\u6253\u5f00oracle_list\u6587\u4ef6\u5e76\u8bfb\u53d6\u5176\u4e2d\u5185\u5bb9 \n    file1=open(r\"/home/oracle/script/oracle_list.txt\")\n    oracle_list=file1.readlines()\n    file1.close()\n    #\u5faa\u73af\u8bfb\u53d6\u6bcf\u884c\u7684\u5185\u5bb9\u5e76\u4f7f\u7528split\u51fd\u6570\u83b7\u53d6\u5230\u76f8\u5173\u6570\u636e\u5e93\u4fe1\u606f\n    for i in oracle_list:\n        info=i.split()\n        ipaddress=info[0].strip()\n        username=info[1].strip()\n        password=info[2].strip()\n        port=info[3].strip()\n        tnsname=info[4].strip()\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception as e:\n            content= (tnsname+' is Unreachable,The reason is '+ str(e)).strip()\n            mailcontent.append(content)\n        else:\n            cursor = db.cursor()\n            data=oraclesql(cursor)\n            cursor.close()\n            db.close()\n            for i in data:\n                usage=int(i[4])\n                if usage>=90:\n                    tablespace=i[0]\n                    mailcontent.append('Be Careful tablespace '+tablespace+' on '+tnsname+' is '+str(usage)+'% Used!')\n        #\u8fd9\u91cc\u6211\u4eec\u5224\u65admailcontent\u957f\u5ea6\u662f\u5426\u4e3a0\uff0c\u4e0d\u4e3a0\u8bf4\u660e\u6709\u8d85\u8fc790%\u7684\u8868\u7a7a\u95f4\uff0c\u7136\u540e\u6211\u4eec\u53d1\u9001\u90ae\u4ef6\n    if len(mailcontent) != 0:\n        content='\\n'.join(mailcontent)\n        send_mail(to_list,' Tablespace usage warnning',content)\n\n\n\n\n\n\u8fd0\u884c\u7ed3\u679c\n\n\n\n\n\u5f53\u6709\u8868\u7a7a\u95f4\u8d85\u8fc7\u9608\u503c\u5373\u53ef\u6536\u5230\u77ed\u4fe1\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u4ee3\u7801\u653e\u5728\u6211\u7684github\u4e3b\u9875\uff0c\u6b22\u8fce\u5927\u5bb6\u67e5\u770b\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u81f3\u6b64\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5df2\u7ecf\u8bb2\u5b8c\u3002\u4e0b\u671f\u5f85\u5b9a~",
            "title": "7.\u81ea\u52a8\u5316\u76d1\u63a7\u591a\u4e2aOracle\u8868\u7a7a\u95f4"
        },
        {
            "location": "/1.7/#oracle",
            "text": "\u4e0a\u8282\u8bb2\u4e86\u5982\u4f55\u5229\u7528Python\u81ea\u52a8\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u4f7f\u7528\u7387  \u8fd9\u8282\u4f1a\u5229\u7528\u4e00\u4e2a\u5faa\u73af\u4e00\u6b21\u6027\u67e5\u8be2\u591a\u4e2a\u8868\u7a7a\u95f4\u4f7f\u7528\u7387  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8  Python\u73af\u5883\u4e3a Python 3.6",
            "title": "\u81ea\u52a8\u5316\u76d1\u63a7\u591a\u4e2aOracle\u8868\u7a7a\u95f4"
        },
        {
            "location": "/1.7/#orale",
            "text": "\u5176\u6b21\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684\u6587\u672c\u6587\u4ef6\u5b58\u653e\u591a\u4e2a\u6570\u636e\u5e93\u7684\u4fe1\u606f  \u6ce8\u610f\u6700\u540e\u4e00\u884c\u4e0d\u80fd\u662f\u7a7a\u767d\u884c  \u6587\u4ef6\u540d\u79f0:/home/oracle/script/oracle_list.txt  10.65.1.120  sys sys_password   1521  dctest\n10.60.14.70  sys sys_password   1527   np1",
            "title": "orale\u4fe1\u606f\u6587\u4ef6"
        },
        {
            "location": "/1.7/#_1",
            "text": "\u6587\u4ef6\u540d\u79f0:/home/oracle/script/checktablespace_multiple.py  #!/usr/bin/python\n#coding=utf8\nimport cx_Oracle\nfrom sendmail_phone import *\ndef oraclesql(cursor):\n    #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528python\u7684open\u65b9\u6cd5\u6253\u5f00\u6587\u4ef6\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3aSQL\u8bed\u53e5\u6267\u884c\n    #\u53ef\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\n    fp=open('/home/oracle/script/tablespace.sql','r')\n    #fp=open('./tablespace.sql','r')\n    fp1=fp.read()\n    cursor.execute(fp1)\n    data=cursor.fetchall()\n    return data\n\n\nif __name__==\"__main__\":\n    mailcontent=[]\n    #\u8fd9\u91cc\u6253\u5f00oracle_list\u6587\u4ef6\u5e76\u8bfb\u53d6\u5176\u4e2d\u5185\u5bb9 \n    file1=open(r\"/home/oracle/script/oracle_list.txt\")\n    oracle_list=file1.readlines()\n    file1.close()\n    #\u5faa\u73af\u8bfb\u53d6\u6bcf\u884c\u7684\u5185\u5bb9\u5e76\u4f7f\u7528split\u51fd\u6570\u83b7\u53d6\u5230\u76f8\u5173\u6570\u636e\u5e93\u4fe1\u606f\n    for i in oracle_list:\n        info=i.split()\n        ipaddress=info[0].strip()\n        username=info[1].strip()\n        password=info[2].strip()\n        port=info[3].strip()\n        tnsname=info[4].strip()\n        try:\n            db = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n        except Exception as e:\n            content= (tnsname+' is Unreachable,The reason is '+ str(e)).strip()\n            mailcontent.append(content)\n        else:\n            cursor = db.cursor()\n            data=oraclesql(cursor)\n            cursor.close()\n            db.close()\n            for i in data:\n                usage=int(i[4])\n                if usage>=90:\n                    tablespace=i[0]\n                    mailcontent.append('Be Careful tablespace '+tablespace+' on '+tnsname+' is '+str(usage)+'% Used!')\n        #\u8fd9\u91cc\u6211\u4eec\u5224\u65admailcontent\u957f\u5ea6\u662f\u5426\u4e3a0\uff0c\u4e0d\u4e3a0\u8bf4\u660e\u6709\u8d85\u8fc790%\u7684\u8868\u7a7a\u95f4\uff0c\u7136\u540e\u6211\u4eec\u53d1\u9001\u90ae\u4ef6\n    if len(mailcontent) != 0:\n        content='\\n'.join(mailcontent)\n        send_mail(to_list,' Tablespace usage warnning',content)",
            "title": "\u6700\u7ec8\u7a0b\u5e8f"
        },
        {
            "location": "/1.7/#_2",
            "text": "\u5f53\u6709\u8868\u7a7a\u95f4\u8d85\u8fc7\u9608\u503c\u5373\u53ef\u6536\u5230\u77ed\u4fe1  \u6e90\u7801\u4f4d\u7f6e  \u4ee3\u7801\u653e\u5728\u6211\u7684github\u4e3b\u9875\uff0c\u6b22\u8fce\u5927\u5bb6\u67e5\u770b  https://github.com/bsbforever/wechat_oms  \u81f3\u6b64\u81ea\u52a8\u5316\u76d1\u63a7Oracle\u8868\u7a7a\u95f4\u5df2\u7ecf\u8bb2\u5b8c\u3002\u4e0b\u671f\u5f85\u5b9a~",
            "title": "\u8fd0\u884c\u7ed3\u679c"
        },
        {
            "location": "/2.1/",
            "text": "MySQL\u5b89\u88c5\n\n\n\u8fd9\u4e2a\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u8bb2\u8fd9\u4e9b\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\u4e3a\u65e5\u540e\u6240\u7528\n\n\n\u65e0\u8bba\u662f\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8fd8\u662fNoSQL\uff0cMySQL\u73b0\u5728\u662f\u4ec5\u6b21\u4e0eOracle\u7684\u6570\u636e\u5e93\n\n\n\u7279\u522b\u662f\u88abOracle\u6536\u8d2d\u540e\u65e0\u8bba\u662f\u5927\u5c0f\u8fd8\u662f\u529f\u80fd\u90fd\u5728\u5411Oracle\u9760\u62e2\uff0c\u9ed8\u8ba4\u7684innodb\u5f15\u64ce\u652f\u6301\u4e8b\u52a1\u548cundo\u529f\u80fd\uff0c\u5927\u5927\u7b80\u5316\u4e86\u65e5\u5e38\u7684\u8fd0\u7ef4\u96be\u5ea6\n\n\n\u8fd9\u4e2a\u4e13\u9898\u5c06\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\nMySQL\u7248\u672c MySQL 5.7 (GA)\n\n\n\u5b89\u88c5MySQL\u6570\u636e\u5e93\n\n\n\u4e3a\u4e86\u7b80\u5316\u5b89\u88c5\u6211\u4eec\u91c7\u7528yum\u6e90\u7684\u65b9\u5f0f\u5b89\u88c5\uff0c\u8fd9\u91cc\u53c2\u7167\u7684\u662f\u5b98\u65b9\u7684\u5b89\u88c5\u624b\u518c\n\n\n\u5b98\u7f51\u5730\u5740:\n\n\nhttps://dev.mysql.com/doc/refman/5.7/en/linux-installation.html\n\n\n\u6ce8\u610f\uff1a\u5982\u679c\u662f\u5728\u516c\u53f8\u5185\u90e8\u5b89\u88c5\uff0c\u53ef\u80fd\u9632\u706b\u5899\u4f1a\u963b\u6b62yum\u7684\u7aef\u53e3\uff0c\u9700\u8ba9\u7f51\u8def\u7ba1\u7406\u5458\u653e\u884c\n\n\n\u4e0b\u8f7dyum\u6e90\n\n\nhttps://dev.mysql.com/downloads/repo/yum/\n\n\n\u8fd9\u91cc\u6211\u4eec\u9009\u62e9Red Hat 6\u7248\u672c\n\n\nwget https://dev.mysql.com/get/mysql57-community-release-el6-11.noarch.rpm\n\n\n\n\n\u5b89\u88c5yum\u6e90\n\n\n yum localinstall mysql57-community-release-el6-11.noarch.rpm\n\n\n\n\n\u5b89\u88c5MySQL\u6570\u636e\u5e93\n\n\nyum install mysql-community-server\n\n\n\n\n\u542f\u52a8\u6570\u636e\u5e93\n\n\nservice mysqld start\n\n\n\n\n\u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801\n\n\n\u9ed8\u8ba4\u5bc6\u7801\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u83b7\u53d6\n\n\n grep 'temporary password' /var/log/mysqld.log\n [Note] A temporary password is generated for root@localhost: lbUz9e3g8M,G\n\n\n\n\n\u767b\u9646MySQL\u5e76\u4fee\u6539\u5bc6\u7801\n\n\n\u6ce8\u610f\u5bc6\u7801\u6709\u590d\u6742\u5ea6\u9700\u6c42\n\n\nmysql -uroot -p\nmysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'passw@rd1';\n\n\n\n\n\u5176\u4ed6MySQL\u547d\u4ee4\n\n\nservice mysqld start\nservice mysqld stop\nservice mysqld status\n\n\n\n\n\u81f3\u6b64MySQL\u5df2\u7ecf\u5b89\u88c5\u5b8c\u6bd5\uff0c\u8fd9\u91cc\u53ea\u662f\u9ed8\u8ba4\u7684\u914d\u7f6e\uff0c\u8be6\u7ec6\u7684\u914d\u7f6e\u5982\u6587\u4ef6\u8def\u5f84\uff0cbuffer\u7b49\u53c2\u6570\u7684\u8bbe\u7f6e\u540e\u7eed\u518d\u8bb2 \n\n\n\u4e0b\u671f\u8bb2\u5982\u4f55\u5229\u7528Python\u8fde\u63a5MySQL\u6570\u636e\u5e93",
            "title": "1.MySQL\u5b89\u88c5"
        },
        {
            "location": "/2.1/#mysql",
            "text": "\u8fd9\u4e2a\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u8bb2\u8fd9\u4e9b\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\u4e3a\u65e5\u540e\u6240\u7528  \u65e0\u8bba\u662f\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8fd8\u662fNoSQL\uff0cMySQL\u73b0\u5728\u662f\u4ec5\u6b21\u4e0eOracle\u7684\u6570\u636e\u5e93  \u7279\u522b\u662f\u88abOracle\u6536\u8d2d\u540e\u65e0\u8bba\u662f\u5927\u5c0f\u8fd8\u662f\u529f\u80fd\u90fd\u5728\u5411Oracle\u9760\u62e2\uff0c\u9ed8\u8ba4\u7684innodb\u5f15\u64ce\u652f\u6301\u4e8b\u52a1\u548cundo\u529f\u80fd\uff0c\u5927\u5927\u7b80\u5316\u4e86\u65e5\u5e38\u7684\u8fd0\u7ef4\u96be\u5ea6  \u8fd9\u4e2a\u4e13\u9898\u5c06\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   MySQL\u7248\u672c MySQL 5.7 (GA)",
            "title": "MySQL\u5b89\u88c5"
        },
        {
            "location": "/2.1/#mysql_1",
            "text": "\u4e3a\u4e86\u7b80\u5316\u5b89\u88c5\u6211\u4eec\u91c7\u7528yum\u6e90\u7684\u65b9\u5f0f\u5b89\u88c5\uff0c\u8fd9\u91cc\u53c2\u7167\u7684\u662f\u5b98\u65b9\u7684\u5b89\u88c5\u624b\u518c  \u5b98\u7f51\u5730\u5740:  https://dev.mysql.com/doc/refman/5.7/en/linux-installation.html  \u6ce8\u610f\uff1a\u5982\u679c\u662f\u5728\u516c\u53f8\u5185\u90e8\u5b89\u88c5\uff0c\u53ef\u80fd\u9632\u706b\u5899\u4f1a\u963b\u6b62yum\u7684\u7aef\u53e3\uff0c\u9700\u8ba9\u7f51\u8def\u7ba1\u7406\u5458\u653e\u884c  \u4e0b\u8f7dyum\u6e90  https://dev.mysql.com/downloads/repo/yum/  \u8fd9\u91cc\u6211\u4eec\u9009\u62e9Red Hat 6\u7248\u672c  wget https://dev.mysql.com/get/mysql57-community-release-el6-11.noarch.rpm  \u5b89\u88c5yum\u6e90   yum localinstall mysql57-community-release-el6-11.noarch.rpm  \u5b89\u88c5MySQL\u6570\u636e\u5e93  yum install mysql-community-server  \u542f\u52a8\u6570\u636e\u5e93  service mysqld start  \u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801  \u9ed8\u8ba4\u5bc6\u7801\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u83b7\u53d6   grep 'temporary password' /var/log/mysqld.log\n [Note] A temporary password is generated for root@localhost: lbUz9e3g8M,G  \u767b\u9646MySQL\u5e76\u4fee\u6539\u5bc6\u7801  \u6ce8\u610f\u5bc6\u7801\u6709\u590d\u6742\u5ea6\u9700\u6c42  mysql -uroot -p\nmysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'passw@rd1';  \u5176\u4ed6MySQL\u547d\u4ee4  service mysqld start\nservice mysqld stop\nservice mysqld status  \u81f3\u6b64MySQL\u5df2\u7ecf\u5b89\u88c5\u5b8c\u6bd5\uff0c\u8fd9\u91cc\u53ea\u662f\u9ed8\u8ba4\u7684\u914d\u7f6e\uff0c\u8be6\u7ec6\u7684\u914d\u7f6e\u5982\u6587\u4ef6\u8def\u5f84\uff0cbuffer\u7b49\u53c2\u6570\u7684\u8bbe\u7f6e\u540e\u7eed\u518d\u8bb2   \u4e0b\u671f\u8bb2\u5982\u4f55\u5229\u7528Python\u8fde\u63a5MySQL\u6570\u636e\u5e93",
            "title": "\u5b89\u88c5MySQL\u6570\u636e\u5e93"
        },
        {
            "location": "/2.2/",
            "text": "\u4f7f\u7528Python\u8fde\u63a5MySQL\n\n\n\u8fd9\u4e2a\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u8bb2\u8fd9\u4e9b\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\u4e3a\u65e5\u540e\u6240\u7528\n\n\n\u4e0a\u8282\u8bb2\u5230\u5b89\u88c5MySQL\u6570\u636e\u5e93\uff0c\u8fd9\u8282\u8bb2\u5982\u4f55\u5229\u7528Python\u8fde\u63a5MySQL\u6570\u636e\u5e93\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\nMySQL\u7248\u672c MySQL 5.7 (GA) \n\n\n\u8fde\u63a5MySQL\u6a21\u5757:PyMySQL\n\n\n\u521b\u5efa\u6570\u636e\u5e93\n\n\n\u9996\u5148\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u7528\u4e8e\u5b58\u653e\u76d1\u63a7\u6570\u636e\n\n\n\u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u540d\u4e3aoracle\u6570\u636e\u5e93\n\n\n\u6ce8\u610f\uff1a\u4e00\u5b9a\u8981\u6709DEFAULT COLLATE utf8_general_ci \u9632\u6b62\u4e71\u7801\n\n\nmysql>CREATE DATABASE oracle\n  DEFAULT CHARACTER SET utf8\n  DEFAULT COLLATE utf8_general_ci;\n\n\n\n\n\u68c0\u67e5\u521a\u521b\u5efa\u7684\u6570\u636e\u5e93\n*\n\n\nmysql> show databases;\n\n\n\u521b\u5efa\u7528\u4e8e\u5b58\u653e\u76d1\u63a7\u6570\u636e\u7684\u8868\n\n\n\u8fd9\u91cc\u6211\u4eec\u65b0\u5efa\u4e00\u5f20oracle_indexmonitor\u7684\u8868\n\n\n\u5176\u4e2dindex_name\u4e3a\u4e3b\u952e,insert_time\u4e3a\u63d2\u5165\u65f6\u95f4\uff0c\u81ea\u52a8\u63d2\u5165\u5f53\u524d\u65f6\u95f4\n\n\n\u6ce8\u610f\uff1a\u8bf7\u4e00\u5b9a\u52a0\u4e0aCHARSET=utf8\u9632\u6b62\u4e71\u7801\n\n\nmysql -uroot -p\n\nmysql> use oracle\n\nmysql> CREATE TABLE oracle_indexmonitor(\n  index_name varchar(200) NOT NULL,\n  ipaddress varchar(39) NOT NULL,\n  tnsname varchar(100) NOT NULL,\n  inser_time timestamp default current_timestamp ,\n  PRIMARY KEY (index_name)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\n\n\u5b89\u88c5PyMySQL\u6a21\u5757\n\n\nyum install MySQL-python\npip3 install PyMySQL\n\n\n\n\n\u4f7f\u7528Python\u8fde\u63a5MySQL\n\n\n\u8fd9\u91cc\u65b0\u5efa\u4e2a\u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u4e3a:connectmysql.py\n\n\n#!/usr/bin/python\n#coding=utf8\nimport pymysql\n\n# \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\n\ndb = pymysql.connect(\"localhost\",\"root\",\"Oracle@123\",\"oracle\" )\n\n# \u4f7f\u7528 cursor() \u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u6e38\u6807\u5bf9\u8c61 cursor\ncursor = db.cursor()\n\n# \u4f7f\u7528 execute()  \u65b9\u6cd5\u6267\u884c SQL \u67e5\u8be2 \ncursor.execute(\"SELECT VERSION()\")\n\n# \u4f7f\u7528 fetchone() \u65b9\u6cd5\u83b7\u53d6\u5355\u6761\u6570\u636e.\ndata = cursor.fetchone()\n\nprint (\"Database version : %s \" % data)\n\n# \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\ncursor.close()\ndb.close()\n\n\n\n\n\n\u6267\u884c\u7ed3\u679c\n\n\n[oracle@asensvr-monitor script]$ python connectmysql.py \nDatabase version : 5.7.18 \n\n\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\n\n\u81f3\u6b64\u6211\u4eec\u5df2\u7ecf\u5b66\u4f1a\u4e86\u5982\u4f55\u5229\u7528Python\u6765\u8fde\u63a5MySQL\u6570\u636e\u5e93\n\n\n\u4e0b\u8282\u5c06\u5229\u7528python\u83b7\u53d6Oracle \u7d22\u5f15\u4fe1\u606f",
            "title": "2.\u4f7f\u7528Python\u8fde\u63a5MySQL"
        },
        {
            "location": "/2.2/#pythonmysql",
            "text": "\u8fd9\u4e2a\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u8bb2\u8fd9\u4e9b\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\u4e3a\u65e5\u540e\u6240\u7528  \u4e0a\u8282\u8bb2\u5230\u5b89\u88c5MySQL\u6570\u636e\u5e93\uff0c\u8fd9\u8282\u8bb2\u5982\u4f55\u5229\u7528Python\u8fde\u63a5MySQL\u6570\u636e\u5e93  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   MySQL\u7248\u672c MySQL 5.7 (GA)   \u8fde\u63a5MySQL\u6a21\u5757:PyMySQL",
            "title": "\u4f7f\u7528Python\u8fde\u63a5MySQL"
        },
        {
            "location": "/2.2/#_1",
            "text": "\u9996\u5148\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u7528\u4e8e\u5b58\u653e\u76d1\u63a7\u6570\u636e  \u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u540d\u4e3aoracle\u6570\u636e\u5e93  \u6ce8\u610f\uff1a\u4e00\u5b9a\u8981\u6709DEFAULT COLLATE utf8_general_ci \u9632\u6b62\u4e71\u7801  mysql>CREATE DATABASE oracle\n  DEFAULT CHARACTER SET utf8\n  DEFAULT COLLATE utf8_general_ci;  \u68c0\u67e5\u521a\u521b\u5efa\u7684\u6570\u636e\u5e93 *  mysql> show databases;",
            "title": "\u521b\u5efa\u6570\u636e\u5e93"
        },
        {
            "location": "/2.2/#_2",
            "text": "\u8fd9\u91cc\u6211\u4eec\u65b0\u5efa\u4e00\u5f20oracle_indexmonitor\u7684\u8868  \u5176\u4e2dindex_name\u4e3a\u4e3b\u952e,insert_time\u4e3a\u63d2\u5165\u65f6\u95f4\uff0c\u81ea\u52a8\u63d2\u5165\u5f53\u524d\u65f6\u95f4  \u6ce8\u610f\uff1a\u8bf7\u4e00\u5b9a\u52a0\u4e0aCHARSET=utf8\u9632\u6b62\u4e71\u7801  mysql -uroot -p\n\nmysql> use oracle\n\nmysql> CREATE TABLE oracle_indexmonitor(\n  index_name varchar(200) NOT NULL,\n  ipaddress varchar(39) NOT NULL,\n  tnsname varchar(100) NOT NULL,\n  inser_time timestamp default current_timestamp ,\n  PRIMARY KEY (index_name)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;",
            "title": "\u521b\u5efa\u7528\u4e8e\u5b58\u653e\u76d1\u63a7\u6570\u636e\u7684\u8868"
        },
        {
            "location": "/2.2/#pymysql",
            "text": "yum install MySQL-python\npip3 install PyMySQL",
            "title": "\u5b89\u88c5PyMySQL\u6a21\u5757"
        },
        {
            "location": "/2.2/#pythonmysql_1",
            "text": "\u8fd9\u91cc\u65b0\u5efa\u4e2a\u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u4e3a:connectmysql.py  #!/usr/bin/python\n#coding=utf8\nimport pymysql\n\n# \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\n\ndb = pymysql.connect(\"localhost\",\"root\",\"Oracle@123\",\"oracle\" )\n\n# \u4f7f\u7528 cursor() \u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u6e38\u6807\u5bf9\u8c61 cursor\ncursor = db.cursor()\n\n# \u4f7f\u7528 execute()  \u65b9\u6cd5\u6267\u884c SQL \u67e5\u8be2 \ncursor.execute(\"SELECT VERSION()\")\n\n# \u4f7f\u7528 fetchone() \u65b9\u6cd5\u83b7\u53d6\u5355\u6761\u6570\u636e.\ndata = cursor.fetchone()\n\nprint (\"Database version : %s \" % data)\n\n# \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\ncursor.close()\ndb.close()  \u6267\u884c\u7ed3\u679c  [oracle@asensvr-monitor script]$ python connectmysql.py \nDatabase version : 5.7.18   \u6e90\u7801\u4f4d\u7f6e  \u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u81f3\u6b64\u6211\u4eec\u5df2\u7ecf\u5b66\u4f1a\u4e86\u5982\u4f55\u5229\u7528Python\u6765\u8fde\u63a5MySQL\u6570\u636e\u5e93  \u4e0b\u8282\u5c06\u5229\u7528python\u83b7\u53d6Oracle \u7d22\u5f15\u4fe1\u606f",
            "title": "\u4f7f\u7528Python\u8fde\u63a5MySQL"
        },
        {
            "location": "/2.3/",
            "text": "\u4f7f\u7528Python\u83b7\u53d6Oracle\u7d22\u5f15\u4fe1\u606f\n\n\n\u8fd9\u4e2a\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u8bb2\u8fd9\u4e9b\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\u4e3a\u65e5\u540e\u6240\u7528\n\n\n\u4e0a\u8282\u8bb2\u5230\u5efa\u7acb\u4e00\u4e2aMySQL\u6570\u636e\u5e93\u5e76\u65b0\u5efa\u4e00\u5f20\u7528\u4e8e\u5b58\u653e\u7d22\u5f15\u4fe1\u606f\u7684\u8868\n\n\n\u4eca\u5929\u8bb2\u5982\u4f55\u83b7\u53d6Oracle\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u540d\u79f0\n\n\n\u73af\u5883\u8bbe\u7f6e\n \n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\nMySQL\u7248\u672c MySQL 5.7 (GA) \n\n\n\u8fde\u63a5Oracle\u6a21\u5757:cx_Oracle \n\n\n\u8fde\u63a5MySQL\u6a21\u5757:PyMySQL\n\n\n\u635e\u53d6\u539f\u7406\n\n\n\u7531\u4e8e\u6211\u4eec\u7684\u6267\u884c\u8ba1\u5212\u90fd\u5b58\u5728v$sql_plan\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u5b9a\u671f\u4ece\u8fd9\u4e2a\u89c6\u56fe\u4e2d\u83b7\u53d6\u7d22\u5f15\u4fe1\u606f\uff0c\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u7684\u79ef\u7d2f\u5373\u53ef\u77e5\u9053\u54ea\u4e9b\u7d22\u5f15\u6ca1\u88ab\u4f7f\u7528\u8fc7\n\n\n\u65b0\u5efa\u83b7\u53d6\u7d22\u5f15\u4fe1\u606f\u7684\u8bed\u53e5\n\n\n\u65b0\u5efa getindex.sql\u6587\u4ef6\uff0c\u8fd9\u91cc\u6211\u4eec\u4ecev$sql_plan\u89c6\u56fe\u4e2d\u83b7\u53d6\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u540d\u79f0\n\n\nselect DISTINCT OBJECT_OWNER, OBJECT_NAME\nfrom v$sql_plan\nwhere operation = 'INDEX'\nAND OBJECT_OwnER NOT IN ('SYS',\n'XDB',\n'SYSTEM',\n'ORDSYS',\n'MDSYS',\n'OUTLN',\n'TSMSYS',\n'DBSNMP',\n'WMSYS',\n'EXFSYS',\n'SYSMAN',\n'CTXSYS',\n'OLAPSYS',\n'FLOWS_FILES',\n'APEX_030200',\n'WKSYS',\n'SH',\n'QUEST',\n'QS_WS',\n'QS_OS',\n'QS_CS',\n'QS_CBADM',\n'QS',\n'PM',\n'PERFSTAT',\n'OE',\n'ODM',\n'HR',\n'QS_ES',\n'SCOTT')\n\n\n\n\n\u83b7\u53d6\u5df2\u4f7f\u7528\u7684\u7d22\u5f15\n\n\n\u8be5\u811a\u672c\u83b7\u53d6\u6240\u6709\u5728\u89c6\u56fe\u4e2d\u7684\u7d22\u5f15\u5e76\u628a\u7ed3\u679c\u5b58\u653e\u5728\u4e00\u4e2alist(\u5217\u8868)\u4e2d\n\n\n\u811a\u672c\u540d\u79f0\u4e3a checkindex.py\n\n\n\n\n\u8fd0\u884c\u7ed3\u679c\n\n\n\n\n\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u4ecev$sql_plan\u89c6\u56fe\u4e2d\u83b7\u53d6\u5230\u4e86\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u7684\u540d\u79f0\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u81f3\u6b64\u6211\u4eec\u5df2\u7ecf\u5b66\u4f1a\u4e86\u5982\u4f55\u5229\u7528Python\u83b7\u53d6oracle\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u540d\u79f0\n\n\n\u4e0b\u8282\u6211\u4eec\u8bb2\u5982\u4f55\u628a\u7ed3\u679c\u653e\u5230MySQL\u6570\u636e\u5e93\u4e2d",
            "title": "3.\u4f7f\u7528Python\u83b7\u53d6Oracle\u7d22\u5f15\u4fe1\u606f"
        },
        {
            "location": "/2.3/#pythonoracle",
            "text": "\u8fd9\u4e2a\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u8bb2\u8fd9\u4e9b\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\u4e3a\u65e5\u540e\u6240\u7528  \u4e0a\u8282\u8bb2\u5230\u5efa\u7acb\u4e00\u4e2aMySQL\u6570\u636e\u5e93\u5e76\u65b0\u5efa\u4e00\u5f20\u7528\u4e8e\u5b58\u653e\u7d22\u5f15\u4fe1\u606f\u7684\u8868  \u4eca\u5929\u8bb2\u5982\u4f55\u83b7\u53d6Oracle\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u540d\u79f0  \u73af\u5883\u8bbe\u7f6e    Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   MySQL\u7248\u672c MySQL 5.7 (GA)   \u8fde\u63a5Oracle\u6a21\u5757:cx_Oracle   \u8fde\u63a5MySQL\u6a21\u5757:PyMySQL",
            "title": "\u4f7f\u7528Python\u83b7\u53d6Oracle\u7d22\u5f15\u4fe1\u606f"
        },
        {
            "location": "/2.3/#_1",
            "text": "\u7531\u4e8e\u6211\u4eec\u7684\u6267\u884c\u8ba1\u5212\u90fd\u5b58\u5728v$sql_plan\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u5b9a\u671f\u4ece\u8fd9\u4e2a\u89c6\u56fe\u4e2d\u83b7\u53d6\u7d22\u5f15\u4fe1\u606f\uff0c\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u7684\u79ef\u7d2f\u5373\u53ef\u77e5\u9053\u54ea\u4e9b\u7d22\u5f15\u6ca1\u88ab\u4f7f\u7528\u8fc7",
            "title": "\u635e\u53d6\u539f\u7406"
        },
        {
            "location": "/2.3/#_2",
            "text": "\u65b0\u5efa getindex.sql\u6587\u4ef6\uff0c\u8fd9\u91cc\u6211\u4eec\u4ecev$sql_plan\u89c6\u56fe\u4e2d\u83b7\u53d6\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u540d\u79f0  select DISTINCT OBJECT_OWNER, OBJECT_NAME\nfrom v$sql_plan\nwhere operation = 'INDEX'\nAND OBJECT_OwnER NOT IN ('SYS',\n'XDB',\n'SYSTEM',\n'ORDSYS',\n'MDSYS',\n'OUTLN',\n'TSMSYS',\n'DBSNMP',\n'WMSYS',\n'EXFSYS',\n'SYSMAN',\n'CTXSYS',\n'OLAPSYS',\n'FLOWS_FILES',\n'APEX_030200',\n'WKSYS',\n'SH',\n'QUEST',\n'QS_WS',\n'QS_OS',\n'QS_CS',\n'QS_CBADM',\n'QS',\n'PM',\n'PERFSTAT',\n'OE',\n'ODM',\n'HR',\n'QS_ES',\n'SCOTT')",
            "title": "\u65b0\u5efa\u83b7\u53d6\u7d22\u5f15\u4fe1\u606f\u7684\u8bed\u53e5"
        },
        {
            "location": "/2.3/#_3",
            "text": "\u8be5\u811a\u672c\u83b7\u53d6\u6240\u6709\u5728\u89c6\u56fe\u4e2d\u7684\u7d22\u5f15\u5e76\u628a\u7ed3\u679c\u5b58\u653e\u5728\u4e00\u4e2alist(\u5217\u8868)\u4e2d  \u811a\u672c\u540d\u79f0\u4e3a checkindex.py",
            "title": "\u83b7\u53d6\u5df2\u4f7f\u7528\u7684\u7d22\u5f15"
        },
        {
            "location": "/2.3/#_4",
            "text": "\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u4ecev$sql_plan\u89c6\u56fe\u4e2d\u83b7\u53d6\u5230\u4e86\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u7684\u540d\u79f0  \u6e90\u7801\u4f4d\u7f6e  \u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u81f3\u6b64\u6211\u4eec\u5df2\u7ecf\u5b66\u4f1a\u4e86\u5982\u4f55\u5229\u7528Python\u83b7\u53d6oracle\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u540d\u79f0  \u4e0b\u8282\u6211\u4eec\u8bb2\u5982\u4f55\u628a\u7ed3\u679c\u653e\u5230MySQL\u6570\u636e\u5e93\u4e2d",
            "title": "\u8fd0\u884c\u7ed3\u679c"
        },
        {
            "location": "/2.4/",
            "text": "\u5c06Oracle\u5df2\u4f7f\u7528\u8fc7\u7d22\u5f15\u5b58\u5165MySQL\u4e2d\n\n\n\u8fd9\u4e2a\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u8bb2\u8fd9\u4e9b\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\u4e3a\u65e5\u540e\u6240\u7528\n\n\n\u4e0a\u8282\u8bb2\u5230\u5982\u4f55\u5229\u7528Python\u83b7\u53d6Oracle\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u540d\u79f0\n\n\n\u8fd9\u8282\u8bb2\u5982\u4f55\u5c06\u4ed6\u4eec\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d\n\n\n\u73af\u5883\u8bbe\u7f6e\n \n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\nMySQL\u7248\u672c MySQL 5.7 (GA) \n\n\n\u8fde\u63a5Oracle\u6a21\u5757:cx_Oracle \n\n\n\u8fde\u63a5MySQL\u6a21\u5757:PyMySQL\n\n\n\u5b58\u5165MySQL\u811a\u672c\u5185\u5bb9\n\n\n\u5c06\u4e0a\u8282\u83b7\u53d6Oracle\u7d22\u5f15\u7684\u811a\u672c\u589e\u52a0\u5b58\u5165MySQL\u6570\u636e\u5e93\u7684\u4ee3\u7801\n\n\n\u811a\u672c\u540d\u79f0\u4f9d\u7136\u4e3a:checkindex.py\n\n\n#!/usr/bin/python\n#coding=utf8\nimport cx_Oracle\nimport pymysql\nfrom sendmail_phone import *\n\ndef getindex(oracle_cursor):\n    fp=open('/home/oracle/script/getindex.sql','r')\n    fp1=fp.read()\n    s=oracle_cursor.execute(fp1)\n    fp.close()\n    result=[]\n    row=s.fetchall()\n    for i in row:\n        result.append(i[0]+'.'+i[1])\n    return result\n\nif __name__==\"__main__\":\n    mailcontent=[] \n    ipaddress='10.60.14.70'\n    username='sys'\n    password='sys_password'\n    port='1527'\n    tnsname='NP1'\n    #\u9996\u5148\u83b7\u53d6v$sql_plan\u4e2d\u7684\u7d22\u5f15\u540d\u79f0\u4fdd\u5b58\u81f3\u53d8\u91cfdata\n    try:\n        oracle = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n    except Exception as e:\n        content= (tnsname+' is Unreachable,The reason is '+ str(e)).strip()\n        print (content)\n    else:\n        oracle_cursor = oracle.cursor()\n        data=getindex(oracle_cursor)\n        oracle_cursor.close()\n        oracle.close()\n        #\u63a5\u4e0b\u6765\u8fde\u63a5\u672c\u5730MySQL\u6570\u636e\u5e93\n        mysql = pymysql.connect(\"localhost\",\"root\",\"Oracle@123\",\"oracle\" )\n        mysql_cursor = mysql.cursor()\n        #\u904d\u5386\u6bcf\u4e2a\u7d22\u5f15\n        for index in data:\n            #\u9996\u5148\u68c0\u67e5\u8be5\u7d22\u5f15\u662f\u5426\u5b58\u5728\u4e8e\u6570\u636e\u5e93\u4e2d\n            checkifexist='select count(*) from oracle_indexmonitor where index_name=\\''+index+'\\' and ipaddress=\\''+ipaddress+'\\' and tnsname=\\''+tnsname+'\\''\n            mysql_cursor.execute(checkifexist)\n            count = mysql_cursor.fetchone()\n            #\u5982\u7ed3\u679c\u7b49\u4e8e0\u8bf4\u660e\u8be5\u7d22\u5f15\u672a\u8bb0\u5f55\uff0c\u5219\u63d2\u5165\u5230MySQL\u6570\u636e\u5e93\u4e2d\n            if int(count[0])==0:\n                try:\n                    insertsql='insert into oracle_indexmonitor(index_name,ipaddress,tnsname) values(\\''+index+'\\',\\''+ipaddress+'\\',\\''+tnsname+'\\')'\n                    mysql_cursor.execute(insertsql)\n                    mysql.commit()\n                except:\n                    mysql.rollback()\n\n        mysql_cursor.close()\n        mysql.close()\n\n\n\n\n\n\u601d\u8def\u4e3a\u5148\u83b7\u53d6\u7d22\u5f15\u4fe1\u606f\n\n\n\n\n\n\n\u518d\u904d\u5386\u6bcf\u4e2a\u7d22\u5f15\n\n\n\n\n\n\n\u9488\u5bf9\u4e0d\u5728MySQL\u7684\u6570\u636e\u5e93\u7684\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d\n\n\n\n\n\n\n\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u7684\u8fd0\u884c\u5373\u53ef\u77e5\u9053\u54ea\u4e9b\u7d22\u5f15\u672a\u88ab\u4f7f\u7528\u8fc7\n\n\n\n\n\n\n\u8fd0\u884c\u7ed3\u679c\n\n\n\u8fd0\u884c\u5b8c\u811a\u672c\u540e\u6211\u4eec\u67e5\u770bMySQL\u6570\u636e\u5e93\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u8868\u91cc\u5e94\u8be5\u6709\u6570\u636e\uff0c\u800c\u4e14\u6ca1\u6709\u91cd\u590d\u6570\u636e\n\n\n\u7531\u4e8ev$sql_plan\u4e2d\u7684\u6570\u636e\u53ef\u80fd\u88ab\u5237\u51fa\u5185\u5b58\u7a7a\u95f4\uff0c\u6211\u4eec\u9700\u8981\u8f83\u4e3a\u9891\u7e41\u7684\u8fd0\u884c\u8be5\u7a0b\u5e8f\n\n\n\u6211\u5728\u5b9e\u9645\u76d1\u63a7\u4e2d\u662f\u6bcf\u9694\u5341\u4e94\u5206\u949f\uff0c\u5927\u5bb6\u53ef\u4ee5\u4f7f\u7528crontab \u6765\u8bbe\u5b9a\n\n\n\u8fd9\u6837\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4(\u534a\u5e74\u751a\u81f3\u4e00\u5e74)\uff0c\u53ef\u77e5\u9053\u54ea\u4e9b\u7d22\u5f15\u672a\u88ab\u4f7f\u7528\u8fc7\n\n\n\n\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u81f3\u6b64\u8be5\u4e13\u9898\u5df2\u7ecf\u8bb2\u89e3\u5b8c\u6bd5\uff0c\u4ecb\u7ecd\u4e86\u76d1\u63a7\u7d22\u5f15\u7684\u4e00\u79cd\u601d\u8def\uff0c\u65e5\u5e38\u8fd0\u7ef4\u4e2d\u53ef\u6a2a\u5411\u5c55\u5f00\u5bf9\u5176\u4ed6\u6307\u6807\u8fdb\u884c\u76d1\u63a7\uff0c\u8fd9\u4e2a\u4e0b\u6b21\u8bf4\u3002",
            "title": "4.\u5c06Oracle\u5df2\u4f7f\u7528\u8fc7\u7d22\u5f15\u5b58\u5165MySQL\u4e2d"
        },
        {
            "location": "/2.4/#oraclemysql",
            "text": "\u8fd9\u4e2a\u4e13\u9898\u8bb2\u8ff0\u5982\u4f55\u8bb2\u8fd9\u4e9b\u76d1\u63a7\u6570\u636e\u4fdd\u5b58\u5728MySQL\u4e2d\u4e3a\u65e5\u540e\u6240\u7528  \u4e0a\u8282\u8bb2\u5230\u5982\u4f55\u5229\u7528Python\u83b7\u53d6Oracle\u5df2\u4f7f\u7528\u8fc7\u7684\u7d22\u5f15\u540d\u79f0  \u8fd9\u8282\u8bb2\u5982\u4f55\u5c06\u4ed6\u4eec\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d  \u73af\u5883\u8bbe\u7f6e    Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   MySQL\u7248\u672c MySQL 5.7 (GA)   \u8fde\u63a5Oracle\u6a21\u5757:cx_Oracle   \u8fde\u63a5MySQL\u6a21\u5757:PyMySQL",
            "title": "\u5c06Oracle\u5df2\u4f7f\u7528\u8fc7\u7d22\u5f15\u5b58\u5165MySQL\u4e2d"
        },
        {
            "location": "/2.4/#mysql",
            "text": "\u5c06\u4e0a\u8282\u83b7\u53d6Oracle\u7d22\u5f15\u7684\u811a\u672c\u589e\u52a0\u5b58\u5165MySQL\u6570\u636e\u5e93\u7684\u4ee3\u7801  \u811a\u672c\u540d\u79f0\u4f9d\u7136\u4e3a:checkindex.py  #!/usr/bin/python\n#coding=utf8\nimport cx_Oracle\nimport pymysql\nfrom sendmail_phone import *\n\ndef getindex(oracle_cursor):\n    fp=open('/home/oracle/script/getindex.sql','r')\n    fp1=fp.read()\n    s=oracle_cursor.execute(fp1)\n    fp.close()\n    result=[]\n    row=s.fetchall()\n    for i in row:\n        result.append(i[0]+'.'+i[1])\n    return result\n\nif __name__==\"__main__\":\n    mailcontent=[] \n    ipaddress='10.60.14.70'\n    username='sys'\n    password='sys_password'\n    port='1527'\n    tnsname='NP1'\n    #\u9996\u5148\u83b7\u53d6v$sql_plan\u4e2d\u7684\u7d22\u5f15\u540d\u79f0\u4fdd\u5b58\u81f3\u53d8\u91cfdata\n    try:\n        oracle = cx_Oracle.connect(username+'/'+password+'@'+ipaddress+':'+port+'/'+tnsname ,mode=cx_Oracle.SYSDBA)\n    except Exception as e:\n        content= (tnsname+' is Unreachable,The reason is '+ str(e)).strip()\n        print (content)\n    else:\n        oracle_cursor = oracle.cursor()\n        data=getindex(oracle_cursor)\n        oracle_cursor.close()\n        oracle.close()\n        #\u63a5\u4e0b\u6765\u8fde\u63a5\u672c\u5730MySQL\u6570\u636e\u5e93\n        mysql = pymysql.connect(\"localhost\",\"root\",\"Oracle@123\",\"oracle\" )\n        mysql_cursor = mysql.cursor()\n        #\u904d\u5386\u6bcf\u4e2a\u7d22\u5f15\n        for index in data:\n            #\u9996\u5148\u68c0\u67e5\u8be5\u7d22\u5f15\u662f\u5426\u5b58\u5728\u4e8e\u6570\u636e\u5e93\u4e2d\n            checkifexist='select count(*) from oracle_indexmonitor where index_name=\\''+index+'\\' and ipaddress=\\''+ipaddress+'\\' and tnsname=\\''+tnsname+'\\''\n            mysql_cursor.execute(checkifexist)\n            count = mysql_cursor.fetchone()\n            #\u5982\u7ed3\u679c\u7b49\u4e8e0\u8bf4\u660e\u8be5\u7d22\u5f15\u672a\u8bb0\u5f55\uff0c\u5219\u63d2\u5165\u5230MySQL\u6570\u636e\u5e93\u4e2d\n            if int(count[0])==0:\n                try:\n                    insertsql='insert into oracle_indexmonitor(index_name,ipaddress,tnsname) values(\\''+index+'\\',\\''+ipaddress+'\\',\\''+tnsname+'\\')'\n                    mysql_cursor.execute(insertsql)\n                    mysql.commit()\n                except:\n                    mysql.rollback()\n\n        mysql_cursor.close()\n        mysql.close()  \u601d\u8def\u4e3a\u5148\u83b7\u53d6\u7d22\u5f15\u4fe1\u606f    \u518d\u904d\u5386\u6bcf\u4e2a\u7d22\u5f15    \u9488\u5bf9\u4e0d\u5728MySQL\u7684\u6570\u636e\u5e93\u7684\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d    \u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u7684\u8fd0\u884c\u5373\u53ef\u77e5\u9053\u54ea\u4e9b\u7d22\u5f15\u672a\u88ab\u4f7f\u7528\u8fc7",
            "title": "\u5b58\u5165MySQL\u811a\u672c\u5185\u5bb9"
        },
        {
            "location": "/2.4/#_1",
            "text": "\u8fd0\u884c\u5b8c\u811a\u672c\u540e\u6211\u4eec\u67e5\u770bMySQL\u6570\u636e\u5e93\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\u8868\u91cc\u5e94\u8be5\u6709\u6570\u636e\uff0c\u800c\u4e14\u6ca1\u6709\u91cd\u590d\u6570\u636e  \u7531\u4e8ev$sql_plan\u4e2d\u7684\u6570\u636e\u53ef\u80fd\u88ab\u5237\u51fa\u5185\u5b58\u7a7a\u95f4\uff0c\u6211\u4eec\u9700\u8981\u8f83\u4e3a\u9891\u7e41\u7684\u8fd0\u884c\u8be5\u7a0b\u5e8f  \u6211\u5728\u5b9e\u9645\u76d1\u63a7\u4e2d\u662f\u6bcf\u9694\u5341\u4e94\u5206\u949f\uff0c\u5927\u5bb6\u53ef\u4ee5\u4f7f\u7528crontab \u6765\u8bbe\u5b9a  \u8fd9\u6837\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4(\u534a\u5e74\u751a\u81f3\u4e00\u5e74)\uff0c\u53ef\u77e5\u9053\u54ea\u4e9b\u7d22\u5f15\u672a\u88ab\u4f7f\u7528\u8fc7    \u6e90\u7801\u4f4d\u7f6e  \u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u81f3\u6b64\u8be5\u4e13\u9898\u5df2\u7ecf\u8bb2\u89e3\u5b8c\u6bd5\uff0c\u4ecb\u7ecd\u4e86\u76d1\u63a7\u7d22\u5f15\u7684\u4e00\u79cd\u601d\u8def\uff0c\u65e5\u5e38\u8fd0\u7ef4\u4e2d\u53ef\u6a2a\u5411\u5c55\u5f00\u5bf9\u5176\u4ed6\u6307\u6807\u8fdb\u884c\u76d1\u63a7\uff0c\u8fd9\u4e2a\u4e0b\u6b21\u8bf4\u3002",
            "title": "\u8fd0\u884c\u7ed3\u679c"
        },
        {
            "location": "/3.1/",
            "text": "paramiko\u6a21\u5757\u7684\u5b89\u88c5\n\n\n\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u8fd0\u7528Python\u83b7\u53d6Oracle\u6570\u636e\u5e93\u7684\u4fe1\u606f\u4ee5\u53ca\u5c06\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d\n\n\n\u6211\u4eec\u77e5\u9053\u5bf9\u4e8e\u8fd0\u7ef4Oracle\u6570\u636e\u5e93\u4e0d\u80fd\u5ffd\u7565\u7cfb\u7edf\u7684\u6027\u80fd\u6307\u6807\u5305\u62ecCPU\u5185\u5b58\u7b49\n\n\n\u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807\n\n\n\u5176\u4e2dLinux\u9700\u8981\u5b89\u88c5sysstat\u5305\uff0c\u4e00\u822c\u90fd\u4f1a\u9ed8\u8ba4\u5b89\u88c5\uff0c\u6ca1\u6709\u8bf7\u5355\u72ec\u5b89\u88c5\n\n\nUnix\u7531\u4e8e\u6211\u516c\u53f8\u53ea\u6709HP-Unix\uff0c\u6240\u4ee5\u547d\u4ee4\u662f\u5728HP\u4e0a\u8fd0\u884c\u7684\uff0c\u5176\u4ed6Unix\u7cfb\u7edf\u8bf7\u4f7f\u7528\u5404\u81ea\u7684\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\n\u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko\n\n\nparamiko\u6a21\u5757\u7684\u5b89\u88c5\n\n\nPython\u4e2d\u8fde\u63a5Unix/linux\u670d\u52a1\u5668\u7684\u6a21\u5757\u6709\u5f88\u591a\uff0c\u4f8b\u5982pxssh\u7b49\uff0c\u4f46\u662f\u6211\u5728\u5b9e\u9645\u5199\u7a0b\u5e8f\u7684\u65f6\u5019\u53d1\u73b0\u4ed6\u4eec\u4f1a\u6709\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898\uff0c\u6700\u540e\u6311\u5230 paramiko\u8fd9\u4e2a\u6a21\u5757\uff0c\u5982\u5927\u5bb6\u6709\u66f4\u597d\u7684\u6b22\u8fce\u63a8\u8350\n\n\n\u8fd9\u91cc\u6211\u4eec\u91c7\u7528pip3\u547d\u4ee4\u5b89\u88c5\uff0c\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u7f3a\u5931\u7684\u6a21\u5757\n\n\npip3 install paramiko\n\n\n\n\n\n\n\u5b98\u65b9\u4f7f\u7528\u6587\u6863\n\n\nhttp://docs.paramiko.org/en/2.2/\n\n\n\u4e0a\u9762\u4e3a\u5b98\u65b9\u4f7f\u7528\u6587\u6863\uff0c\u4e2d\u6587\u53ef\u767e\u5ea6\u4e4b\uff0c\u5f88\u591a\u7684\n\n\n\u9a8c\u8bc1\u5b89\u88c5\n\n\n\n\nimport paramiko \u65e0\u62a5\u9519\u8bf4\u660e\u5b89\u88c5\u5bfc\u5165\u6210\u529f\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u4eca\u5929\u5c31\u8bb2\u4e0b\u5982\u4f55\u5b89\u88c5paramiko \u6a21\u5757\n\n\n\u4e0b\u8282\u5f00\u59cb\u8fdb\u5165\u6b63\u9898\u8bb2\u5982\u4f55\u8fde\u63a5\u5e76\u6267\u884c\u6307\u4ee4",
            "title": "1.paramiko\u6a21\u5757\u7684\u5b89\u88c5"
        },
        {
            "location": "/3.1/#paramiko",
            "text": "\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u8fd0\u7528Python\u83b7\u53d6Oracle\u6570\u636e\u5e93\u7684\u4fe1\u606f\u4ee5\u53ca\u5c06\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d  \u6211\u4eec\u77e5\u9053\u5bf9\u4e8e\u8fd0\u7ef4Oracle\u6570\u636e\u5e93\u4e0d\u80fd\u5ffd\u7565\u7cfb\u7edf\u7684\u6027\u80fd\u6307\u6807\u5305\u62ecCPU\u5185\u5b58\u7b49  \u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807  \u5176\u4e2dLinux\u9700\u8981\u5b89\u88c5sysstat\u5305\uff0c\u4e00\u822c\u90fd\u4f1a\u9ed8\u8ba4\u5b89\u88c5\uff0c\u6ca1\u6709\u8bf7\u5355\u72ec\u5b89\u88c5  Unix\u7531\u4e8e\u6211\u516c\u53f8\u53ea\u6709HP-Unix\uff0c\u6240\u4ee5\u547d\u4ee4\u662f\u5728HP\u4e0a\u8fd0\u884c\u7684\uff0c\u5176\u4ed6Unix\u7cfb\u7edf\u8bf7\u4f7f\u7528\u5404\u81ea\u7684  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   \u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko",
            "title": "paramiko\u6a21\u5757\u7684\u5b89\u88c5"
        },
        {
            "location": "/3.1/#paramiko_1",
            "text": "Python\u4e2d\u8fde\u63a5Unix/linux\u670d\u52a1\u5668\u7684\u6a21\u5757\u6709\u5f88\u591a\uff0c\u4f8b\u5982pxssh\u7b49\uff0c\u4f46\u662f\u6211\u5728\u5b9e\u9645\u5199\u7a0b\u5e8f\u7684\u65f6\u5019\u53d1\u73b0\u4ed6\u4eec\u4f1a\u6709\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898\uff0c\u6700\u540e\u6311\u5230 paramiko\u8fd9\u4e2a\u6a21\u5757\uff0c\u5982\u5927\u5bb6\u6709\u66f4\u597d\u7684\u6b22\u8fce\u63a8\u8350  \u8fd9\u91cc\u6211\u4eec\u91c7\u7528pip3\u547d\u4ee4\u5b89\u88c5\uff0c\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u7f3a\u5931\u7684\u6a21\u5757  pip3 install paramiko   \u5b98\u65b9\u4f7f\u7528\u6587\u6863  http://docs.paramiko.org/en/2.2/  \u4e0a\u9762\u4e3a\u5b98\u65b9\u4f7f\u7528\u6587\u6863\uff0c\u4e2d\u6587\u53ef\u767e\u5ea6\u4e4b\uff0c\u5f88\u591a\u7684",
            "title": "paramiko\u6a21\u5757\u7684\u5b89\u88c5"
        },
        {
            "location": "/3.1/#_1",
            "text": "import paramiko \u65e0\u62a5\u9519\u8bf4\u660e\u5b89\u88c5\u5bfc\u5165\u6210\u529f  \u6e90\u7801\u4f4d\u7f6e  \u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u4eca\u5929\u5c31\u8bb2\u4e0b\u5982\u4f55\u5b89\u88c5paramiko \u6a21\u5757  \u4e0b\u8282\u5f00\u59cb\u8fdb\u5165\u6b63\u9898\u8bb2\u5982\u4f55\u8fde\u63a5\u5e76\u6267\u884c\u6307\u4ee4",
            "title": "\u9a8c\u8bc1\u5b89\u88c5"
        },
        {
            "location": "/3.2/",
            "text": "\u4f7f\u7528paramiko\u83b7\u53d6linux\u7cfb\u7edfCPU\u4f7f\u7528\u7387\n\n\n\u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807\n\n\n\u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u5b89\u88c5paramiko\uff0c\u8fd9\u8282\u6211\u4eec\u8bb2\u5982\u4f55\u4f7f\u7528paramiko\u8fde\u63a5\u670d\u52a1\u5668\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8\n\n\nPython\u73af\u5883\u4e3a Python 3.6\n\n\n\u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko\n\n\n\u4f7f\u7528paramiko\u8fde\u63a5linux\u670d\u52a1\u5668\n\n\n\u83b7\u53d6CPU\u4f7f\u7528\u7387\u7a0b\u5e8f\n\n\n\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5linux\u670d\u52a1\u5668\u7136\u540e\u83b7\u53d6\u5176CPU\u4f7f\u7528\u7387\uff0c\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u8bf7\u770b\u6ce8\u91ca\n\n\ndef getlinuxcpu(ssh):\n    result=[]\n    #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528sar\u547d\u4ee4\u6765\u83b7\u53d6CPU\u7684\u4f7f\u7528\u7387\n    #exec_command\u53ef\u6709\u4e09\u4e2a\u53d8\u91cf\u53ef\u4f7f\u7528\n    #stdin\u4ee3\u8868\u6807\u51c6\u8f93\u5165\n    #stdout\u4e3a\u6807\u51c6\u8f93\u51fa\uff0c\u5373\u547d\u4ee4\u8f93\u51fa\u7684\u7ed3\u679c\n    #stderr\u4e3a\u9519\u8bef\u8f93\u51fa\uff0c\u5373\u6267\u884c\u8be5\u547d\u4ee4\u7684\u9519\u8bef\u4fe1\u606f\n    stdin,stdout,stderr=ssh.exec_command('sar 2 3 |awk \\'END {print 100-$NF}\\'')\n    #\u6211\u4eec\u9996\u5148\u5224\u65ad\u6709\u65e0\u9519\u8bef\uff0c\u5982\u679c\u6ca1\u6709\u5219\u8bfb\u51fa\u547d\u4ee4\u7ed3\u679c\n    err=stderr.readlines()\n    if len(err) != 0:\n        print (err)\n        return False\n    else:\n        stdout_content=stdout.readlines()\n    result= stdout_content\n    #\u8bfb\u51fa\u8f93\u51fa\u7684\u7ed3\u679c\u540e\u5224\u65ad\u662f\u5426\u6b63\u786e\uff0c\u6709\u65f6\u7531\u4e8e\u8d85\u65f6\u7b49\u539f\u56e0\u53ef\u80fd\u4e0d\u4f1a\u8fd4\u56de\u6b63\u786e\u7684\u6570\u503c\n    try:\n        if  len(result) !=0:\n            return round(float(result[0].strip()),2)\n        else:\n            print ('There is something wrong when execute sar command')\n    except Exception as e:\n        print (e)\n\n\n\n\n\n\u9a8c\u8bc1\u7ed3\u679c\n\n\n\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u7684CPU\u4f7f\u7528\u7387\n\n\n\n\n\u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u4eca\u5929\u5c31\u8bb2\u4e86\u5982\u4f55\u4f7f\u7528Python\u83b7\u53d6Linux\u670d\u52a1\u5668\u7684CPU\u4f7f\u7528\u7387\n\n\n\u4e0b\u8282\u8bb2\u89e3\u5982\u4f55\u83b7\u53d6\u5185\u5b58\u4f7f\u7528\u7387",
            "title": "2.\u83b7\u53d6linux\u7cfb\u7edfCPU\u4f7f\u7528\u7387"
        },
        {
            "location": "/3.2/#paramikolinuxcpu",
            "text": "\u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807  \u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u5b89\u88c5paramiko\uff0c\u8fd9\u8282\u6211\u4eec\u8bb2\u5982\u4f55\u4f7f\u7528paramiko\u8fde\u63a5\u670d\u52a1\u5668  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8  Python\u73af\u5883\u4e3a Python 3.6  \u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko  \u4f7f\u7528paramiko\u8fde\u63a5linux\u670d\u52a1\u5668",
            "title": "\u4f7f\u7528paramiko\u83b7\u53d6linux\u7cfb\u7edfCPU\u4f7f\u7528\u7387"
        },
        {
            "location": "/3.2/#cpu",
            "text": "\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5linux\u670d\u52a1\u5668\u7136\u540e\u83b7\u53d6\u5176CPU\u4f7f\u7528\u7387\uff0c\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u8bf7\u770b\u6ce8\u91ca  def getlinuxcpu(ssh):\n    result=[]\n    #\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528sar\u547d\u4ee4\u6765\u83b7\u53d6CPU\u7684\u4f7f\u7528\u7387\n    #exec_command\u53ef\u6709\u4e09\u4e2a\u53d8\u91cf\u53ef\u4f7f\u7528\n    #stdin\u4ee3\u8868\u6807\u51c6\u8f93\u5165\n    #stdout\u4e3a\u6807\u51c6\u8f93\u51fa\uff0c\u5373\u547d\u4ee4\u8f93\u51fa\u7684\u7ed3\u679c\n    #stderr\u4e3a\u9519\u8bef\u8f93\u51fa\uff0c\u5373\u6267\u884c\u8be5\u547d\u4ee4\u7684\u9519\u8bef\u4fe1\u606f\n    stdin,stdout,stderr=ssh.exec_command('sar 2 3 |awk \\'END {print 100-$NF}\\'')\n    #\u6211\u4eec\u9996\u5148\u5224\u65ad\u6709\u65e0\u9519\u8bef\uff0c\u5982\u679c\u6ca1\u6709\u5219\u8bfb\u51fa\u547d\u4ee4\u7ed3\u679c\n    err=stderr.readlines()\n    if len(err) != 0:\n        print (err)\n        return False\n    else:\n        stdout_content=stdout.readlines()\n    result= stdout_content\n    #\u8bfb\u51fa\u8f93\u51fa\u7684\u7ed3\u679c\u540e\u5224\u65ad\u662f\u5426\u6b63\u786e\uff0c\u6709\u65f6\u7531\u4e8e\u8d85\u65f6\u7b49\u539f\u56e0\u53ef\u80fd\u4e0d\u4f1a\u8fd4\u56de\u6b63\u786e\u7684\u6570\u503c\n    try:\n        if  len(result) !=0:\n            return round(float(result[0].strip()),2)\n        else:\n            print ('There is something wrong when execute sar command')\n    except Exception as e:\n        print (e)",
            "title": "\u83b7\u53d6CPU\u4f7f\u7528\u7387\u7a0b\u5e8f"
        },
        {
            "location": "/3.2/#_1",
            "text": "\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u7684CPU\u4f7f\u7528\u7387   \u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9  \u6e90\u7801\u4f4d\u7f6e  \u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u4eca\u5929\u5c31\u8bb2\u4e86\u5982\u4f55\u4f7f\u7528Python\u83b7\u53d6Linux\u670d\u52a1\u5668\u7684CPU\u4f7f\u7528\u7387  \u4e0b\u8282\u8bb2\u89e3\u5982\u4f55\u83b7\u53d6\u5185\u5b58\u4f7f\u7528\u7387",
            "title": "\u9a8c\u8bc1\u7ed3\u679c"
        },
        {
            "location": "/3.3/",
            "text": "\u4f7f\u7528paramiko\u83b7\u53d6linux\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u7387\n\n\n\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u8fd0\u7528Python\u83b7\u53d6Oracle\u6570\u636e\u5e93\u7684\u4fe1\u606f\u4ee5\u53ca\u5c06\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d\n\n\n\u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807\n\n\n\u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u8fde\u63a5linux\u670d\u52a1\u5668\u5e76\u83b7\u53d6CPU\u4fe1\u606f\uff0c\u8fd9\u8282\u8bb2\u5982\u4f55\u83b7\u53d6\u5185\u5b58\u4fe1\u606f\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\n\u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko\n\n\n\u83b7\u53d6\u5185\u5b58\u4f7f\u7528\u7387\u7a0b\u5e8f\n\n\n\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5linux\u670d\u52a1\u5668\u7136\u540e\u83b7\u53d6\u5176\u5185\u5b58\u4f7f\u7528\u7387\uff0c\u5177\u4f53\u6ce8\u91ca\u8bf7\u770b\u8be6\u7ec6\u4ee3\u7801\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528free\u547d\u4ee4\u6765\u83b7\u53d6\u5185\u5b58\u4f7f\u7528\u7387\n\n\ndef getlinuxmem(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('free -m |awk \\' NR==2 {print (($3 - $6 - $7)/$2)*100}\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return round(float(result[0].strip()),2)\n            else:\n                print ('There is something wrong when execute free command')\n        except Exception as e:\n            print (e)\n\n\n\n\n\u9a8c\u8bc1\u7ed3\u679c\n\n\n\n\n\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u7684\u5185\u5b58\u4f7f\u7528\u7387\n\n\n\u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u4eca\u5929\u5c31\u8bb2\u5230\u8fd9\uff0c\u4e0b\u8282\u8bb2\u8ff0\u5982\u4f55\u83b7\u53d6linux\u5206\u533a\u7684\u5206\u533a\u4f7f\u7528\u7387",
            "title": "3.\u83b7\u53d6linux\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u7387"
        },
        {
            "location": "/3.3/#paramikolinux",
            "text": "\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u8fd0\u7528Python\u83b7\u53d6Oracle\u6570\u636e\u5e93\u7684\u4fe1\u606f\u4ee5\u53ca\u5c06\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d  \u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807  \u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u8fde\u63a5linux\u670d\u52a1\u5668\u5e76\u83b7\u53d6CPU\u4fe1\u606f\uff0c\u8fd9\u8282\u8bb2\u5982\u4f55\u83b7\u53d6\u5185\u5b58\u4fe1\u606f  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   \u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko",
            "title": "\u4f7f\u7528paramiko\u83b7\u53d6linux\u7cfb\u7edf\u5185\u5b58\u4f7f\u7528\u7387"
        },
        {
            "location": "/3.3/#_1",
            "text": "\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5linux\u670d\u52a1\u5668\u7136\u540e\u83b7\u53d6\u5176\u5185\u5b58\u4f7f\u7528\u7387\uff0c\u5177\u4f53\u6ce8\u91ca\u8bf7\u770b\u8be6\u7ec6\u4ee3\u7801  \u8fd9\u91cc\u6211\u4eec\u4f7f\u7528free\u547d\u4ee4\u6765\u83b7\u53d6\u5185\u5b58\u4f7f\u7528\u7387  def getlinuxmem(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('free -m |awk \\' NR==2 {print (($3 - $6 - $7)/$2)*100}\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return round(float(result[0].strip()),2)\n            else:\n                print ('There is something wrong when execute free command')\n        except Exception as e:\n            print (e)",
            "title": "\u83b7\u53d6\u5185\u5b58\u4f7f\u7528\u7387\u7a0b\u5e8f"
        },
        {
            "location": "/3.3/#_2",
            "text": "\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u7684\u5185\u5b58\u4f7f\u7528\u7387  \u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9  \u6e90\u7801\u4f4d\u7f6e  \u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u4eca\u5929\u5c31\u8bb2\u5230\u8fd9\uff0c\u4e0b\u8282\u8bb2\u8ff0\u5982\u4f55\u83b7\u53d6linux\u5206\u533a\u7684\u5206\u533a\u4f7f\u7528\u7387",
            "title": "\u9a8c\u8bc1\u7ed3\u679c"
        },
        {
            "location": "/3.4/",
            "text": "\u4f7f\u7528paramiko\u83b7\u53d6linux\u7cfb\u7edf\u78c1\u76d8\u4f7f\u7528\u7387\n\n\n\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u8fd0\u7528Python\u83b7\u53d6Oracle\u6570\u636e\u5e93\u7684\u4fe1\u606f\u4ee5\u53ca\u5c06\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d\n\n\n\u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807\n\n\n\u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u8fde\u63a5linux\u670d\u52a1\u5668\u5e76\u83b7\u53d6CPU,\u5185\u5b58\u4fe1\u606f\n\n\n\u8fd9\u8282\u8bb2\u5982\u4f55\u83b7\u53d6\u78c1\u76d8\u5206\u533a\u4fe1\u606f\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\n\u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko\n\n\n\u4f7f\u7528\u7684\u547d\u4ee4\n\n\n\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528df\u547d\u4ee4\u6765\u83b7\u53d6\u78c1\u76d8\u7a7a\u95f4\u4f7f\u7528\u7387\n\n\n\u7531\u4e8e\u76f4\u63a5\u4f7f\u7528df\u6709\u6362\u884c\u7684\u53ef\u80fd\uff0c\u8fd9\u91cc\u6211\u4eec\u505a\u4e9b\u5904\u7406\u4f7f\u5176\u4e0d\u6362\u884c\n\n\n\u5177\u4f53\u53ef\u89c1\u4e0b\u97622\u4e2a\u56fe\n\n\n\n\n\n\n\u83b7\u53d6\u78c1\u76d8\u4f7f\u7528\u7387\u7a0b\u5e8f\n\n\n\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5linux\u670d\u52a1\u5668\u7136\u540e\u83b7\u53d6\u78c1\u76d8\u5206\u533a\u4fe1\u606f\uff0c\u5177\u4f53\u6ce8\u91ca\u60c5\u770b\u8be6\u7ec6\u4ee3\u7801\n\n\ndef getlinuxspace(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('df -h |awk \\' NR>1 {if ($1==$NF){printf $1}else{print $0}}\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return result\n            else:\n                print ('There is something wrong when execute df command')\n        except Exception as e:\n            print (e)\n\n\n\n\n\u9a8c\u8bc1\u7ed3\u679c\n\n\n\n\n\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u7684\u78c1\u76d8\u5206\u533a\u4f7f\u7528\u60c5\u51b5\n\n\n\u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u4eca\u5929\u5c31\u8bb2\u5230\u8fd9\uff0c\u4e0b\u8282\u8bb2\u8ff0\u83b7\u53d6HP-Unix\u7684\u76f8\u5173\u4fe1\u606f",
            "title": "4.\u83b7\u53d6linux\u7cfb\u7edf\u78c1\u76d8\u4f7f\u7528\u7387"
        },
        {
            "location": "/3.4/#paramikolinux",
            "text": "\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u8fd0\u7528Python\u83b7\u53d6Oracle\u6570\u636e\u5e93\u7684\u4fe1\u606f\u4ee5\u53ca\u5c06\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d  \u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807  \u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u8fde\u63a5linux\u670d\u52a1\u5668\u5e76\u83b7\u53d6CPU,\u5185\u5b58\u4fe1\u606f  \u8fd9\u8282\u8bb2\u5982\u4f55\u83b7\u53d6\u78c1\u76d8\u5206\u533a\u4fe1\u606f  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   \u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko",
            "title": "\u4f7f\u7528paramiko\u83b7\u53d6linux\u7cfb\u7edf\u78c1\u76d8\u4f7f\u7528\u7387"
        },
        {
            "location": "/3.4/#_1",
            "text": "\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528df\u547d\u4ee4\u6765\u83b7\u53d6\u78c1\u76d8\u7a7a\u95f4\u4f7f\u7528\u7387  \u7531\u4e8e\u76f4\u63a5\u4f7f\u7528df\u6709\u6362\u884c\u7684\u53ef\u80fd\uff0c\u8fd9\u91cc\u6211\u4eec\u505a\u4e9b\u5904\u7406\u4f7f\u5176\u4e0d\u6362\u884c  \u5177\u4f53\u53ef\u89c1\u4e0b\u97622\u4e2a\u56fe",
            "title": "\u4f7f\u7528\u7684\u547d\u4ee4"
        },
        {
            "location": "/3.4/#_2",
            "text": "\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5linux\u670d\u52a1\u5668\u7136\u540e\u83b7\u53d6\u78c1\u76d8\u5206\u533a\u4fe1\u606f\uff0c\u5177\u4f53\u6ce8\u91ca\u60c5\u770b\u8be6\u7ec6\u4ee3\u7801  def getlinuxspace(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('df -h |awk \\' NR>1 {if ($1==$NF){printf $1}else{print $0}}\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return result\n            else:\n                print ('There is something wrong when execute df command')\n        except Exception as e:\n            print (e)",
            "title": "\u83b7\u53d6\u78c1\u76d8\u4f7f\u7528\u7387\u7a0b\u5e8f"
        },
        {
            "location": "/3.4/#_3",
            "text": "\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u7684\u78c1\u76d8\u5206\u533a\u4f7f\u7528\u60c5\u51b5  \u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9  \u6e90\u7801\u4f4d\u7f6e  \u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u4eca\u5929\u5c31\u8bb2\u5230\u8fd9\uff0c\u4e0b\u8282\u8bb2\u8ff0\u83b7\u53d6HP-Unix\u7684\u76f8\u5173\u4fe1\u606f",
            "title": "\u9a8c\u8bc1\u7ed3\u679c"
        },
        {
            "location": "/3.5/",
            "text": "\u4f7f\u7528paramiko\u83b7\u53d6HP-Unix\u7cfb\u7edf\u6027\u80fd\u6570\u636e\n\n\n\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u8fd0\u7528Python\u83b7\u53d6Oracle\u6570\u636e\u5e93\u7684\u4fe1\u606f\u4ee5\u53ca\u5c06\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d\n\n\n\u6211\u4eec\u77e5\u9053\u5bf9\u4e8e\u8fd0\u7ef4Oracle\u6570\u636e\u5e93\u4e0d\u80fd\u5ffd\u7565\u7cfb\u7edf\u7684\u6027\u80fd\u6307\u6807\u5305\u62ecCPU\u5185\u5b58\u7b49\n\n\n\u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807\n\n\n\u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u8fde\u63a5linux\u670d\u52a1\u5668\u5e76\u83b7\u53d6\u76f8\u5173\u4fe1\u606f\n\n\n\u8fd9\u8282\u6211\u4eec\u7528\u4e00\u8282\u6765\u8bb2\u89e3\u5982\u4f55\u83b7\u53d6HP-Unix\u7684\u5185\u5b58,CPU\u53ca\u78c1\u76d8\u5206\u533a\u4fe1\u606f\n\n\n\u73af\u5883\u8bbe\u7f6e\n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\n\u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko\n\n\n\u4f7f\u7528\u7684\u547d\u4ee4\n\n\n\u8ddflinux\u6709\u6240\u533a\u522b\u6211\u4eec\u83b7\u53d6HP-Unix\u7684\u4fe1\u606f\u7684\u547d\u4ee4\u662f\u4e0d\u4e00\u6837\u7684\n\n\nCPU:       sar \nMemory: swapinfo \n\u78c1\u76d8:       bdf\n\n\n\u4f7f\u7528paramiko\u8fde\u63a5unix\u670d\u52a1\u5668\n\n\n\u7a0b\u5e8f\u540d\u79f0\u4e3a:connectunix.py\n\n\n\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5unix\u670d\u52a1\u5668\u7136\u540e\u83b7\u53d6CPU,\u5185\u5b58\uff0c\u78c1\u76d8\u5206\u533a\u4fe1\u606f\n\n\n\u5177\u4f53\u6ce8\u91ca\u60c5\u770b\u8be6\u7ec6\u4ee3\u7801\n\n\n#!/usr/bin/python\n#coding=utf8\nimport paramiko\ndef getunixspace(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('bdf |awk \\' NR>1 {if ($1==$NF){printf $1}else{print $0}}\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return result\n            else:\n                print ('There is something wrong when execute unix bdf command')\n        except  Exception as e :\n            print (e)\n\n\ndef getunixcpu(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('sar 1 3 |awk \\'END {print 100-$NF }\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return round(float(result[0].strip()),2)\n            else:\n                print ('There is something wrong when execute unix sar command')\n        except Exception as e:\n            print (e)\ndef getunixmem(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('swapinfo -tam | awk \\'END { print $5}\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return round(float(result[0].strip()[0:-1]),2)\n            else:\n                print ('There is something wrong when execute unix swapinfo command')\n        except Exception as e:\n            print (e)\n\n\n\n\n\n\u9a8c\u8bc1\u7ed3\u679c\n\n\n\n\n\n\n\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u7684\u7684\u76f8\u5173\u4fe1\u606f\n\n\n\u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u4eca\u5929\u5c31\u8bb2\u5230\u8fd9\uff0c\u4e0b\u8282\u8bb2\u8ff0\u83b7\u53d6\u5982\u4f55\u5229\u7528Python\u68c0\u67e5Oracle alert\u65e5\u5fd7",
            "title": "5.\u83b7\u53d6HP-Unix\u7cfb\u7edf\u6027\u80fd\u6570\u636e"
        },
        {
            "location": "/3.5/#paramikohp-unix",
            "text": "\u524d\u9762\u4ecb\u7ecd\u4e86\u5982\u4f55\u8fd0\u7528Python\u83b7\u53d6Oracle\u6570\u636e\u5e93\u7684\u4fe1\u606f\u4ee5\u53ca\u5c06\u6570\u636e\u5b58\u5165MySQL\u6570\u636e\u5e93\u4e2d  \u6211\u4eec\u77e5\u9053\u5bf9\u4e8e\u8fd0\u7ef4Oracle\u6570\u636e\u5e93\u4e0d\u80fd\u5ffd\u7565\u7cfb\u7edf\u7684\u6027\u80fd\u6307\u6807\u5305\u62ecCPU\u5185\u5b58\u7b49  \u8fd9\u4e2a\u4e13\u9898\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528Python\u76d1\u63a7linux/Unix\u670d\u52a1\u5668\u7684\u6027\u80fd\u6307\u6807  \u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u8fde\u63a5linux\u670d\u52a1\u5668\u5e76\u83b7\u53d6\u76f8\u5173\u4fe1\u606f  \u8fd9\u8282\u6211\u4eec\u7528\u4e00\u8282\u6765\u8bb2\u89e3\u5982\u4f55\u83b7\u53d6HP-Unix\u7684\u5185\u5b58,CPU\u53ca\u78c1\u76d8\u5206\u533a\u4fe1\u606f  \u73af\u5883\u8bbe\u7f6e  Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   \u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko",
            "title": "\u4f7f\u7528paramiko\u83b7\u53d6HP-Unix\u7cfb\u7edf\u6027\u80fd\u6570\u636e"
        },
        {
            "location": "/3.5/#_1",
            "text": "\u8ddflinux\u6709\u6240\u533a\u522b\u6211\u4eec\u83b7\u53d6HP-Unix\u7684\u4fe1\u606f\u7684\u547d\u4ee4\u662f\u4e0d\u4e00\u6837\u7684  CPU:       sar \nMemory: swapinfo \n\u78c1\u76d8:       bdf",
            "title": "\u4f7f\u7528\u7684\u547d\u4ee4"
        },
        {
            "location": "/3.5/#paramikounix",
            "text": "\u7a0b\u5e8f\u540d\u79f0\u4e3a:connectunix.py  \u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5unix\u670d\u52a1\u5668\u7136\u540e\u83b7\u53d6CPU,\u5185\u5b58\uff0c\u78c1\u76d8\u5206\u533a\u4fe1\u606f  \u5177\u4f53\u6ce8\u91ca\u60c5\u770b\u8be6\u7ec6\u4ee3\u7801  #!/usr/bin/python\n#coding=utf8\nimport paramiko\ndef getunixspace(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('bdf |awk \\' NR>1 {if ($1==$NF){printf $1}else{print $0}}\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return result\n            else:\n                print ('There is something wrong when execute unix bdf command')\n        except  Exception as e :\n            print (e)\n\n\ndef getunixcpu(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('sar 1 3 |awk \\'END {print 100-$NF }\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return round(float(result[0].strip()),2)\n            else:\n                print ('There is something wrong when execute unix sar command')\n        except Exception as e:\n            print (e)\ndef getunixmem(ssh):\n        result=[]\n        stdin,stdout,stderr=ssh.exec_command('swapinfo -tam | awk \\'END { print $5}\\'')\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        result= stdout_content\n        try:\n            if  len(result) !=0:\n                return round(float(result[0].strip()[0:-1]),2)\n            else:\n                print ('There is something wrong when execute unix swapinfo command')\n        except Exception as e:\n            print (e)",
            "title": "\u4f7f\u7528paramiko\u8fde\u63a5unix\u670d\u52a1\u5668"
        },
        {
            "location": "/3.5/#_2",
            "text": "\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56de\u8be5\u670d\u52a1\u5668\u7684\u7684\u76f8\u5173\u4fe1\u606f  \u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9  \u6e90\u7801\u4f4d\u7f6e  \u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u4eca\u5929\u5c31\u8bb2\u5230\u8fd9\uff0c\u4e0b\u8282\u8bb2\u8ff0\u83b7\u53d6\u5982\u4f55\u5229\u7528Python\u68c0\u67e5Oracle alert\u65e5\u5fd7",
            "title": "\u9a8c\u8bc1\u7ed3\u679c"
        },
        {
            "location": "/3.6/",
            "text": "\u4f7f\u7528paramiko\u76d1\u63a7Oracle alert\u65e5\u5fd7\n\n\n\u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u8fde\u63a5linux/Unix\u670d\u52a1\u5668\n\n\n\u8fd9\u8282\u6211\u4eec\u5c06\u5176\u5e94\u7528\u5728\u6211\u4eec\u7684Oracle\u8fd0\u7ef4\u4e2d\uff0c\u7528\u5b83\u6765\u76d1\u63a7Oracle alert\u65e5\u5fd7\n\n\n\u73af\u5883\u8bbe\u7f6e\n \n\n\nLinux\u7cfb\u7edf\u4e3a Centos 6.8 \n\n\nPython\u73af\u5883\u4e3a Python 3.6 \n\n\n\u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko\n\n\n\u4f7f\u7528\u7684\u547d\u4ee4\n\n\n\u6211\u4eec\u4f7f\u7528grep\u547d\u4ee4\u6765\u5224\u65adalert\u65e5\u5fd7\u4e2d\u662f\u5426\u6709ORA Error\u53caCheckpoint\u62a5\u8b66\n\n\n\u76d1\u63a7alert\u65e5\u5fd7\u7a0b\u5e8f\n\n\n\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5linux/Unix\u670d\u52a1\u5668\u540e\u67e5\u770balert\u65e5\u5fd7\u67e5\u770b\u62a5\u8b66\u5173\u952e\u5b57\uff0c\u5f53\u53d1\u73b0\u9519\u8bef\u65f6\u8f93\u5165\u7ed3\u679c\n\n\n\u6211\u4eec\u53ef\u4ee5for\u5faa\u73af\u6279\u91cf\u76d1\u63a7\u5e76\u53d1\u9001\u7ed3\u679c\u5230\u6307\u5b9a\u7684\u90ae\u7bb1\uff0c\u8fd9\u90e8\u5206\u5c31\u8ba9\u5927\u5bb6\u81ea\u5df1\u5199\u4e86\uff0c\u53ef\u53c2\u7167\u6211\u4ee5\u524d\u7684\u6587\u7ae0\n\n\n\u8fd9\u6837\u5373\u53ef\u505a\u5230\u81ea\u52a8\u5316\u76d1\u63a7\u4e86\uff0c\u53ef\u5927\u5e45\u51cf\u5c11DBA\u65e5\u5e38\u7684\u5de5\u4f5c\n\n\n\u81ea\u52a8\u5316\u76d1\u63a7\u591a\u4e2aOracle\u8868\u7a7a\u95f4\n\n\n\u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6\n\n\n\u7a0b\u5e8f\u540d\u79f0\u4e3a:checkoraclelog.py\n\n\n#!/usr/bin/python\n#coding=utf8\nimport paramiko\n\ndef oraclelog(ssh,path):\n        alert_log=[]\n        command='grep  -E \\'ORA-|Checkpoint|Error\\' '+path\n        stdin,stdout,stderr=ssh.exec_command(command)\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        if len(stdout_content)!=0:\n            result='\\n'.join(stdout_content)\n            result= 'Oralce log on '+hostname+ ' have errors\\n'+'The log path is '+path+'\\n'+result\n            alert_log.append(result)\n            return alert_log\n        else:\n            return 'noerror'\n\nif __name__ == '__main__':\n    hostname='10.60.14.60'\n    username='root'\n    password='password'\n    try:\n        #\u4f7f\u7528SSHClient\u65b9\u6cd5\u5b9a\u4e49ssh\u53d8\u91cf\n        ssh = paramiko.SSHClient()\n        ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n        #\u8fde\u63a5\u76ee\u6807\u670d\u52a1\u5668\n        ssh.connect(hostname=hostname,port=22,username=username,password=password)\n        path='/oracle/NP1/saptrace/background/alert_NP1.log'\n        alert_log=oraclelog(ssh,path)\n        ssh.close()\n        if alert_log:\n            if alert_log !='noerror':\n                for i in alert_log:\n                    print (i)\n            else:\n                print ('There is no ORA- error on '+hostname)\n    except Exception as e:\n        print (hostname+' '+str(e))\n\n\n\n\n\u9a8c\u8bc1\u7ed3\u679c\n\n\n\n\n\n\n\u6b63\u5e38\u60c5\u51b5\u4e0b\u5982\u679c\u6709ORA\u7b49\u9519\u8bef\u4f1a\u8f93\u51fa\u7ed3\u679c\n\n\n\u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9\n\n\n\u6e90\u7801\u4f4d\u7f6e\n\n\n\u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875\n\n\nhttps://github.com/bsbforever/wechat_oms\n\n\n\u4eca\u5929\u5c31\u8bb2\u5230\u8fd9\uff0c\u4e0b\u8282\u5c06\u662f\u4e00\u4e2a\u603b\u7ed3\u3002",
            "title": "6.\u76d1\u63a7Oracle alert\u65e5\u5fd7"
        },
        {
            "location": "/3.6/#paramikooracle-alert",
            "text": "\u4e0a\u8282\u6211\u4eec\u8bb2\u4e86\u5982\u4f55\u8fde\u63a5linux/Unix\u670d\u52a1\u5668  \u8fd9\u8282\u6211\u4eec\u5c06\u5176\u5e94\u7528\u5728\u6211\u4eec\u7684Oracle\u8fd0\u7ef4\u4e2d\uff0c\u7528\u5b83\u6765\u76d1\u63a7Oracle alert\u65e5\u5fd7  \u73af\u5883\u8bbe\u7f6e    Linux\u7cfb\u7edf\u4e3a Centos 6.8   Python\u73af\u5883\u4e3a Python 3.6   \u8fde\u63a5Unix\u7c7b\u670d\u52a1\u5668\u6a21\u5757: paramiko",
            "title": "\u4f7f\u7528paramiko\u76d1\u63a7Oracle alert\u65e5\u5fd7"
        },
        {
            "location": "/3.6/#_1",
            "text": "\u6211\u4eec\u4f7f\u7528grep\u547d\u4ee4\u6765\u5224\u65adalert\u65e5\u5fd7\u4e2d\u662f\u5426\u6709ORA Error\u53caCheckpoint\u62a5\u8b66",
            "title": "\u4f7f\u7528\u7684\u547d\u4ee4"
        },
        {
            "location": "/3.6/#alert",
            "text": "\u5982\u4e0b\u7a0b\u5e8f\u4f7f\u7528paramiko\u8fde\u63a5linux/Unix\u670d\u52a1\u5668\u540e\u67e5\u770balert\u65e5\u5fd7\u67e5\u770b\u62a5\u8b66\u5173\u952e\u5b57\uff0c\u5f53\u53d1\u73b0\u9519\u8bef\u65f6\u8f93\u5165\u7ed3\u679c  \u6211\u4eec\u53ef\u4ee5for\u5faa\u73af\u6279\u91cf\u76d1\u63a7\u5e76\u53d1\u9001\u7ed3\u679c\u5230\u6307\u5b9a\u7684\u90ae\u7bb1\uff0c\u8fd9\u90e8\u5206\u5c31\u8ba9\u5927\u5bb6\u81ea\u5df1\u5199\u4e86\uff0c\u53ef\u53c2\u7167\u6211\u4ee5\u524d\u7684\u6587\u7ae0  \u8fd9\u6837\u5373\u53ef\u505a\u5230\u81ea\u52a8\u5316\u76d1\u63a7\u4e86\uff0c\u53ef\u5927\u5e45\u51cf\u5c11DBA\u65e5\u5e38\u7684\u5de5\u4f5c  \u81ea\u52a8\u5316\u76d1\u63a7\u591a\u4e2aOracle\u8868\u7a7a\u95f4  \u4f7f\u7528Python\u53d1\u9001\u90ae\u4ef6  \u7a0b\u5e8f\u540d\u79f0\u4e3a:checkoraclelog.py  #!/usr/bin/python\n#coding=utf8\nimport paramiko\n\ndef oraclelog(ssh,path):\n        alert_log=[]\n        command='grep  -E \\'ORA-|Checkpoint|Error\\' '+path\n        stdin,stdout,stderr=ssh.exec_command(command)\n        err=stderr.readlines()\n        if len(err) != 0:\n            print (err)\n            return False\n        else:\n            stdout_content=stdout.readlines()\n        if len(stdout_content)!=0:\n            result='\\n'.join(stdout_content)\n            result= 'Oralce log on '+hostname+ ' have errors\\n'+'The log path is '+path+'\\n'+result\n            alert_log.append(result)\n            return alert_log\n        else:\n            return 'noerror'\n\nif __name__ == '__main__':\n    hostname='10.60.14.60'\n    username='root'\n    password='password'\n    try:\n        #\u4f7f\u7528SSHClient\u65b9\u6cd5\u5b9a\u4e49ssh\u53d8\u91cf\n        ssh = paramiko.SSHClient()\n        ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n        #\u8fde\u63a5\u76ee\u6807\u670d\u52a1\u5668\n        ssh.connect(hostname=hostname,port=22,username=username,password=password)\n        path='/oracle/NP1/saptrace/background/alert_NP1.log'\n        alert_log=oraclelog(ssh,path)\n        ssh.close()\n        if alert_log:\n            if alert_log !='noerror':\n                for i in alert_log:\n                    print (i)\n            else:\n                print ('There is no ORA- error on '+hostname)\n    except Exception as e:\n        print (hostname+' '+str(e))",
            "title": "\u76d1\u63a7alert\u65e5\u5fd7\u7a0b\u5e8f"
        },
        {
            "location": "/3.6/#_2",
            "text": "\u6b63\u5e38\u60c5\u51b5\u4e0b\u5982\u679c\u6709ORA\u7b49\u9519\u8bef\u4f1a\u8f93\u51fa\u7ed3\u679c  \u5982\u4e0d\u6b63\u5e38\uff0c\u4ee3\u7801\u4e2d\u5927\u91cf\u7684\u5f02\u5e38\u5904\u7406\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u5b9a\u4f4d\u5f02\u5e38\u70b9  \u6e90\u7801\u4f4d\u7f6e  \u5168\u90e8\u4ee3\u7801\u8bf7\u67e5\u770b\u6211\u7684Github\u4e3b\u9875  https://github.com/bsbforever/wechat_oms  \u4eca\u5929\u5c31\u8bb2\u5230\u8fd9\uff0c\u4e0b\u8282\u5c06\u662f\u4e00\u4e2a\u603b\u7ed3\u3002",
            "title": "\u9a8c\u8bc1\u7ed3\u679c"
        }
    ]
}